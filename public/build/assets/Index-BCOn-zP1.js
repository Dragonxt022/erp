import{L as M}from"./LayoutFranqueado-CcGFhCC8.js";import{d as r,y as k,i as I,o as l,e as p,a as t,F as C,g as L,t as w,k as b,m as D,n as z,l as P,b as f,h,c as y,w as V,u as j,Z as B}from"./app-CgGA6uee.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as E}from"./InputModel-WgZpr1Xb.js";import{_ as $}from"./LabelModel-DgFbubok.js";import"./user-D2kQyfPB.js";const S={class:"card-container"},U=["onClick"],A={class:"card-inner"},F={class:"icon-container"},N={class:"icon-leaf"},q=["src"],O={class:"text-container"},Q={class:"city"},T={__name:"ListarMetodosPagamentos",emits:["dado-selecionado"],setup(_,{emit:c}){const u=c,n=r([]),d=r(""),s=async()=>{try{const o=await b.get("/api/metodos-pagamentos/lista");n.value=Object.values(o.data)}catch(o){console.error("Erro ao carregar os dados:",o)}},a=o=>o?new URL(o,window.location.origin).href:"/storage/images/no_imagem.svg";k(s);const m=o=>{u("dado-selecionado",o)},g=I(()=>{const o=d.value.toLowerCase();return n.value.filter(e=>String(e.id).toLowerCase().includes(o)||e.fornecedor_nome.toLowerCase().includes(o))});return(o,e)=>(l(),p("div",null,[e[2]||(e[2]=t("div",{class:"painel-title"},"Métodos de pagamento",-1)),e[3]||(e[3]=t("div",{class:"painel-subtitle"},[t("p",null,"Ative formas de pagamento para o fluxo de caixa")],-1)),t("div",S,[(l(!0),p(C,null,L(g.value,i=>(l(),p("div",{key:i.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:v=>m(i)},[t("div",A,[t("div",F,[e[0]||(e[0]=t("div",{class:"icon-bg"},null,-1)),t("div",N,[t("img",{src:a(i.img_icon),alt:"Ícone"},null,8,q)])]),t("div",O,[t("div",Q,w(i.nome),1)]),e[1]||(e[1]=t("div",{class:"action-icon"},null,-1))])],8,U))),128))])]))}},K=x(T,[["__scopeId","data-v-b93dfa6d"]]),R={__name:"Deslizante",props:{status:{type:Boolean,default:!1}},emits:["update:status"],setup(_,{emit:c}){const u=_,n=c,d=r(u.status);D(()=>u.status,a=>{d.value=a});const s=()=>{d.value=!d.value,n("update:status",d.value)};return(a,m)=>(l(),p("div",null,[t("div",{class:z(["toggle-switch",{"toggle-on":d.value}]),onClick:s},m[0]||(m[0]=[t("div",{class:"toggle-knob"},null,-1)]),2)]))}},Z=x(R,[["__scopeId","data-v-c1353370"]]),G={class:"elemento-fixo"},H={key:0},J={class:"w-full h-[237px] p-12 bg-white rounded-[20px] flex-col justify-center items-center gap-10 inline-flex"},W={class:"self-stretch text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},X={class:"w-full h-[63px] relative"},Y={class:"mt-8 w-full p-12 bg-white rounded-[20px] flex justify-between items-center gap-5"},ee={class:"flex flex-col w-2/3"},te={class:"text-sm font-semibold text-gray-700"},oe={class:"w-1/2 flex justify-end"},se={__name:"DetalhesMetodosPagamento",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(_,{emit:c}){const u=P(),n=_,d=r(!1),s=r(0),a=r(!1);let m=!1;const g=async()=>{try{const e=await b.get(`/api/metodos-pagamentos/verificar-pagamentos/${n.dados.id}`);e.status===200&&e.data?(console.log("Dados recebidos:",e.data),s.value=e.data.data.porcentagem||0,a.value=e.data.data.status===1):(e.status===404||!e.data)&&(console.info("Nenhum método de pagamento encontrado para esta unidade."),s.value=0,a.value=!1)}catch(e){console.error("Erro ao buscar o método de pagamento:",e),s.value=0,a.value=!1}},o=async()=>{try{await new Promise(v=>setTimeout(v,2e3));const e={unidade_id:n.dados.id,default_payment_method_id:n.dados.id,porcentagem:s.value,status:a.value?1:0},i=await b.post("/api/metodos-pagamentos/upsert",e);m||(m=!0,u.success("Método atualizado",{onClose:()=>{m=!1}}))}catch(e){console.error("Erro ao atualizar o método de pagamento:",e)}};return D(()=>n.dados.id,()=>{g()}),k(()=>{g()}),(e,i)=>(l(),p("div",G,[d.value?h("",!0):(l(),p("div",H,[t("div",J,[t("div",W,w(_.dados.nome),1),t("div",X,[f($,{class:"font-semibold text-gray-900",text:"Quanto você paga de taxa?"}),f(E,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=v=>s.value=v),placeholder:"5%",onInput:o},null,8,["modelValue"])])]),t("div",Y,[t("div",ee,[f($,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),t("span",te,w(a.value?"Ativado":"Desativado"),1)]),t("div",oe,[f(Z,{status:a.value,"onUpdate:status":i[1]||(i[1]=v=>a.value=v),onClick:o},null,8,["status"])])])]))]))}},ae=x(se,[["__scopeId","data-v-df9a50fe"]]),ne={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},de={key:0},le={class:"flex flex-col gap-4"},ie={__name:"Index",setup(_){const c=r(null),u=r(0),n=r(!1),d=s=>{c.value=s};return(s,a)=>(l(),y(M,null,{default:V(()=>[f(j(B),{title:"Métodos de pagamentos"}),t("div",ne,[n.value?h("",!0):(l(),p("div",de,[(l(),y(K,{key:u.value,ref:"listaDados",onDadoSelecionado:d}))])),t("div",le,[n.value?h("",!0):(l(),p(C,{key:0},[c.value?(l(),y(ae,{key:0,dados:c.value},null,8,["dados"])):h("",!0)],64))])])]),_:1}))}},ve=x(ie,[["__scopeId","data-v-690cf251"]]);export{ve as default};
