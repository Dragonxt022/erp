import{l as z,d as l,i as G,o,e as a,a as e,j as D,s as oe,F as S,g as j,t as C,b as y,h as $,v as J,w as A,f as R,p as T,k as E,y as te,q as X,c as M,m as se,x as Q,u as ae,Z as re}from"./app-B6MFSoyK.js";import{_ as L,I as H,B as W,a as O,d as Z,C as ne}from"./ConfirmDialog-CxjBuoSZ.js";import{B as le}from"./ButtonPrimary-HWq3Nqcl.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                         */import{L as ie}from"./LayoutFranqueado-CQ-l6RLZ.js";import"./user-BRy7zfcO.js";const de={key:0,class:"w-[100%] h-full flex flex-col p-4 bg-gray-50"},ce={class:"mb-6 relative"},ue={class:"relative"},pe=["value"],ve={class:"w-full bg-white rounded-lg p-6 mb-6"},fe={class:"flex items-center"},me={class:"flex-shrink-0"},ge=["src"],_e={class:"ml-6"},he={class:"text-2xl font-semibold text-gray-800"},xe={key:0,class:"text-red-500 text-sm text-center"},ye={class:"relative flex items-center w-full"},be={class:"flex justify-end space-x-4"},$e={__name:"CadastrarInsumoEstoque",props:{produtoSelecionado:{type:Object,required:!1}},setup(r,{emit:t}){var N;const n=z(),b=t,x=r,i=l([]),s=l(""),u=l(""),h=l(((N=x.produtoSelecionado)==null?void 0:N.valor)||""),f=l(!1);l(!1);const k=l(!1),m=l(""),q=G(()=>x.produtoSelecionado.unidadeDeMedida==="a_granel"?"Kg":"Quantidade"),P=G(()=>x.produtoSelecionado.unidadeDeMedida==="a_granel"?"Digite o peso (ex: 1.5)":"Digite a quantidade"),p=()=>{const V=x.produtoSelecionado.unidadeDeMedida==="a_granel"?/^[0-9]+(\.[0-9]+)?$/:/^[0-9]+$/;f.value=!V.test(u.value)},v=()=>{const V=h.value.replace(/\D/g,""),w=V.slice(0,-2)||"0",c=V.slice(-2).padStart(2,"0");h.value=`R$ ${Number(w).toLocaleString("pt-BR")},${c}`},g=()=>{u.value="",h.value=""};(async()=>{try{const V=await E.get("/api/estoque/fornecedores");i.value=V.data.data.map(w=>({id:w.id||"N/D",razao_social:w.razao_social||"N/D"}))}catch(V){console.error("Erro ao carregar fornecedores:",V)}})();const I=V=>V?new URL(V,window.location.origin).href:"/storage/images/no_imagem.svg",K=()=>(m.value="",s.value?!u.value||f.value?(n.error("Quantidade inválida."),m.value="Quantidade inválida.",!1):!h.value||k.value?(n.error("Valor inválido."),m.value="Valor inválido.",!1):!0:(n.error("Fornecedor não selecionado."),m.value="Fornecedor não selecionado.",!1)),B=()=>{if(!K())return;const V={...x.produtoSelecionado,fornecedor_id:s.value,quantidade:u.value,valor:h.value,unidade_de_medida:x.produtoSelecionado.unidadeDeMedida};n.success("Inusmo adicionado"),g(),b("adicionarAoCarrinho",V)};return(V,w)=>r.produtoSelecionado?(o(),a("div",de,[w[5]||(w[5]=e("h3",{class:"text-xl font-bold mb-4 text-gray-500"}," Estou recebendo os itens de ",-1)),e("div",ce,[e("div",ue,[D(e("select",{"onUpdate:modelValue":w[0]||(w[0]=c=>s.value=c),id:"fornecedor",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-green-600 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[w[3]||(w[3]=e("option",{value:"",disabled:""},"Selecione um fornecedor",-1)),(o(!0),a(S,null,j(i.value,c=>(o(),a("option",{key:c.id,value:c.id},C(c.razao_social),9,pe))),128))],512),[[oe,s.value]])])]),e("div",ve,[e("div",fe,[e("div",me,[e("img",{src:I(r.produtoSelecionado.profile_photo),alt:"Foto do Produto",class:"w-24 h-24 rounded-lg"},null,8,ge)]),e("div",_e,[e("div",he,C(r.produtoSelecionado.nome||"N/A"),1)])])]),e("form",{onSubmit:T(B,["prevent"]),class:"space-y-4"},[e("div",null,[y(L,{text:q.value},null,8,["text"]),y(H,{modelValue:u.value,"onUpdate:modelValue":w[1]||(w[1]=c=>u.value=c),placeholder:P.value,onInput:p},null,8,["modelValue","placeholder"]),f.value?(o(),a("p",xe," Insira um valor válido. ")):$("",!0)]),e("div",null,[y(L,{text:"Valor"}),e("div",ye,[D(e("input",{"onUpdate:modelValue":w[2]||(w[2]=c=>h.value=c),placeholder:"R$ 0,00",onInput:v,class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,544),[[J,h.value]])])]),e("div",be,[y(le,{onClick:B},{default:A(()=>w[4]||(w[4]=[R("Adicionar")])),_:1})])],32)])):$("",!0)}},we=F($e,[["__scopeId","data-v-1cab2bac"]]),Ce={class:"flex gap-5"},ke={class:"flex-1"},Pe={class:"min-w-full table-auto"},Ve={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},qe={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Ie={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-left"},Ue={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},De={class:"botao-container"},Se={__name:"ResumoCarrinho",props:{carrinho:{type:Array,required:!0}},emits:["confirmar","cancelar"],setup(r,{emit:t}){const n=z(),b=r,x=t,i=f=>f.unidadeDeMedida==="a_granel"?parseFloat(f.valor.replace("R$","").replace(",","."))/f.quantidade:parseFloat(f.valor.replace("R$","").replace(",",".")),s=f=>f.unidadeDeMedida==="a_granel"?i(f)*f.quantidade:f.quantidade*parseFloat(f.valor.replace("R$","").replace(",",".")),u=async()=>{var f,k;try{const m={fornecedor_id:((f=b.carrinho[0])==null?void 0:f.fornecedor_id)||null,itens:b.carrinho.map(P=>({id:P.id,nome:P.nome,quantidade:P.quantidade,unidadeDeMedida:P.unidadeDeMedida,valorUnitario:Math.round(parseFloat(P.valor.replace("R$","").replace(",","."))*100),total:Math.round(s(P)*100)}))};console.log("Dados enviados:",JSON.stringify(m,null,2));const q=await E.post("/api/estoque/armazenar-entrada",m);console.log("Resposta da API:",q.data),Z.Inertia.visit(route("franqueado.inventario")),n.success("Lista de insumos salvas em seu estoque.")}catch(m){n.error("Ouve um erro, tente novamente ou chame o suporte."),console.error("Erro ao enviar entrada:",((k=m.response)==null?void 0:k.data)||m.message)}},h=()=>{x("cancelar")};return(f,k)=>(o(),a("div",Ce,[k[1]||(k[1]=e("div",{class:"flex-1"},[e("div",{class:"painel-title"},"Confirmar entrada"),e("div",{class:"painel-subtitle"},[e("p",null,"Vamos conferir se está tudo certo")]),e("div",{class:"mt-[25%] text-[#6d6d6d] text-[18px] font-normal font-['Figtree'] leading-[23px] tracking-tight"},[R(" Você confirma que está "),e("br"),R(" realizando uma nova entrada "),e("br"),R(" com os seguintes itens? ")])],-1)),e("div",ke,[e("table",Pe,[k[0]||(k[0]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider TrRedonDireita"}," TOTAL ")])],-1)),e("tbody",null,[(o(!0),a(S,null,j(r.carrinho,m=>(o(),a("tr",{key:m.id},[e("td",Ve,C(m.nome),1),e("td",qe,C(m.quantidade),1),e("td",Ie,C(m.unidadeDeMedida==="a_granel"?`${i(m).toFixed(2)} /kg`:m.valor),1),e("td",Ue,C(s(m).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)]))),128))])]),e("div",De,[y(W,{text:"Cancelar",onClick:h}),y(O,{text:"Confirmar",onClick:u})])])]))}},Fe=F(Se,[["__scopeId","data-v-18d607a6"]]),Re={key:0},Me={key:0,class:"sidebar-container"},Ee={key:0,class:"loading-overlay"},Le={key:1,class:"flex"},je={class:"flex-1 p-4"},Ae={class:"relative flex items-center w-full mb-4"},Be={class:"space-y-4"},Ne=["onClick"],Qe={class:"flex-shrink-0"},Te=["src"],ze={class:"ml-4 flex-1"},Oe={class:"text-lg font-semibold flex items-center"},Ke={key:0,class:"ml-5 text-xs bg-green-100 text-green-600 font-bold rounded-full px-2 py-1"},Ge={key:1,class:"mr-2 ml-5 text-yellow-500",title:"Essa estrela sigifinica que esse insumo e um produto princial"},Je={class:"absolute bottom-4 right-4 mt-5 botao-container"},Xe={class:"flex-1 p-4"},Ze={__name:"CadastroProduto",props:{isVisible:{type:Boolean,required:!0}},setup(r){const t=l([]),n=l(""),b=l(!1),x=l(null),i=l([]),s=l(!1),u=()=>{console.log("Entrada confirmada",i.value),mostrarModalRevisao.value=!1,i.value=[]},h=async()=>{b.value=!0;try{const p=await E.get("/api/produtos/lista");t.value=p.data}catch(p){console.error("Erro ao carregar os produtos:",p)}finally{b.value=!1}},f=p=>p?new URL(p,window.location.origin).href:"/storage/images/no_imagem.svg",k=p=>{x.value=p},m=p=>i.value.filter(v=>v.id===p).length,q=p=>{i.value.push(p),x.value=null},P=G(()=>t.value.filter(p=>p.nome.toLowerCase().includes(n.value.toLowerCase())));return te(h),(p,v)=>(o(),a(S,null,[y(X,{name:"fade"},{default:A(()=>[s.value?$("",!0):(o(),a("div",Re,[r.isVisible?(o(),a("div",Me,[b.value?(o(),a("div",Ee,v[3]||(v[3]=[e("div",{class:"spinner"},null,-1)]))):(o(),a("div",Le,[e("div",je,[v[5]||(v[5]=e("div",{class:"painel-title"},"Nova entrada",-1)),v[6]||(v[6]=e("div",{class:"painel-subtitle"},[e("p",null,"Adicione os itens que você recebeu ao estoque")],-1)),e("div",Ae,[v[4]||(v[4]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=g=>n.value=g),placeholder:"Buscar um produto",class:"pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[J,n.value]])]),e("div",Be,[(o(!0),a(S,null,j(P.value,g=>(o(),a("div",{key:g.id,class:"flex items-center p-4 bg-white rounded-lg cursor-pointer",onClick:U=>k(g)},[e("div",Qe,[e("img",{src:f(g.profile_photo),alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,Te)]),e("div",ze,[e("div",Oe,[R(C(g.nome)+" ",1),m(g.id)>0?(o(),a("span",Ke,C(m(g.id)),1)):$("",!0),g.estrela?(o(),a("span",Ge," ★ ")):$("",!0)])])],8,Ne))),128))])]),e("div",Je,[y(O,{text:"Finalizar",onClick:v[1]||(v[1]=g=>s.value=!0),iconPath:"/storage/images/arrow_left_alt.svg"})]),e("div",Xe,[y(we,{produtoSelecionado:x.value,onAdicionarAoCarrinho:q},null,8,["produtoSelecionado"])])]))])):$("",!0)]))]),_:1}),s.value?(o(),M(Fe,{key:0,carrinho:i.value,onConfirmar:u,onCancelar:v[2]||(v[2]=g=>s.value=!1)},null,8,["carrinho"])):$("",!0)],64))}},He=F(Ze,[["__scopeId","data-v-4deae6b8"]]),We={key:0,class:"sidebar-container"},Ye={key:0,class:"loading-overlay"},eo={key:1,class:"w-full h-[80%] bg-white rounded-[20px] p-12"},oo={class:"flex justify-center mb-6 relative group"},to=["src"],so={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ao={key:0,class:"error-message"},ro={class:"flex items-center space-x-4 mt-2"},no={class:"flex items-center space-x-2 cursor-pointer"},lo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},io={key:0,class:"w-3 h-3 rounded-full bg-green-500"},co={class:"flex items-center space-x-2 cursor-pointer"},uo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},po={key:0,class:"w-3 h-3 rounded-full bg-green-500"},vo={class:"flex items-center space-x-4 mt-2"},fo={class:"flex items-center space-x-2 cursor-pointer"},mo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},go={key:0,class:"w-3 h-3 rounded-full bg-green-500"},_o={class:"flex items-center space-x-2 cursor-pointer"},ho={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},xo={key:0,class:"w-3 h-3 rounded-full bg-green-500"},yo={class:"flex justify-start space-x-1 mt-[15%]"},bo={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar"],setup(r,{emit:t}){const n=z(),b=r,x=t,i=l(""),s=l(""),u=l(""),h=l(""),f=l(null),k=l(""),m=l(null),q=l(!1),P=l(!1),p=l("");se(()=>b.produto,c=>{c&&(i.value=c.nome||"",s.value=c.categoria||"",u.value=c.unidadeDeMedida||"",h.value=c.profile_photo||"")},{immediate:!0});const v=c=>c?new URL(c,window.location.origin).href:"/storage/images/no_imagem.svg",g=async()=>{var c,d;if(!i.value){n.error("O campo nome é obrigatório.");return}try{q.value=!0;const _=new FormData;if(_.append("id",b.produto.id),_.append("nome",i.value),_.append("categoria",s.value),_.append("unidadeDeMedida",u.value),f.value){const ee=`${Date.now()}_${f.value.name}`;_.append("profile_photo_name",ee),_.append("profile_photo",f.value)}const Y=await E.post("/api/produtos/atualizar",_,{headers:{"Content-Type":"multipart/form-data"}});Z.Inertia.replace(route("franqueadora.insumos"),{produto:Y.data.produto,preserveState:!0}),n.success("Produto atualizado com sucesso!")}catch(_){n.error("Erro ao atualizar o produto."),k.value=((d=(c=_.response)==null?void 0:c.data)==null?void 0:d.message)||"Erro inesperado."}finally{q.value=!1}},U=c=>{p.value=c,P.value=!0},I=()=>{g(),P.value=!1},K=()=>{P.value=!1},B=()=>{var c;(c=m.value)==null||c.click()},N=()=>{h.value="",n.info("Imagem removida.")},V=c=>{const d=c.target.files[0];if(d){if(d.size>5*1024*1024){n.error("A imagem não pode exceder 5 MB.");return}f.value=d;const _=new FileReader;_.onload=()=>{h.value=_.result,n.success("Imagem carregada com sucesso!")},_.readAsDataURL(d)}},w=()=>{x("cancelar")};return(c,d)=>(o(),M(X,{name:"fade"},{default:A(()=>[r.isVisible?(o(),a("div",We,[q.value?(o(),a("div",Ye,d[7]||(d[7]=[e("div",{class:"spinner"},null,-1)]))):(o(),a("div",eo,[e("form",{onSubmit:T(g,["prevent"])},[e("div",oo,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:B},[h.value?(o(),a(S,{key:0},[e("img",{src:v(h.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,to),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:d[0]||(d[0]=T(()=>{},["stop"]))},[e("button",{onClick:T(N,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(o(),a("img",so))]),e("input",{type:"file",ref_key:"fileInput",ref:m,accept:"image/*",class:"hidden",onChange:V},null,544)]),y(L,{text:"Nome"}),y(H,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=_=>i.value=_),placeholder:""},null,8,["modelValue"]),k.value?(o(),a("div",ao,C(k.value),1)):$("",!0),y(L,{class:"font-semibold text-gray-800 mt-8",text:"Prioridade"}),e("div",ro,[e("label",no,[D(e("input",{type:"radio","onUpdate:modelValue":d[2]||(d[2]=_=>s.value=_),value:"principal",class:"hidden"},null,512),[[Q,s.value]]),e("div",lo,[s.value==="principal"?(o(),a("div",io)):$("",!0)]),d[8]||(d[8]=e("span",null,"Principal",-1))]),e("label",co,[D(e("input",{type:"radio","onUpdate:modelValue":d[3]||(d[3]=_=>s.value=_),value:"secundario",class:"hidden"},null,512),[[Q,s.value]]),e("div",uo,[s.value==="secundario"?(o(),a("div",po)):$("",!0)]),d[9]||(d[9]=e("span",null,"Secundário",-1))])]),y(L,{class:"font-semibold text-gray-800 mt-8",text:"Unidade de medida"}),e("div",vo,[e("label",fo,[D(e("input",{type:"radio","onUpdate:modelValue":d[4]||(d[4]=_=>u.value=_),value:"a_granel",class:"hidden"},null,512),[[Q,u.value]]),e("div",mo,[u.value==="a_granel"?(o(),a("div",go)):$("",!0)]),d[10]||(d[10]=e("span",null,"A granel",-1))]),e("label",_o,[D(e("input",{type:"radio","onUpdate:modelValue":d[5]||(d[5]=_=>u.value=_),value:"unitario",class:"hidden"},null,512),[[Q,u.value]]),e("div",ho,[u.value==="unitario"?(o(),a("div",xo)):$("",!0)]),d[11]||(d[11]=e("span",null,"Unitário",-1))])]),e("div",yo,[y(W,{text:"Cancelar",onClick:w}),y(O,{text:"Atualizar",onClick:d[6]||(d[6]=_=>U("Atualizar esse Produto?"))})])],32),y(ne,{isVisible:P.value,motivo:p.value,onConfirm:I,onCancel:K},null,8,["isVisible","motivo"])]))])):$("",!0)]),_:1}))}},$o=F(bo,[["__scopeId","data-v-f1b871f9"]]),wo={props:{isVisible:{type:Boolean,default:!1},motivo:{type:String,required:!0}},methods:{confirm(){this.$emit("confirm")},cancel(){this.$emit("cancel")}}},Co={key:0,class:"confirm-dialog-overlay"},ko={class:"confirm-dialog"},Po={class:"confirm-dialog-content"},Vo={class:"confirm-dialog-actions"};function qo(r,t,n,b,x,i){return o(),M(X,{name:"fade"},{default:A(()=>[n.isVisible?(o(),a("div",Co,[e("div",ko,[t[4]||(t[4]=e("div",{class:"alert-icon"},[e("img",{src:"/storage/images/warning.svg",alt:"Ícone de alerta"})],-1)),e("div",Po,[e("p",null,"Você tem certeza que deseja "+C(n.motivo),1),e("div",Vo,[e("button",{onClick:t[0]||(t[0]=(...s)=>i.cancel&&i.cancel(...s)),class:"btn-cancel"},t[2]||(t[2]=[e("span",null,"CANCELAR",-1)])),e("button",{onClick:t[1]||(t[1]=(...s)=>i.confirm&&i.confirm(...s)),class:"btn-confirm"},t[3]||(t[3]=[e("span",null,"CONFIRMAR",-1)]))])])])])):$("",!0)]),_:1})}const Io=F(wo,[["render",qo],["__scopeId","data-v-f1cbb43c"]]),Uo={class:"elemento-fixo"},Do={key:0,class:"w-full h-[200px] bg-white rounded-[20px] p-12"},So={class:"relative w-full h-full"},Fo={class:"flex items-center"},Ro={class:"w-1/1 flex justify-center"},Mo=["src"],Eo={class:"w-2/3 pl-5"},Lo={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},jo={class:"w-1/1"},Ao={class:"mt-8"},Bo={class:"w-full border-collapse border border-gray-300"},No={class:"border border-gray-300 p-2 text-center"},Qo={class:"border border-gray-300 p-2 text-center"},To={class:"border border-gray-300 p-2 text-center"},zo={class:"border border-gray-300 p-2 text-center"},Oo={class:"border border-gray-300 p-2 text-center"},Ko={__name:"DetalhesProduto",props:{produto:{type:Object,required:!0}},setup(r){const t=z(),n=r,b=l(!1),x=l(""),i=l(!1),s=l(!1),u=l(!1),h=()=>{l.dadosProduto.fetchProduto()},f=p=>p?new URL(p,window.location.origin).href:"/storage/images/no_imagem.svg",k=async()=>{var p,v,g,U;try{u.value=!0;const I=await E.delete(`/api/produtos/excluir/${n.produto.id}`);console.log(I.data.message),t.success("Produto deletado com sucesso!"),Z.Inertia.visit(route("franqueadora.insumos"))}catch(I){t.error("Erro ao deletar o produto:",((v=(p=I.response)==null?void 0:p.data)==null?void 0:v.error)||I.message),console.error("Erro ao deletar o produto:",((U=(g=I.response)==null?void 0:g.data)==null?void 0:U.error)||I.message)}finally{u.value=!1}},m=()=>{k(),b.value=!1},q=()=>{b.value=!1},P=()=>{s.value=!1,i.value=!0};return(p,v)=>(o(),a("div",Uo,[s.value?$("",!0):(o(),a("div",Do,[e("div",So,[e("div",Fo,[e("div",Ro,[e("img",{src:f(r.produto.profile_photo),alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-lg"},null,8,Mo)]),e("div",Eo,[e("div",Lo,[R(C(r.produto.nome||"N/A")+" ",1),v[0]||(v[0]=e("div",{class:"text-[#6db631] text-xl font-bold font-['Figtree'] leading-[30px] tracking-tight cursor-pointer",title:"Soma do valor total de todos os produtos."},null,-1))])]),e("div",jo,[y(Io,{isVisible:b.value,motivo:x.value,onConfirm:m,onCancel:q},null,8,["isVisible","motivo"])])])])])),e("div",Ao,[e("table",Bo,[v[1]||(v[1]=e("thead",null,[e("tr",null,[e("th",{class:"border border-gray-300 p-2"},"Data"),e("th",{class:"border border-gray-300 p-2"},"Fornecedor"),e("th",{class:"border border-gray-300 p-2"},"Quantidade"),e("th",{class:"border border-gray-300 p-2"},"Preço Unitário"),e("th",{class:"border border-gray-300 p-2"},"Valor Total")])],-1)),e("tbody",null,[(o(!0),a(S,null,j(r.produto.lotes,(g,U)=>(o(),a("tr",{key:U},[e("td",No,C(g.data),1),e("td",Qo,C(g.fornecedor),1),e("td",To,C(g.quantidade),1),e("td",zo,C(g.preco_unitario),1),e("td",Oo,C(g.valor_total),1)]))),128))])])]),s.value?(o(),M($o,{key:1,ref:"dadosProduto",isVisible:s.value,produto:r.produto,onDadosProduto:h,onCancelar:P},null,8,["isVisible","produto"])):$("",!0)]))}},Go=F(Ko,[["__scopeId","data-v-14336961"]]),Jo={data(){return{produtos:[],searchQuery:""}},mounted(){this.fetchProdutos()},methods:{async fetchProdutos(){try{const r=await E.get("/api/estoque/lista");console.log("Produtos carregados:",r.data),this.produtos=Object.values(r.data)}catch(r){console.error("Erro ao carregar os produtos:",r)}},getProfilePhotoUrl(r){return r?new URL(r,window.location.origin).href:"/storage/images/no_imagem.svg"},selecionarProduto(r){this.$emit("produto-selecionado",r)},getQuantidadeTotal(r){return r.reduce((t,n)=>t+n.quantidade,0)}},computed:{filteredProdutos(){const r=this.searchQuery.toLowerCase();return this.produtos.filter(t=>t.nome.toLowerCase().includes(r))}}},Xo={class:"search-container relative flex items-center w-full mb-4"},Zo={class:"card-container"},Ho=["onClick"],Wo={class:"card-inner"},Yo={class:"icon-container"},et={class:"icon-leaf"},ot=["src"],tt={class:"text-container flex justify-between items-center p-2"},st={class:"city"},at={class:"quantidade text-gray-600 font-semibold"},rt={class:"text-gray-600 font-semibold"};function nt(r,t,n,b,x,i){return o(),a("div",null,[t[3]||(t[3]=e("div",{class:"painel-title"},"Inventário da loja",-1)),t[4]||(t[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Verifique a quantidade de cada item")],-1)),e("div",Xo,[t[1]||(t[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>x.searchQuery=s),placeholder:"Buscar um produto",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[J,x.searchQuery]])]),e("div",Zo,[(o(!0),a(S,null,j(i.filteredProdutos,s=>(o(),a("div",{key:s.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:u=>i.selecionarProduto(s)},[e("div",Wo,[e("div",Yo,[t[2]||(t[2]=e("div",{class:"icon-bg"},null,-1)),e("div",et,[e("img",{src:i.getProfilePhotoUrl(s.profile_photo),alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,ot)])]),e("div",tt,[e("div",st,C(s.nome),1),e("div",at,[e("div",rt,C(i.getQuantidadeTotal(s.lotes)),1)])])])],8,Ho))),128))])])}const lt=F(Jo,[["render",nt],["__scopeId","data-v-003fe9d6"]]),it={key:0,class:"mt-6"},dt={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},ct={key:0},ut={class:"flex flex-col gap-4"},pt={class:"absolute bottom-4 right-4 botao-container"},vt={__name:"Index",setup(r){const t=l(null),n=l(!1),b=()=>{n.value=!n.value},x=()=>{i(),n.value=!1},i=()=>{var h;(h=l("listarUnidades").value)==null||h.fetchUnidades()},s=u=>{u&&typeof u=="object"?t.value=u:console.warn("Dados inválidos recebidos no evento produto-selecionado:",u)};return(u,h)=>(o(),M(ie,null,{default:A(()=>[y(ae(re),{title:"Insumos"}),n.value?(o(),a("div",it,[y(He,{isVisible:n.value,onUnidadeCadastrada:x,onCancelar:b},null,8,["isVisible"])])):$("",!0),e("div",dt,[n.value?$("",!0):(o(),a("div",ct,[y(lt,{ref:"listarUnidades",onUnidadeCadastrada:i,onProdutoSelecionado:s},null,512)])),e("div",ut,[n.value?$("",!0):(o(),a(S,{key:0},[t.value?(o(),M(Go,{key:0,produto:t.value},null,8,["produto"])):$("",!0),e("div",pt,[y(O,{text:"Nova entrada",iconPath:"/storage/images/arrow_left_alt.svg",onClick:b})])],64))])])]),_:1}))}},bt=F(vt,[["__scopeId","data-v-d55cd220"]]);export{bt as default};
