import{d as o,o as u,e as x,a as t,t as n,y as z,c as N,w as Z,b as Y,u as O,Z as W,g as G,F as J,f,h as K}from"./app-B6DhRNyQ.js";import{d as Q}from"./index-CfVttbDs.js";import{C as q,r as U}from"./chart-C6b6o4TJ.js";import{L as X}from"./LayoutFranqueado-BZdyyyqj.js";import{r as tt,d as L}from"./dayjs.min-JFLY2IE6.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-dQoleSgS.js";var _={exports:{}},st=_.exports,D;function at(){return D||(D=1,function(v,m){(function(d,c){v.exports=c(tt())})(st,function(d){function c(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var g=c(d),p={name:"pt-br",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(r){return r+"º"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return g.default.locale(p,null,!0),p})}(_)),_.exports}at();const ot={class:"relative"},nt={class:"flex items-center justify-center rounded-md"},lt={class:"font-semibold text-lg"},rt={__name:"CalendarSimples",setup(v){L.locale("pt-br");const m=o(L());return(d,c)=>(u(),x("div",ot,[t("div",nt,[t("span",lt,n(m.value.format("MMMM YYYY")),1)])]))}},it={class:"flex justify-between items-center mb-4"},dt={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},ct={class:"flex items-center space-x-2"},ut={class:"text-gray-900 text-[17px] font-semibold"},mt={class:"mt-5"},pt={class:"grid grid-cols-3 grid-rows-1 gap-4"},ft={class:"row-span-3"},xt={class:"bg-white rounded-lg p-5 h-full w-full"},gt={class:"compromissos-container flex flex-col gap-2 overflow-hidden"},_t={class:"flex flex-col"},vt={class:"text-[14px] font-medium text-gray-900"},bt={class:"text-sm text-gray-600"},ht=["src","alt"],yt={class:"bg-white rounded-lg p-7"},wt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Mt={class:"bg-white rounded-lg p-7"},kt={class:"flex items-center mb-4"},Ft={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",style:{fill:"rgba(0, 0, 0, 1)",transform:"",msfilter:""}},Ct={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},jt={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},$t={class:"bg-white rounded-lg p-7 w-[350px] shadow-lg"},Yt={class:"text-sm text-gray-600 space-y-2"},qt={class:"text-lg font-bold text-gray-900 mt-3"},Lt={class:"bg-white rounded-lg p-7"},Dt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},St={class:"bg-white rounded-lg p-4"},Vt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Et={class:"bg-white rounded-lg p-4 col-span-3"},Rt={class:"w-full h-[220px]"},Bt={__name:"Index",setup(v){q.register(...U);const m=o(null),d=o(null),c=o([]),g=o([]),p=o([]),r=o("0,00"),y=o("0,00"),w=o("0,00"),M=o("0,00"),k=o("0,00"),b=o("0,00"),F=o("0,00"),C=o(0),j=o("0,00"),h=o(!1),S=()=>{Q.Inertia.replace(route("franqueado.contasApagar"))},V=()=>{h.value=!0},E=()=>{h.value=!1},R=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-cmv";const i=[];s&&i.push(`start_date=${s}`),e&&i.push(`end_date=${e}`),i.length>0&&(a+=`?${i.join("&")}`);const l=(await axios.get(a)).data;l.saldo_estoque_inicial?(r.value=l.start_date||"não informado",y.value=l.end_date||"não informado",w.value=l.saldo_estoque_inicial||"0,00",M.value=l.entradas_durante_periodo||"0,00",k.value=l.saldo_estoque_final||"0,00",b.value=l.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(a){console.error("Erro ao buscar dados analíticos:",a)}},B=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-fluxo-caixa";const i=[];s&&i.push(`start_date=${s}`),e&&i.push(`end_date=${e}`),i.length>0&&(a+=`?${i.join("&")}`);const l=(await axios.get(a)).data;F.value=l.total_caixas||"0,00",C.value=l.quantidade_pedidos||0,j.value=l.ticket_medio||"0,00"}catch(a){console.error("Erro ao buscar dados analíticos:",a)}};z(()=>{R(),B(),I(),H(),$()});const I=async()=>{try{const s=await axios.get("/api/cursto/listar-contas-a-pagar");p.value=s.data.data}catch(s){console.error("Erro ao carregar os dados:",s)}},H=async()=>{try{const e=(await axios.get("/api/painel-analitycos/faturamento-por-semana")).data;e.faturamento&&(g.value=e.faturamento.map(a=>a.dia),c.value=e.faturamento.map(a=>a.total),$())}catch(s){console.error("Erro ao buscar dados:",s)}},P=s=>{const e=s.split("-");return`${e[2]}/${e[1]}/${e[0]}`},T=s=>s==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg",$=()=>{d.value&&d.value.destroy(),d.value=new q(m.value.getContext("2d"),{type:"bar",data:{labels:g.value,datasets:[{label:"Faturamento Diário",data:c.value,backgroundColor:"rgba(75, 192, 75, 0.6)",borderColor:"rgba(75, 192, 75, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return s>=1e3?`${s/1e3}mil`:s}}}}}})};return(s,e)=>(u(),N(X,null,{default:Z(()=>[Y(O(W),{title:"Painel"}),t("div",it,[e[1]||(e[1]=t("div",null,[t("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Visão geral da loja "),t("div",{class:"painel-subtitle"},[t("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe o desempenho geral ")])],-1)),t("div",dt,[t("div",ct,[e[0]||(e[0]=t("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),t("span",ut,[Y(rt)])])])]),t("div",mt,[t("div",pt,[t("div",ft,[t("div",xt,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-2"}," Compromissos ",-1)),t("div",gt,[(u(!0),x(J,null,G(p.value,a=>(u(),x("div",{key:a.id,onClick:S,class:"flex justify-between items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},[t("div",_t,[t("p",vt,n(a.nome),1),t("p",bt,n(a.valor_formatado)+" - Vencimento "+n(P(a.vencimento)),1)]),t("div",null,[t("img",{src:T(a.status),alt:"Status: "+a.status,class:"w-6 h-6 object-contain transition-transform transform hover:scale-105"},null,8,ht)])]))),128))])])]),t("div",yt,[e[3]||(e[3]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Faturamento",-1)),t("div",wt," R$ "+n(F.value),1),e[4]||(e[4]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",Mt,[t("div",kt,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-700"},"CMV",-1)),t("button",{onClick:V,class:"ml-2"},[(u(),x("svg",Ft,e[5]||(e[5]=[t("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1)])))])]),t("div",Ct," R$ "+n(b.value),1),e[14]||(e[14]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1)),h.value?(u(),x("div",jt,[t("div",$t,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"}," Detalhes do CMV ",-1)),t("div",Yt,[t("p",null,[e[7]||(e[7]=t("span",{class:"font-semibold text-gray-800"},"Período:",-1)),f(" "+n(r.value)+" - "+n(y.value),1)]),t("p",null,[e[8]||(e[8]=t("span",{class:"font-semibold text-gray-800"}," Saldo Inicial: ",-1)),f(" R$ "+n(w.value),1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"font-semibold text-gray-800"},"Entradas:",-1)),f(" R$ "+n(M.value),1)]),t("p",null,[e[10]||(e[10]=t("span",{class:"font-semibold text-gray-800"},"Saldo Final:",-1)),f(" R$ "+n(k.value),1)]),t("p",qt,[e[11]||(e[11]=t("span",{class:"font-semibold"},"CMV:",-1)),f(" R$ "+n(b.value),1)]),e[12]||(e[12]=t("p",null," Parametros: Saldo Inicial + Entradas nesse periodo - Saldo Final = Total CMV ",-1))]),t("button",{onClick:E,class:"mt-4 text-red-800 rounded-md transition"}," Fechar ")])])):K("",!0)]),t("div",Lt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Ticket médio",-1)),t("div",Dt," R$ "+n(j.value),1),e[16]||(e[16]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",St,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Pedidos",-1)),t("div",Vt,n(C.value),1),e[18]||(e[18]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",Et,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-700"}," Faturamento diário ",-1)),t("div",Rt,[t("canvas",{ref_key:"barChart",ref:m},null,512)])])])])]),_:1}))}},Zt=et(Bt,[["__scopeId","data-v-df6af06e"]]);export{Zt as default};
