import{d as w,i as y,j as D,a6 as H,e as n,o as t,a as e,c as N,f as _,a3 as T,F as q,h as x,n as S,t as g,w as $,u as A,a2 as P,k as B,s as z,a5 as F,q as j,b as I,a7 as G,g as O,Z as U,r as R}from"./app-uJsVw_p1.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"navbar"},J={class:"navbar-content"},Q={class:"navbar-left"},W={class:"navbar-logo"},K=["href"],X={class:"navbar-right"},Y={class:"notification-container"},ee={key:0,class:"notification-badge"},ae={key:0,class:"notification-tray"},se={class:"notification-header"},te={class:"notification-list"},oe={key:0,class:"notification-loading"},ne={key:1,class:"no-notifications"},ie=["onClick"],le={class:"notification-icon-type"},re={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ce={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue={key:2,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},de={class:"notification-content"},ve={class:"notification-title"},me={class:"notification-message"},fe={class:"notification-time"},ge={key:0,class:"user-info"},he=["src"],ke={class:"user-details"},be={class:"user-name"},pe={class:"user-location"},_e={key:1,class:"user-info loading"},we={__name:"Navbar",setup(i){const o=w(null),u=y(()=>{var s;return(s=o.value)==null?void 0:s.unidade}),c=w([]),k=w(!1),r=w(!1),b=y(()=>c.value.filter(s=>s.lida===0).length),d=y(()=>{var s,a;return((s=o.value)==null?void 0:s.profile_photo_url)||`https://ui-avatars.com/api/?name=${v((a=o.value)==null?void 0:a.name)}&color=7F9CF5&background=EBF4FF`}),v=s=>s?s.split(" ").map(l=>l.charAt(0).toUpperCase()).join(""):"*",C=async()=>{try{const s=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error("Erro ao carregar perfil do usuário");const a=await s.json();o.value=a.data}catch(s){console.error("Erro ao buscar perfil:",s),o.value=null}},f=async()=>{k.value=!0;try{const s=await fetch("/api/notificacoes",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error("Erro ao carregar notificações");const a=await s.json();c.value=a.data}catch(s){console.error("Erro ao buscar notificações:",s),c.value=[]}finally{k.value=!1}},V=async s=>{try{if((await B.post(`/api/notificacoes/${s}/ler`)).status===200){const l=c.value.findIndex(M=>M.id===s);l!==-1&&(c.value[l].lida=1,c.value[l].lida_em=new Date().toISOString())}}catch(a){console.error("Erro ao marcar notificação como lida:",a)}},E=async()=>{try{(await B.post("/api/notificacoes/ler-todas")).status===200&&c.value.forEach(a=>{a.lida=1,a.lida_em=new Date().toISOString()})}catch(s){console.error("Erro ao marcar todas notificações como lidas:",s)}},m=s=>{s.stopPropagation(),r.value=!r.value,r.value&&f()},p=s=>{const a=document.querySelector(".notification-container");a&&!a.contains(s.target)&&(r.value=!1)};let h;return D(()=>{C(),f(),document.addEventListener("click",p),h=setInterval(()=>{r.value||f()},3e5)}),H(()=>{document.removeEventListener("click",p),clearInterval(h)}),(s,a)=>(t(),n("div",Z,[a[9]||(a[9]=e("div",{class:"navbar-background"},null,-1)),e("div",J,[e("div",Q,[e("div",W,[a[1]||(a[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:s.route("franqueado.painel")},a[0]||(a[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,K)])])]),e("div",X,[e("div",Y,[e("div",{class:"notification-icon",onClick:m},[a[2]||(a[2]=T('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1a7823b4><mask id="mask0_4631_13059" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24" data-v-1a7823b4><rect width="24" height="24" fill="#D9D9D9" data-v-1a7823b4></rect></mask><g mask="url(#mask0_4631_13059)" data-v-1a7823b4><path d="M2.40039 20.4V18H4.80039V9.6C4.80039 7.94 5.30039 6.465 6.30039 5.175C7.30039 3.885 8.60039 3.04 10.2004 2.64V1.8C10.2004 1.3 10.3754 0.875 10.7254 0.525C11.0754 0.175 11.5004 0 12.0004 0C12.5004 0 12.9254 0.175 13.2754 0.525C13.6254 0.875 13.8004 1.3 13.8004 1.8V2.64C15.4004 3.04 16.7004 3.885 17.7004 5.175C18.7004 6.465 19.2004 7.94 19.2004 9.6V18H21.6004V20.4H2.40039ZM12.0004 24C11.3404 24 10.7754 23.765 10.3054 23.295C9.83539 22.825 9.60039 22.26 9.60039 21.6H14.4004C14.4004 22.26 14.1654 22.825 13.6954 23.295C13.2254 23.765 12.6604 24 12.0004 24ZM7.20039 18H16.8004V9.6C16.8004 8.28 16.3304 7.15 15.3904 6.21C14.4504 5.27 13.3204 4.8 12.0004 4.8C10.6804 4.8 9.55039 5.27 8.61039 6.21C7.67039 7.15 7.20039 8.28 7.20039 9.6V18Z" fill="#6DB631" data-v-1a7823b4></path></g></svg>',1)),b.value>0?(t(),n("div",ee)):_("",!0)]),r.value?(t(),n("div",ae,[e("div",se,[a[3]||(a[3]=e("h3",null,"Notificações",-1)),c.value.length>0?(t(),n("span",{key:0,onClick:E,class:"mark-all-read"},"Marcar todas como lidas")):_("",!0)]),e("div",te,[k.value?(t(),n("div",oe,a[4]||(a[4]=[e("div",{class:"notification-skeleton"},null,-1),e("div",{class:"notification-skeleton"},null,-1)]))):c.value.length===0?(t(),n("div",ne," Nenhuma notificação no momento ")):(t(!0),n(q,{key:2},x(c.value,l=>(t(),n("div",{key:l.id,class:S(["notification-item",{unread:l.lida===0}]),onClick:M=>V(l.id)},[e("div",le,[l.tipo==="info"?(t(),n("svg",re,a[5]||(a[5]=[e("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z",fill:"#6DB631"},null,-1)]))):l.tipo==="alerta"?(t(),n("svg",ce,a[6]||(a[6]=[e("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-7v2h2v-2h-2zm0-8v6h2V7h-2z",fill:"#FF9800"},null,-1)]))):(t(),n("svg",ue,a[7]||(a[7]=[e("path",{d:"M4 19h16v2H4v-2zm5-4h11v2H9v-2zm-5-4h16v2H4v-2zm5-4h11v2H9V7zM4 3h16v2H4V3z",fill:"#6DB631"},null,-1)])))]),e("div",de,[e("div",ve,g(l.titulo),1),e("div",me,g(l.mensagem),1),e("div",fe,g(l.tempo),1)])],10,ie))),128))])])):_("",!0)]),o.value?(t(),N(A(P),{key:0,href:s.route("franqueadora.perfil"),class:S(["user-info",{loading:!o.value}])},{default:$(()=>{var l;return[o.value?(t(),n("div",ge,[e("img",{src:d.value,alt:"Avatar",class:"avatar"},null,8,he),e("div",ke,[e("div",be,g(o.value.name),1),e("div",pe,g(((l=u.value)==null?void 0:l.cidade)||"Taiksu Franchising"),1)])])):(t(),n("div",_e,a[8]||(a[8]=[e("div",{class:"avatar-skeleton"},null,-1),e("div",{class:"user-details-skeleton"},[e("div",{class:"name-skeleton"}),e("div",{class:"location-skeleton"})],-1)])))]}),_:1},8,["href","class"])):_("",!0)])])]))}},ye=L(we,[["__scopeId","data-v-1a7823b4"]]),Se={class:"icon"},Ce=["src"],Ie={class:"label"},qe={type:"submit",class:"w-full h-full flex items-center"},xe={class:"icon"},Ae=["src"],Le={class:"label"},Ve={key:2,class:"submenu"},$e={class:"label"},Pe={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]}},setup(i){const o=i,u=w(!1),c=y(()=>u.value),k=m=>{o.submenuItems&&o.submenuItems.length>0&&(m.preventDefault(),r())},r=()=>{u.value=!u.value,d()},b=()=>{const m=localStorage.getItem(`submenu-${o.link}`);m!==null&&(u.value=JSON.parse(m))},d=()=>{localStorage.setItem(`submenu-${o.link}`,JSON.stringify(u.value))},v=y(()=>f.value||o.isActive?"submenu-active":""),C=m=>{const p=window.location.pathname,h=new URL(route(m),window.location.origin).pathname;return p===h},f=y(()=>o.submenuItems.some(m=>C(m.link))),V=()=>{o.isLogout&&G.post(route("logout.sair"))};return b(),z(f,()=>{f.value||F(()=>{u.value=!1,d()})}),z(u,()=>{F(()=>{d()})}),(m,p)=>(t(),n("div",null,[!i.isLogout&&i.link?(t(),N(A(P),{key:0,class:S(["menu-item",[v.value,{active:i.isActive||f.value}]]),href:i.link||"#",onClick:k},{default:$(()=>[e("div",Se,[e("img",{src:i.icon,alt:"icon"},null,8,Ce)]),e("div",Ie,g(i.label),1),i.submenuItems&&i.submenuItems.length>0?(t(),n("div",{key:0,class:S(["right-icon",{"rotate-icon":c.value}])},p[0]||(p[0]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):_("",!0)]),_:1},8,["class","href"])):(t(),n("form",{key:1,onSubmit:j(V,["prevent"]),class:"menu-item"},[e("button",qe,[e("div",xe,[e("img",{src:i.icon,alt:"icon"},null,8,Ae)]),e("div",Le,g(i.label),1)])],32)),i.submenuItems&&i.submenuItems.length>0&&(u.value||f.value)?(t(),n("div",Ve,[(t(!0),n(q,null,x(i.submenuItems,(h,s)=>(t(),n("div",{key:s},[I(A(P),{class:S(["submenu-item",{active:C(h.link)}]),href:m.route(h.link)},{default:$(()=>[e("div",$e,g(h.label),1)]),_:2},1032,["href","class"])]))),128))])):_("",!0)]))}},Ne=L(Pe,[["__scopeId","data-v-c2d58d42"]]),Ee={class:"category-title flex items-center gap-2"},Me={key:0,class:"bg-green-600 text-white text-[9px] px-1.5 py-0.5 rounded font-bold uppercase tracking-tighter ml-1"},Be={__name:"Slidebar",setup(i){const o=w(null);D(()=>{const r=localStorage.getItem("sidebarScrollPosition");r&&o.value&&(o.value.scrollTop=r)});const u=()=>{o.value&&localStorage.setItem("sidebarScrollPosition",o.value.scrollTop)},c=r=>{const b=window.location.pathname,d=new URL(r,window.location.origin).pathname;return b===d||b.startsWith(d)},k=[{name:"",items:[{label:"Visão Geral",icon:"/storage/images/insert_chart.svg",link:"franqueadora.painel",isLogout:!1}]},{name:"Analíticos",items:[{label:"Métricas",icon:"/storage/images/insert_chart.svg",link:"franqueadora.analytics.dre",isLogout:!1,submenuItems:[{label:"DRE Gerencial",link:"franqueadora.analytics.dre"},{label:"Caixas",link:"franqueadora.analytics.faturamento"}],isActive:!1}]},{name:"Gestão da rede",items:[{label:"Franqueados",icon:"/storage/images/person.svg",link:"franqueadora.franqueados",isLogout:!1},{label:"Produtividade",icon:"/storage/images/skillet.svg",link:"franqueadora.produtividade.geral",isLogout:!1,submenuItems:[{label:"Visão Geral",link:"franqueadora.produtividade.geral"},{label:"Gestão de atividades",link:"franqueadora.GestaoAtividades"},{label:"Setores operacionais",link:"franqueadora.SetorOperacionais"},{label:"Pontuação por critério",link:"franqueadora.PontuaCriterio"}],isActive:!1},{label:"Unidades",icon:"/storage/images/storefront.svg",link:"franqueadora.unidades",isLogout:!1}]},{name:"Parâmetros da franquia",items:[{label:"Fornecedores",icon:"/storage/images/handshake_branca.svg",link:"franqueadora.fornecedores",isLogout:!1},{label:"Insumos",icon:"/storage/images/insumos_nova.svg",link:"franqueadora.insumos",isLogout:!1},{label:"Inspetor",icon:"/storage/images/inspecionador.svg",link:"franqueadora.inspetor",isLogout:!1},{label:"Caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueadora.metodosPagamentos",isLogout:!1,submenuItems:[{label:"Métodos de pagamento",link:"franqueadora.metodosPagamentos"},{label:"Canais de Vendas",link:"franqueadora.canaisVendas"}],isActive:!1},{label:"Menu",icon:"/storage/images/bx-menuu.svg",link:"franqueadora.menu",isLogout:!1},{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}];return(r,b)=>(t(),n("div",{class:"sidebar",ref_key:"sidebar",ref:o,onScroll:u},[(t(),n(q,null,x(k,d=>e("div",{key:d.name,class:"menu-category"},[e("div",Ee,[O(g(d.name)+" ",1),d.name==="Analíticos"?(t(),n("span",Me," NOVA! ")):_("",!0)]),(t(!0),n(q,null,x(d.items,v=>(t(),N(Ne,{key:v.link||"no-link",label:v.label,icon:v.icon,link:v.link?r.route(v.link):null,submenuItems:v.submenuItems,isActive:v.link?c(r.route(v.link)):!1,isLogout:v.isLogout},null,8,["label","icon","link","submenuItems","isActive","isLogout"]))),128))])),64))],544))}},ze=L(Be,[["__scopeId","data-v-82c7a6e1"]]),Fe={class:"content"},De={__name:"LayoutFranqueadora",props:{title:String},setup(i){return(o,u)=>(t(),n("div",null,[I(A(U),{title:i.title},null,8,["title"]),I(ye),I(ze),e("main",Fe,[R(o.$slots,"default",{},void 0,!0)])]))}},je=L(De,[["__scopeId","data-v-bd0a65dc"]]);export{je as A};
