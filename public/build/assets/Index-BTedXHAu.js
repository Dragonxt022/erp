import{d as n,i as E,o as u,e as c,a as e,t as r,h as D,F as O,g as S,n as U,y as B,c as R,w as A,b as j,u as N,Z as Q,f as b,j as F,v as C,k as T}from"./app-BkFjde_Z.js";import{L as z}from"./LayoutFranqueado-Cb80ozG9.js";import{d as k}from"./dayjs.min-D8K_YBgZ.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-D1KyZnKq.js";const K={class:"relative"},P={key:0},W={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},Z={class:"items-center mb-3"},G={class:"font-semibold items-center"},J={class:"ml-[90px]"},X={class:"grid grid-cols-7 gap-1 text-center text-sm"},ee=["onClick"],te={__name:"CalendarSimples2",setup(I,{emit:M}){const Y=M,x=n(!1),d=n(k()),i=n(k()),h=n(k()),f=n(!0),$=["D","S","T","Q","Q","S","S"],L=E(()=>{const l=[],g=d.value.startOf("month"),a=i.value.endOf("month");for(let t=0;t<g.day();t++)l.push({day:"",date:null});for(let t=1;t<=a.date();t++){const s=g.date(t);l.push({day:t,date:s})}return l}),p=l=>l&&(l.isSame(d.value)||l.isSame(i.value)),_=l=>!l||!d.value||!i.value?!1:l.isAfter(d.value,"day")&&l.isBefore(i.value,"day"),w=l=>{l&&(f.value?(d.value=l.startOf("day"),f.value=!1):(i.value=l.endOf("day"),f.value=!0))},o=()=>{q(),x.value=!1},V=()=>{x.value=!x.value},m=()=>{const l=d.value.format("DD-MM-YYYY"),g=i.value.format("DD-MM-YYYY");console.log("Data inicial:",l),console.log("Data final:",g),Y("update-filters",{startDate:l,endDate:g}),x.value=!1},q=()=>{d.value=k(),i.value=k()};return(l,g)=>(u(),c("div",K,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:V},[e("span",null,[d.value&&i.value?(u(),c("span",P,r(d.value.format("DD/MM/YYYY"))+" - "+r(i.value.format("DD/MM/YYYY")),1)):D("",!0)])]),x.value?(u(),c("div",W,[e("div",Z,[e("span",G,[e("span",null,r(h.value.format("MMM")),1),e("span",J,r(h.value.format("YYYY")),1)])]),e("div",X,[(u(),c(O,null,S($,a=>e("div",{class:"font-semibold text-gray-600",key:a},r(a),1)),64)),(u(!0),c(O,null,S(L.value,(a,t)=>(u(),c("div",{key:t,onClick:s=>w(a.date),class:U(["p-2 rounded-full cursor-pointer",p(a.date)?"bg-[#6db631] text-white":_(a.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},r(a.day),11,ee))),128))]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:q}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:o}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:m}," OK ")])])])):D("",!0)]))}},se={class:"flex justify-between items-center mb-4"},ae={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},oe={class:"flex items-center space-x-2"},le={class:"text-gray-900 text-[17px] font-semibold"},ne={class:"mt-5"},re={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},ie={class:"bg-white rounded-lg p-7"},de={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ue={class:"bg-white rounded-lg p-7"},ce={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},pe={class:"bg-white rounded-lg p-7"},ge={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},xe={class:"mt-8"},ve={class:"bg-white rounded-lg shadow"},me={class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},fe={key:0,class:"grid grid-cols-5 gap-4 py-2 px-6 bg-gray-50"},_e={class:"space-y-1"},ye={class:"flex items-center text-gray-900 font-semibold"},be=["src"],he={class:"text-gray-900 font-semibold"},we={class:"text-gray-900 font-medium"},Fe={class:"text-gray-600 font-semibold"},Ce={class:"text-gray-500 font-semibold"},ke={key:1,class:"text-center mt-4"},qe={__name:"Index",setup(I){const M=n("0,00"),Y=n("0,00"),x=n("0,00"),d=n("0,00"),i=n("0,00"),h=n("0,00"),f=n([]),$=n(!1),L=n(null),p=n(null),_=n(!0),w=n(!1),o=n({operacao:"",quantidade:"",quando:"",item:"",responsavel:""}),V=E(()=>f.value.filter(a=>(o.value.operacao===""||a.operacao.toLowerCase().includes(o.value.operacao.toLowerCase()))&&(o.value.quantidade===""||String(a.quantidade).includes(o.value.quantidade))&&(o.value.item===""||a.item.toLowerCase().includes(o.value.item.toLowerCase()))&&(o.value.responsavel===""||a.responsavel.toLowerCase().includes(o.value.responsavel.toLowerCase()))&&(o.value.quando===""||a.data.toLowerCase().includes(o.value.quando.toLowerCase()))).sort((a,t)=>p.value?_.value?a[p.value]>t[p.value]?1:-1:a[p.value]<t[p.value]?1:-1:0)),m=a=>{p.value===a?_.value=!_.value:(p.value=a,_.value=!0)},q=()=>{w.value=!w.value},l=a=>{console.log("Filtros atualizados:",a),g(a.startDate,a.endDate)},g=async(a=null,t=null)=>{try{let s="/api/estoque/incial";const y=[];a&&y.push(`start_date=${a}`),t&&y.push(`end_date=${t}`),y.length>0&&(s+=`?${y.join("&")}`);const v=(await T.get(s)).data;v.saldo_estoque_inicial?(f.value=v.historicoMovimentacoes||[],M.value=v.start_date||"não informado",Y.value=v.end_date||"não informado",x.value=v.saldo_estoque_inicial||"0,00",d.value=v.entradas_durante_periodo||"0,00",i.value=v.saldo_estoque_final||"0,00",h.value=v.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(s){console.error("Erro ao buscar dados analíticos:",s)}};return B(()=>{g()}),(a,t)=>(u(),R(z,null,{default:A(()=>[j(N(Q),{title:"Controle de estoque"}),e("div",se,[t[11]||(t[11]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",ae,[e("div",oe,[t[10]||(t[10]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",le,[j(te,{onUpdateFilters:l})])])])]),e("div",ne,[e("div",re,[e("div",ie,[t[12]||(t[12]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),e("div",de," R$ "+r(x.value),1)]),e("div",ue,[t[13]||(t[13]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),e("div",ce," R$ "+r(i.value),1)]),e("div",pe,[t[14]||(t[14]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," CMV ",-1)),e("div",ge,r(h.value),1)])])]),e("div",xe,[e("div",{class:"flex items-center justify-between mb-4"},[t[16]||(t[16]=e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),e("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:q},t[15]||(t[15]=[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),e("div",ve,[e("div",me,[e("span",{onClick:t[0]||(t[0]=s=>m("operacao")),class:"px-5 cursor-pointer flex items-center gap-2"},t[17]||(t[17]=[b(" OPERAÇÃO "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[1]||(t[1]=s=>m("quantidade")),class:"flex items-center gap-2 cursor-pointer"},t[18]||(t[18]=[b(" QTD. "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[2]||(t[2]=s=>m("item")),class:"cursor-pointer flex items-center gap-2"},t[19]||(t[19]=[b(" Item "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),e("span",{onClick:t[3]||(t[3]=s=>m("quanto")),class:"cursor-pointer flex items-center gap-2"},t[20]||(t[20]=[b(" Quando "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[4]||(t[4]=s=>m("responsavel")),class:"cursor-pointer flex items-center gap-2"},t[21]||(t[21]=[b(" Responsável "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),w.value?(u(),c("div",fe,[F(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.operacao=s),type:"text",placeholder:"Filtrar por operação",class:"p-2 border border-gray-300 rounded"},null,512),[[C,o.value.operacao]]),F(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.quantidade=s),type:"text",placeholder:"Filtrar por qtd.",class:"p-2 border border-gray-300 rounded"},null,512),[[C,o.value.quantidade]]),F(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.item=s),type:"text",placeholder:"Filtrar por item",class:"p-2 border border-gray-300 rounded"},null,512),[[C,o.value.item]]),F(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.quando=s),type:"text",placeholder:"Filtrar por quando",class:"p-2 border border-gray-300 rounded"},null,512),[[C,o.value.quando]]),F(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.responsavel=s),type:"text",placeholder:"Filtrar por responsável",class:"p-2 border border-gray-300 rounded"},null,512),[[C,o.value.responsavel]])])):D("",!0),e("div",{ref_key:"scrollContainer",ref:L,class:"overflow-y-auto max-h-96 scroll-hidden"},[e("ul",_e,[(u(!0),c(O,null,S(V.value,(s,y)=>(u(),c("li",{key:y,class:"hover:bg-gray-200 grid grid-cols-5 gap-1 px-6 py-2 text-[16px]"},[e("span",ye,[e("img",{src:s.operacao==="Entrada"?"/storage/images/arrow_back_verde.svg":"/storage/images/arrow_back_red.svg",alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,be),b(" "+r(s.operacao==="Entrada"?"Entrada":"Retirada"),1)]),e("span",he,r(s.quantidade)+" "+r(s.unidade==="unidade"?"uni":"kg"),1),e("span",we,r(s.item),1),e("span",Fe,r(s.data),1),e("span",Ce,r(s.responsavel),1)]))),128))])],512),$.value?(u(),c("div",ke,"Carregando...")):D("",!0)])])]),_:1}))}},Oe=H(qe,[["__scopeId","data-v-204eb1f4"]]);export{Oe as default};
