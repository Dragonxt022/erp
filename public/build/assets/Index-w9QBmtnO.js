import{l as T,d as r,i as M,k as V,e as u,o as i,a as e,b as c,m as D,f as C,x as N,F as A,h as O,t as p,a0 as Z,v as F,n as K,g as G,q as H,j as J,c as P,w as W,u as X,Z as Y}from"./app-CgjNyDmm.js";import{L as ee}from"./LayoutFranqueado-l8P_a1m3.js";import{_ as $}from"./LabelModel-BvZtGS-_.js";import{B as Q}from"./ButtonPrimaryMedio-Fs5RnIFg.js";import{B as ae}from"./ButtonCancelar-BPKHW5mg.js";import{C as j}from"./ConfirmDialog-Rl80TgH3.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as te}from"./ButtonClaroMedio-DqE4PUL3.js";const oe={class:"mt-5"},se={class:"grid grid-cols-2 gap-8"},ne={class:"bg-white rounded-lg p-12"},re={class:"flex gap-4"},le={class:"flex-1 mb-8"},ie=["value"],de={key:0,class:"text-red-500 text-sm"},ce={class:"flex-1"},ue={key:0,class:"text-red-500 text-sm"},ve={key:0,class:"text-red-500 text-sm"},ge={class:"col-span-1 row-span-2 mt-12"},pe={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},me={key:0,class:"text-red-500 text-sm"},fe={key:1,class:"text-red-500 text-sm"},xe={class:"bg-white rounded-lg p-12"},be={class:"mt-2"},_e={class:"mt-2"},ye={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},he={key:0,class:"text-red-500 text-sm"},Ce={class:"form-buttons"},we={__name:"CadastroContas",emits:["voltar"],setup(k,{emit:w}){const d=T(),o=r(null),g=r(""),b=r(""),m=r(""),y=r(1),_=r(null),x=r(""),h=r(!1),E=r(""),q=r([]),t=r({}),v=w;M(async()=>{try{const s=await V.get("/api/categorias/seleto-contas");q.value=s.data}catch(s){console.error("Erro ao carregar categorias:",s)}});const f=async()=>{t.value={},_.value||(t.value.categoria="A categoria é obrigatória"),o.value||(t.value.valor="O valor é obrigatório"),b.value||(t.value.emitidaEm="A data emitida é obrigatória"),m.value||(t.value.vencimento="A data de vencimento é obrigatória"),g.value.length>200&&(t.value.descricao="A descrição deve ter no máximo 200 caracteres");const s=parseFloat(o.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(s)?t.value.valor="O valor informado não é válido":o.value=s,Object.keys(t.value).length===0)try{const a=new FormData;if(a.append("categoria_id",_.value),a.append("valor",o.value),a.append("emitida_em",b.value),a.append("vencimento",m.value),a.append("dias_lembrete",y.value),a.append("descricao",g.value),x.value){const z=document.querySelector('input[type="file"]');z.files.length>0&&a.append("arquivo",z.files[0])}const l=await V.post("/api/cursto/contas-a-pagar",a);d.success("Conta cadastrada com sucesso",l.data),console.log("Conta cadastrada com sucesso",l.data),n()}catch(a){d.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",a)}},S=s=>{E.value=s,h.value=!0},L=()=>{f(),h.value=!1},U=()=>{h.value=!1},B=s=>{d.info("Arquivo selecionado com sucesso");const a=s.target.files[0];a&&(x.value=a.name)},I=s=>{let a=s.replace(/\D/g,"");a||(a="0");const l=a.slice(0,-2)||"0",z=a.slice(-2);return`R$ ${Number(l).toLocaleString("pt-BR")},${z}`},n=()=>{_.value=null,o.value=null,b.value="",m.value="",y.value=1,g.value="",x.value="",v("voltar")};return(s,a)=>(i(),u(A,null,[a[13]||(a[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),a[14]||(a[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",oe,[e("div",se,[e("div",ne,[e("div",re,[e("div",le,[a[9]||(a[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),c($,{text:"Nome da Conta"}),D(e("select",{id:"categoria","onUpdate:modelValue":a[0]||(a[0]=l=>_.value=l),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[a[8]||(a[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(i(!0),u(A,null,O(q.value,l=>(i(),u("option",{key:l.id,value:l.id},p(l.nome),9,ie))),128))],512),[[N,_.value]]),t.value.categoria?(i(),u("span",de,p(t.value.categoria),1)):C("",!0)]),e("div",ce,[c($,{text:"Lembrar - me"}),D(e("select",{id:"dias_lembrete","onUpdate:modelValue":a[1]||(a[1]=l=>y.value=l),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},a[10]||(a[10]=[Z('<option value="1" data-v-a038958e>1 dia antes</option><option value="3" data-v-a038958e>3 dias antes</option><option value="5" data-v-a038958e>5 dias antes</option><option value="15" data-v-a038958e>15 dias antes</option><option value="30" data-v-a038958e>30 dias antes</option>',5)]),512),[[N,y.value]]),t.value.diasLembrete?(i(),u("span",ue,p(t.value.diasLembrete),1)):C("",!0)])]),c($,{text:"Valor"}),D(e("input",{id:"valor","onUpdate:modelValue":a[2]||(a[2]=l=>o.value=l),onInput:a[3]||(a[3]=l=>o.value=I(o.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[F,o.value]]),t.value.valor?(i(),u("span",ve,p(t.value.valor),1)):C("",!0),e("div",ge,[e("div",pe,[c($,{text:"Data emitida"}),D(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":a[4]||(a[4]=l=>b.value=l),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[F,b.value]]),t.value.emitidaEm?(i(),u("span",me,p(t.value.emitidaEm),1)):C("",!0),a[11]||(a[11]=e("div",{class:"mt-12"},null,-1)),c($,{text:"Data de vencimento"}),D(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":a[5]||(a[5]=l=>m.value=l),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[F,m.value]]),t.value.vencimento?(i(),u("span",fe,p(t.value.vencimento),1)):C("",!0)])])]),e("div",xe,[c($,{text:"Informações adicionais"}),D(e("textarea",{id:"descricao","onUpdate:modelValue":a[6]||(a[6]=l=>g.value=l),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[F,g.value]]),e("p",{class:K(["text-right text-xs mt-1",{"text-gray-500":g.value.length<=200,"text-red-500":g.value.length>200}])},p(g.value.length)+"/200 caracteres ",3),e("div",be,[c($,{text:"Enviar boleto/fatura"}),e("div",_e,[e("label",ye,[G(p(x.value||"Selecionar Arquivo")+" ",1),a[12]||(a[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:B},null,32),t.value.arquivo?(i(),u("span",he,p(t.value.arquivo),1)):C("",!0)])]),e("div",Ce,[c(ae,{class:"w-full",text:"Cancelar",onClick:n}),c(Q,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:a[7]||(a[7]=l=>S("Cadastrar um nova conta?"))})])])])]),c(j,{isVisible:h.value,motivo:E.value,onConfirm:L,onCancel:U},null,8,["isVisible","motivo"])],64))}},$e=R(we,[["__scopeId","data-v-a038958e"]]),ke={class:"elemento-fixo"},De={key:0},Ve={class:"mt-8"},Ee={class:"w-full h-[555px] bg-white rounded-[20px] p-7 relative"},qe={class:"flex justify-between items-center"},Fe={class:"text-[25px] font-bold font-['Figtree'] leading-8 tracking-tight"},Ae={class:"text-[#6db631] text-xl font-normal font-['Figtree'] leading-[25px] tracking-tight"},Se={class:"col-span-1 row-span-2 mt-8"},Be={class:"col-span-1 row-span-2 mt-8"},ze={class:"text-[#262a27] text-[12px] font-bold leading-[48px] tracking-wide"},Le=["value"],Ue=["value"],Ie={class:"w-full h-[100px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500"},Ne={class:"flex space-x-4 mt-5"},je=["value"],Me={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["voltar","atualiza"],setup(k,{emit:w}){const d=T(),o=k,g=w,b=r([]),m=r(o.dados.status),y=r(!1);r(null);const _=r(!1),x=r(!1),h=r(""),E=n=>{h.value=n,x.value=!0};H(()=>o.dados.status,n=>{m.value=n});const q=()=>{_.value=!1,L()},t=()=>{_.value=!1},v=()=>{x.value=!1,U()},f=()=>{x.value=!1},S=async()=>{try{const n=await V.put(`/api/cursto/cursto/contas-a-pagar/${o.dados.id}/status`,{status:m.value});d.success(n.data.message),g("atualiza")}catch(n){console.error(n),d.error("Erro ao atualizar o status da conta")}},L=async()=>{if(!o.dados||!o.dados.id){d.error("Erro: Dados da conta não encontrados.");return}try{const n=await V.post(`/api/cursto/contas-a-pagar/${o.dados.id}/pagar`);d.success(n.data.message),o.dados.status="pago",g("atualiza")}catch(n){console.error("Erro ao pagar a conta:",n),d.error("Erro ao pagar a conta")}},U=async n=>{if(!o.dados||!o.dados.id){d.error("Erro: Dados da conta não encontrados.");return}try{const s=await V.delete(`/api/cursto/contas-a-pagar/${o.dados.id}`);d.success("Conta excluída com sucesso"),g("voltar")}catch(s){console.error("Erro ao excluir a conta:",s)}},B=n=>{if(!n)return"";const s=n.split("-");return`${s[2]}/${s[1]}/${s[0]}`},I=()=>{if(o.dados.arquivo){const n=document.createElement("a");n.href=`/${o.dados.arquivo}`,n.download=o.dados.arquivo.split("/").pop(),n.target="_blank",n.click(),d.info("Arquivo baixado com sucesso")}else d.warning("Arquivo não encontrado"),console.error("Arquivo não encontrado")};return M(async()=>{try{const n=await V.get("/api/cursto/contas-a-pagar/status-options");b.value=n.data.data,b.value.includes(m.value)||b.value.push(m.value)}catch(n){console.error("Erro ao carregar opções de status:",n)}}),(n,s)=>(i(),u(A,null,[e("div",ke,[y.value?C("",!0):(i(),u("div",De,[e("div",Ve,[e("div",Ee,[e("div",qe,[e("p",Fe,p(k.dados.nome),1),e("button",{class:"text-gray-500 hover:text-red-600",onClick:s[0]||(s[0]=a=>E("Excluir essa conta?"))},s[2]||(s[2]=[e("img",{src:"/storage/images/delete.svg",alt:"Excluir",class:"w-6 h-6"},null,-1)]))]),e("p",Ae,p(k.dados.valor_formatado),1),s[4]||(s[4]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1)),e("div",Se,[e("div",Be,[e("div",ze,[c($,{text:"Data emitida"}),e("input",{type:"text",id:"emitida_em",value:B(k.dados.emitida_em),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Le),s[3]||(s[3]=e("div",{class:"mt-12"},null,-1)),c($,{text:"Data de vencimento"}),e("input",{type:"text",id:"vencimento",name:"vencimento",value:B(k.dados.vencimento),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Ue)])]),c($,{text:"Informações adicionais"}),e("p",Ie,p(k.dados.descricao),1)]),e("div",Ne,[e("div",null,[D(e("select",{id:"status","onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),onChange:S,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5 focus:outline-none",style:{border:"2px solid #c1fab6","outline-color":"#c1fab6"}},[(i(!0),u(A,null,O(b.value,a=>(i(),u("option",{key:a,value:a},p(a.charAt(0).toUpperCase()+a.slice(1)),9,je))),128))],544),[[N,m.value]])]),c(te,{text:"Baixar boleto",class:"text-[#6db631] bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out",onClick:I})])])])]))]),c(j,{isVisible:_.value,motivo:h.value,onConfirm:q,onCancel:t},null,8,["isVisible","motivo"]),c(j,{isVisible:x.value,motivo:h.value,onConfirm:v,onCancel:f},null,8,["isVisible","motivo"])],64))}},Oe=R(Me,[["__scopeId","data-v-7ebfec33"]]),Re={class:"search-container relative flex items-center w-full mb-4"},Pe=["onClick"],Te={class:"text-lg font-medium text-gray-900"},Ke={class:"text-sm text-gray-600"},Qe={class:"flex items-center gap-2"},Ze=["src","alt"],Ge={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(k,{emit:w}){const d=w,o=r([]),g=r("");M(async()=>{try{const t=await V.get("/api/cursto/listar-contas-a-pagar");o.value=t.data.data}catch(t){console.error("Erro ao carregar os dados:",t)}});const m=t=>{d("dado-selecionado",t)},y=J(()=>{const t=g.value.toLowerCase();return o.value.filter(v=>v.nome.toLowerCase().includes(t)||String(v.valor).includes(t))}),_=t=>{const v=t.split("-");return`${v[2]}/${v[1]}/${v[0]}`},x={pendente:"/storage/images/check_circle_laranja.svg",pago:"/storage/images/check_circle_verde.svg",agendada:"/storage/images/agendada.svg",atrasado:"/storage/images/atrasada.svg"},h=t=>x[t]||"/storage/images/check_circle_laranja.svg",E={pendente:"bg-orange-100 text-orange-700",pago:"bg-green-100 text-green-700",agendada:"bg-blue-100 text-blue-700",atrasado:"bg-red-100 text-red-700"},q=t=>E[t.toLowerCase()]||"bg-gray-100 text-gray-700";return(t,v)=>(i(),u("div",null,[v[2]||(v[2]=e("div",{class:"painel-title"},"Contas a pagar",-1)),v[3]||(v[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),e("div",Re,[v[1]||(v[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=f=>g.value=f),placeholder:"Buscar contas",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[F,g.value]])]),(i(!0),u(A,null,O(y.value,f=>(i(),u("div",{key:f.id,onClick:S=>m(f),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Te,p(f.nome),1),e("p",Ke,p(f.valor_formatado)+" - Vence em "+p(_(f.vencimento)),1)]),e("div",Qe,[e("span",{class:K(["px-2 py-1 text-xs font-semibold rounded-full capitalize",q(f.status)])},p(f.status),3),e("img",{src:h(f.status),alt:f.status,class:"w-8 h-8"},null,8,Ze)])],8,Pe))),128))]))}},He=R(Ge,[["__scopeId","data-v-1cddf121"]]),Je={key:0,class:"fixed bottom-6 right-6"},We={key:1,class:"mt-3"},Xe={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},Ye={key:0},ia={__name:"Index",setup(k){const w=r(0),d=r(null),o=r(!1),g=()=>{o.value=!o.value,o.value&&(d.value=null)},b=x=>{d.value=x},m=()=>{o.value=!1,w.value+=1,console.log("cancelarCadastro")},y=()=>{d.value=null,w.value+=1},_=()=>{w.value+=1};return(x,h)=>(i(),P(ee,null,{default:W(()=>[c(X(Y),{title:"Contas"}),o.value?C("",!0):(i(),u("div",Je,[c(Q,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:g})])),o.value?(i(),u("div",We,[c($e,{onVoltar:m,onAtualiza:_})])):C("",!0),o.value?C("",!0):(i(),u("div",Xe,[(i(),P(He,{key:w.value,ref:"listaDados",onDadoSelecionado:b})),d.value?(i(),u("div",Ye,[c(Oe,{dados:d.value,onVoltar:y,onAtualiza:y},null,8,["dados"])])):C("",!0)]))]),_:1}))}};export{ia as default};
