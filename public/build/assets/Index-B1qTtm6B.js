import{d as c,j as I,e as m,o as g,a as e,f as A,t as r,F as k,h as M,n as B,m as L,S as R,i as V,c as T,w as z,b as $,u as N,Z as U,x as H,k as W}from"./app-C9EXLGIS.js";import{L as q}from"./LayoutFranqueado-BDHlOF9X.js";import{C as E,A as G,p as Q,a as Z,D as J,P as K,B as X,L as ee,R as te,b as se,c as ae,d as oe,e as le,f as ne,g as re,h as ie,i as de}from"./chart-D2B5U74o.js";import{p as ce}from"./chartjs-plugin-datalabels.esm-EXrChiyj.js";import{d as y}from"./dayjs.min-BSVbHqvP.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-DkpxSVtI.js";const pe={class:"relative"},ge={key:0},me={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},fe={class:"flex justify-between items-center mb-3"},xe={class:"font-semibold flex items-center"},ve={class:"ml-[90px]"},be={class:"grid grid-cols-7 gap-1 text-center text-sm"},he=["onClick"],_e={class:"mt-5"},ye={class:"flex items-center space-x-4"},Fe={class:"flex items-center"},we={class:"flex items-center"},Ce={__name:"CalendarFilterDia",setup(P,{emit:F}){const w=F,b=c(!1),u=c(y()),p=c(y()),x=c(y()),o=c(!0),_=["D","S","T","Q","Q","S","S"],S=I(()=>{const a=[],n=u.value.startOf("month"),d=p.value.endOf("month");for(let v=0;v<n.day();v++)a.push({day:"",date:null});for(let v=1;v<=d.date();v++){const j=n.date(v);a.push({day:v,date:j})}return a}),i=c(""),Y=()=>{x.value=x.value.subtract(1,"month")},C=()=>{x.value=x.value.add(1,"month")},D=a=>a&&(a.isSame(u.value)||a.isSame(p.value)),l=a=>!a||!u.value||!p.value?!1:a.isAfter(u.value,"day")&&a.isBefore(p.value,"day"),t=a=>{a&&(o.value?(u.value=a.startOf("day"),o.value=!1):(p.value=a.endOf("day"),o.value=!0))},s=()=>{O(),b.value=!1},h=()=>{b.value=!b.value},f=()=>{const a=u.value.format("DD-MM-YYYY"),n=p.value.format("DD-MM-YYYY");console.log("Data inicial:",a),console.log("Data final:",n),console.log("Categoria:",i.value),w("update-filters",{startDate:a,endDate:n,periodo:i.value}),b.value=!1},O=()=>{u.value=y(),p.value=y(),i.value=""};return(a,n)=>(g(),m("div",pe,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:h},[e("span",null,[u.value&&p.value?(g(),m("span",ge,r(u.value.format("DD/MM/YYYY"))+" - "+r(p.value.format("DD/MM/YYYY")),1)):A("",!0)])]),b.value?(g(),m("div",me,[e("div",fe,[e("button",{onClick:Y,class:"p-2 rounded hover:bg-gray-300"}," < "),e("span",xe,[e("span",null,r(x.value.format("MMM")),1),e("span",ve,r(x.value.format("YYYY")),1)]),e("button",{onClick:C,class:"p-2 rounded hover:bg-gray-300"}," > ")]),e("div",be,[(g(),m(k,null,M(_,d=>e("div",{class:"font-semibold text-gray-600",key:d},r(d),1)),64)),(g(!0),m(k,null,M(S.value,(d,v)=>(g(),m("div",{key:v,onClick:j=>t(d.date),class:B(["p-2 rounded-full cursor-pointer",D(d.date)?"bg-[#6db631] text-white":l(d.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},r(d.day),11,he))),128))]),e("div",_e,[e("div",ye,[e("div",Fe,[L(e("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":n[0]||(n[0]=d=>i.value=d),class:B(["mr-2",{"text-[#6db631]":i.value==="almoco","border-[#6db631]":i.value==="almoco"}])},null,2),[[R,i.value]]),n[2]||(n[2]=e("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),e("div",we,[L(e("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":n[1]||(n[1]=d=>i.value=d),class:B(["mr-2",{"text-[#6db631]":i.value==="janta","border-[#6db631]":i.value==="janta"}])},null,2),[[R,i.value]]),n[3]||(n[3]=e("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:O}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:s}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:f}," OK ")])])])):A("",!0)]))}},De={class:"flex justify-between items-center mb-4"},ke={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Me={class:"flex items-center space-x-2"},Se={class:"text-gray-900 text-[17px] font-semibold"},Ye={class:"mt-5"},Be={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},Ae={class:"bg-white rounded-lg px-12 py-8"},Le={class:"w-full"},Oe={class:"py-3 flex items-center gap-5"},je=["src","alt"],Re={class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},$e={class:"py-3 text-right text-[#262a27] font-semibold"},Ee={class:"w-full h-[60px] bg-[#d2fac3] rounded-bl-[10px] rounded-br-[10px] px-12 flex justify-between items-center"},Pe={class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"},Ie={class:"bg-white rounded-lg px-12 py-8"},Ve={class:"mb-4 text-center"},Te={class:"mt-8"},ze={class:"bg-white rounded-lg shadow"},Ne={ref:"scrollContainer",class:"overflow-y-auto max-h-96 scroll-hidden"},Ue={class:"space-y-2"},He={class:"flex items-center text-gray-900 font-semibold"},We=["src"],qe={class:"text-center text-gray-900 font-semibold"},Ge={class:"text-left text-gray-900 font-medium"},Qe={class:"text-center text-gray-600 font-semibold"},Ze={class:"text-center text-gray-500 font-semibold"},Je={__name:"Index",setup(P){E.register(G,Q,Z,J,K,X,ee,te,se,ae,oe,le,ne,re,ie,de,ce);const F=c([]),w=c(""),b=c([]),u=c([]),p=c([]),x=c([]),o=c("pie");let _=null;const S=l=>{switch(l){case"abertura":case"suprimento":return"/storage/images/arrow_back_verde.svg";case"fechamento":return"/storage/images/thumb_up.svg";case"sangria":return"/storage/images/arrow_back_red.svg";default:return""}},i=l=>{switch(l){case"abertura":return"Abertura";case"fechamento":return"Fechamento";case"suprimento":return"Suprimento";case"sangria":return"Sangria";default:return""}},Y=l=>{console.log("Filtros atualizados:",l),C(l.startDate,l.endDate,l.periodo)},C=async(l,t,s)=>{try{const f=(await W.get("/api/analyticos/lista-metodos-pagamentos",{params:{start_date:l,end_date:t,periodo:s||"total"}})).data;F.value=f.metodos,b.value=f.historico,w.value=f.total,p.value=f.grafico.labels,u.value=f.grafico.data,x.value=f.grafico.porcentagem,D()}catch(h){console.error("Erro ao buscar dados:",h)}},D=()=>{const l=document.getElementById("myChart").getContext("2d");_&&_.destroy();const t={type:o.value,data:{labels:p.value,datasets:[{data:u.value,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#F7464A","#FF7F50"],borderColor:o.value==="line"?"#36A2EB":void 0,borderWidth:o.value==="line"||o.value==="bar"?1:0,fill:o.value==="line"}]},options:{plugins:{tooltip:{callbacks:{label:function(s){const h=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.raw);return s.label+": "+h}}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15,boxWidth:10}},datalabels:{anchor:"center",align:"center",color:o.value==="bar"||o.value==="line"?"#000":"#fff",font:{weight:"bold",size:14},formatter:(s,h)=>{const f=h.dataIndex;return x.value[f]},display:o.value==="pie"||o.value==="doughnut"||o.value==="polarArea"}},scales:o.value==="bar"||o.value==="line"?{x:{type:"category"},y:{beginAtZero:!0,ticks:{callback:function(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}}}}:void 0}};_=new E(l,t)};return V(()=>{C()}),(l,t)=>(g(),T(q,null,{default:z(()=>[$(N(U),{title:"Histórico de Caixa"}),e("div",De,[t[2]||(t[2]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Histórico de Caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",ke,[e("div",Me,[t[1]||(t[1]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",Se,[$(Ce,{onUpdateFilters:Y})])])])]),e("div",Ye,[e("div",Be,[e("div",null,[e("div",Ae,[e("table",Le,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-gray-500 text-left text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Método de pagamento "),e("th",{class:"text-gray-500 text-right text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Valor ")])],-1)),e("tbody",null,[(g(!0),m(k,null,M(F.value,s=>(g(),m("tr",{key:s.nome},[e("td",Oe,[s.img_icon?(g(),m("img",{key:0,src:`/${s.img_icon}`,alt:s.nome,class:"w-8 h-8"},null,8,je)):A("",!0),e("div",Re,r(s.nome),1)]),e("td",$e,r(s.valor),1)]))),128))])])]),e("div",Ee,[t[4]||(t[4]=e("div",{class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"}," TOTAL ",-1)),e("div",Pe,r(w.value),1)])]),e("div",null,[e("div",Ie,[e("div",Ve,[t[6]||(t[6]=e("label",{for:"chartType",class:"text-gray-700 font-semibold mr-2"}," Tipo de Gráfico: ",-1)),L(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),onChange:D,id:"chartType",class:"border rounded px-2 py-1"},t[5]||(t[5]=[e("option",{value:"pie"},"Pizza (Pie)",-1),e("option",{value:"doughnut"},"Rosquinha (Doughnut)",-1),e("option",{value:"bar"},"Barras (Bar)",-1),e("option",{value:"line"},"Linha (Line)",-1),e("option",{value:"radar"},"Radar",-1),e("option",{value:"polarArea"},"Área Polar (Polar Area)",-1)]),544),[[H,o.value]])]),t[7]||(t[7]=e("canvas",{id:"myChart"},null,-1))])])])]),e("div",Te,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),e("div",{class:"flex items-center space-x-2"},[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"})])],-1)),e("div",ze,[t[8]||(t[8]=e("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[e("span",{class:"text-left px-5"},"OPERAÇÃO"),e("span",{class:"text-center"},"VALOR"),e("span",{class:"text-left"},"HORA"),e("span",{class:"text-center"},"MOTIVO"),e("span",{class:"text-center"},"RESPONSÁVEL")],-1)),e("div",Ne,[e("ul",Ue,[(g(!0),m(k,null,M(b.value,s=>(g(),m("li",{key:s.hora,class:"hover:bg-gray-200 grid grid-cols-5 gap-2 px-6 py-3 text-[16px]"},[e("span",He,[e("img",{src:S(s.operacao),alt:"icon",class:"mr-3 w-5 h-5"},null,8,We),e("span",null,r(i(s.operacao)),1)]),e("span",qe,r(s.valor),1),e("span",Ge,r(s.hora),1),e("span",Qe,r(s.motivo),1),e("span",Ze,r(s.responsavel),1)]))),128))])],512)])])]),_:1}))}},lt=ue(Je,[["__scopeId","data-v-ad0a9299"]]);export{lt as default};
