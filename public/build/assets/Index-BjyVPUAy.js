import{A as W}from"./AppLayout-3AvPu0VX.js";import{y as L,o as a,e as r,a as e,j as k,v as Y,F as B,g as ee,f as G,t as F,h as g,s as T,d as n,c as S,w as R,i as E,b as v,B as U,z as H,x as oe,u as se,Z as te}from"./app-D-CG014l.js";import{_ as M,I as J,B as K,a as Q,C as O,d as X}from"./ConfirmDialog-Dt6kxCar.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as ae}from"./ButtonEditeMedio-BnfuASEo.js";const le={data(){return{produtos:[],searchQuery:""}},mounted(){this.fetchProdutos()},methods:{async fetchProdutos(){try{const u=await L.get("/api/lista-produtos");this.produtos=u.data}catch(u){console.error("Erro ao carregar os produtos:",u)}},selecionarProduto(u){this.$emit("produto-selecionado",u)}},computed:{filteredProdutos(){const u=this.searchQuery.toLowerCase();return this.produtos.filter(i=>i.nome.toLowerCase().includes(u))}}},re={class:"search-container relative flex items-center w-full mb-4"},ne={class:"card-container"},ie=["onClick"],de={class:"card-inner"},ue={class:"icon-container"},ce={class:"icon-leaf"},pe=["src"],ve={class:"text-container"},me={class:"city"},fe={key:0,class:"estrela"};function ge(u,i,c,_,h,p){return a(),r("div",null,[i[4]||(i[4]=e("div",{class:"painel-title"},"Insumos",-1)),i[5]||(i[5]=e("div",{class:"painel-subtitle"},[e("p",null,"Adicione os itens que você recebeu ao estoque")],-1)),e("div",re,[i[1]||(i[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),k(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=t=>h.searchQuery=t),placeholder:"Buscar um produto",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[Y,h.searchQuery]])]),e("div",ne,[(a(!0),r(B,null,ee(p.filteredProdutos,t=>(a(),r("div",{key:t.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:l=>p.selecionarProduto(t)},[e("div",de,[e("div",ue,[i[2]||(i[2]=e("div",{class:"icon-bg"},null,-1)),e("div",ce,[e("img",{src:t.profile_photo||"/storage/images/no_imagem.svg",alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,pe)])]),e("div",ve,[e("div",me,[G(F(t.nome)+" ",1),t.estrela?(a(),r("span",fe,"★")):g("",!0)])]),i[3]||(i[3]=e("div",{class:"action-icon"},null,-1))])],8,ie))),128))])])}const he=q(le,[["render",ge],["__scopeId","data-v-fa000e17"]]),_e={key:0,class:"sidebar-container"},ye={key:0,class:"loading-overlay"},be={key:1,class:"w-full h-[80%] bg-white rounded-[20px] p-12"},xe={class:"flex justify-center mb-6 relative group"},we=["src"],Ce={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},$e={key:0,class:"error-message"},ke={class:"flex items-center space-x-4 mt-2"},Pe={class:"flex items-center space-x-2 cursor-pointer"},Ve={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Ue={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Ie={class:"flex items-center space-x-2 cursor-pointer"},De={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},je={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Fe={class:"flex items-center space-x-4 mt-2"},Ee={class:"flex items-center space-x-2 cursor-pointer"},Me={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Se={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Be={class:"flex items-center space-x-2 cursor-pointer"},Ae={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Le={key:0,class:"w-3 h-3 rounded-full bg-green-500"},qe={class:"flex justify-start space-x-1 mt-[15%]"},Ne={__name:"CadastroProduto",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(u,{emit:i}){const c=T(),_=i,h=n(""),p=n(""),t=n(""),l=n(""),f=n(null),y=n(""),P=n(null),V=n(!1),w=n(!1),$=n(""),D=()=>{var s;(s=P.value)==null||s.click()},b=s=>{$.value=s,w.value=!0},x=()=>{m(),w.value=!1},I=()=>{w.value=!1},j=()=>{p.value="",c.info("Imagem removida.")},C=s=>{const o=s.target.files[0];if(o){f.value=o;const d=new FileReader;d.onload=()=>{p.value=d.result,c.success("Imagem carregada com sucesso!")},d.readAsDataURL(o)}},N=()=>{A(),_("cancelar")},A=()=>{h.value="",t.value="",l.value="",p.value="",f.value=null,y.value=""},z=()=>!h.value||!f.value||!l||!t?(c.error("Por favor, preencha todos os campos obrigatórios."),y.value="Por favor, preencha todos os campos obrigatórios.",!1):!0,m=async()=>{var s,o;if(z())try{V.value=!0;const d=new FormData;d.append("nome",h.value),d.append("categoria",t.value),d.append("unidadeDeMedida",l.value),d.append("profile_photo",f.value);const Z=await L.post("/api/cadastar-produtos",d,{headers:{"Content-Type":"multipart/form-data"}});c.success("Produto cadastrado com sucesso!"),X.Inertia.visit("/insumos"),A()}catch(d){c.error("Erro ao cadastrar o produto."),y.value=((o=(s=d.response)==null?void 0:s.data)==null?void 0:o.message)||"Erro inesperado."}finally{V.value=!1}};return(s,o)=>(a(),S(H,{name:"fade"},{default:R(()=>[u.isVisible?(a(),r("div",_e,[V.value?(a(),r("div",ye,o[7]||(o[7]=[e("div",{class:"spinner"},null,-1)]))):(a(),r("div",be,[e("form",{onSubmit:E(m,["prevent"])},[e("div",xe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:D},[p.value?(a(),r(B,{key:0},[e("img",{src:p.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,we),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:o[0]||(o[0]=E(()=>{},["stop"]))},[e("button",{onClick:E(j,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(a(),r("img",Ce))]),e("input",{type:"file",ref_key:"fileInput",ref:P,accept:"image/*",class:"hidden",onChange:C},null,544)]),v(M,{text:"Nome"}),v(J,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=d=>h.value=d),placeholder:"Shoyu Premium Sakaki"},null,8,["modelValue"]),y.value?(a(),r("div",$e,F(y.value),1)):g("",!0),v(M,{class:"font-semibold text-gray-800 mt-8",text:"Prioridade"}),e("div",ke,[e("label",Pe,[k(e("input",{type:"radio","onUpdate:modelValue":o[2]||(o[2]=d=>t.value=d),value:"principal",class:"hidden"},null,512),[[U,t.value]]),e("div",Ve,[t.value==="principal"?(a(),r("div",Ue)):g("",!0)]),o[8]||(o[8]=e("span",null,"Principal",-1))]),e("label",Ie,[k(e("input",{type:"radio","onUpdate:modelValue":o[3]||(o[3]=d=>t.value=d),value:"secundario",class:"hidden"},null,512),[[U,t.value]]),e("div",De,[t.value==="secundario"?(a(),r("div",je)):g("",!0)]),o[9]||(o[9]=e("span",null,"Secundário",-1))])]),v(M,{class:"font-semibold text-gray-800 mt-8",text:"Unidade de medida"}),e("div",Fe,[e("label",Ee,[k(e("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=d=>l.value=d),value:"a_granel",class:"hidden"},null,512),[[U,l.value]]),e("div",Me,[l.value==="a_granel"?(a(),r("div",Se)):g("",!0)]),o[10]||(o[10]=e("span",null,"A granel",-1))]),e("label",Be,[k(e("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=d=>l.value=d),value:"unitario",class:"hidden"},null,512),[[U,l.value]]),e("div",Ae,[l.value==="unitario"?(a(),r("div",Le)):g("",!0)]),o[11]||(o[11]=e("span",null,"Unitário",-1))])]),e("div",qe,[v(K,{text:"Cancelar",onClick:N}),v(Q,{text:"Cadastrar",onClick:o[6]||(o[6]=d=>b("Criar novo Produto?"))})])],32)])),v(O,{isVisible:w.value,motivo:$.value,onConfirm:x,onCancel:I},null,8,["isVisible","motivo"])])):g("",!0)]),_:1}))}},ze=q(Ne,[["__scopeId","data-v-c91ce8e7"]]),Te={key:0,class:"sidebar-container"},Re={key:0,class:"loading-overlay"},Qe={key:1,class:"w-full h-[80%] bg-white rounded-[20px] p-12"},Oe={class:"flex justify-center mb-6 relative group"},Xe=["src"],Ze={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Ge={key:0,class:"error-message"},He={class:"flex items-center space-x-4 mt-2"},Je={class:"flex items-center space-x-2 cursor-pointer"},Ke={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},We={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Ye={class:"flex items-center space-x-2 cursor-pointer"},eo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},oo={key:0,class:"w-3 h-3 rounded-full bg-green-500"},so={class:"flex items-center space-x-4 mt-2"},to={class:"flex items-center space-x-2 cursor-pointer"},ao={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},lo={key:0,class:"w-3 h-3 rounded-full bg-green-500"},ro={class:"flex items-center space-x-2 cursor-pointer"},no={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},io={key:0,class:"w-3 h-3 rounded-full bg-green-500"},uo={class:"flex justify-start space-x-1 mt-[15%]"},co={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar"],setup(u,{emit:i}){const c=T(),_=u,h=i,p=n(""),t=n(""),l=n(""),f=n(""),y=n(null),P=n(""),V=n(null),w=n(!1),$=n(!1),D=n("");oe(()=>_.produto,m=>{m&&(p.value=m.nome||"",t.value=m.categoria||"",l.value=m.unidadeDeMedida||"",f.value=m.profile_photo||"")},{immediate:!0});const b=async()=>{var m,s;if(!p.value){c.error("O campo nome é obrigatório.");return}try{w.value=!0;const o=new FormData;if(o.append("id",_.produto.id),o.append("nome",p.value),o.append("categoria",t.value),o.append("unidadeDeMedida",l.value),y.value){const Z=`${Date.now()}_${y.value.name}`;o.append("profile_photo_name",Z),o.append("profile_photo",y.value)}const d=await L.post("/api/atualizar-produtos",o,{headers:{"Content-Type":"multipart/form-data"}});X.Inertia.replace(route("insumos"),{produto:d.data.produto,preserveState:!0}),c.success("Produto atualizado com sucesso!")}catch(o){c.error("Erro ao atualizar o produto."),P.value=((s=(m=o.response)==null?void 0:m.data)==null?void 0:s.message)||"Erro inesperado."}finally{w.value=!1}},x=m=>{D.value=m,$.value=!0},I=()=>{b(),$.value=!1},j=()=>{$.value=!1},C=()=>{var m;(m=V.value)==null||m.click()},N=()=>{f.value="",c.info("Imagem removida.")},A=m=>{const s=m.target.files[0];if(s){y.value=s;const o=new FileReader;o.onload=()=>{f.value=o.result,c.success("Imagem carregada com sucesso!")},o.readAsDataURL(s)}},z=()=>{h("cancelar")};return(m,s)=>(a(),S(H,{name:"fade"},{default:R(()=>[u.isVisible?(a(),r("div",Te,[w.value?(a(),r("div",Re,s[7]||(s[7]=[e("div",{class:"spinner"},null,-1)]))):(a(),r("div",Qe,[e("form",{onSubmit:E(b,["prevent"])},[e("div",Oe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:C},[f.value?(a(),r(B,{key:0},[e("img",{src:f.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Xe),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:s[0]||(s[0]=E(()=>{},["stop"]))},[e("button",{onClick:E(N,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(a(),r("img",Ze))]),e("input",{type:"file",ref_key:"fileInput",ref:V,accept:"image/*",class:"hidden",onChange:A},null,544)]),v(M,{text:"Nome"}),v(J,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),placeholder:""},null,8,["modelValue"]),P.value?(a(),r("div",Ge,F(P.value),1)):g("",!0),v(M,{class:"font-semibold text-gray-800 mt-8",text:"Prioridade"}),e("div",He,[e("label",Je,[k(e("input",{type:"radio","onUpdate:modelValue":s[2]||(s[2]=o=>t.value=o),value:"principal",class:"hidden"},null,512),[[U,t.value]]),e("div",Ke,[t.value==="principal"?(a(),r("div",We)):g("",!0)]),s[8]||(s[8]=e("span",null,"Principal",-1))]),e("label",Ye,[k(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=o=>t.value=o),value:"secundario",class:"hidden"},null,512),[[U,t.value]]),e("div",eo,[t.value==="secundario"?(a(),r("div",oo)):g("",!0)]),s[9]||(s[9]=e("span",null,"Secundário",-1))])]),v(M,{class:"font-semibold text-gray-800 mt-8",text:"Unidade de medida"}),e("div",so,[e("label",to,[k(e("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>l.value=o),value:"a_granel",class:"hidden"},null,512),[[U,l.value]]),e("div",ao,[l.value==="a_granel"?(a(),r("div",lo)):g("",!0)]),s[10]||(s[10]=e("span",null,"A granel",-1))]),e("label",ro,[k(e("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>l.value=o),value:"unitario",class:"hidden"},null,512),[[U,l.value]]),e("div",no,[l.value==="unitario"?(a(),r("div",io)):g("",!0)]),s[11]||(s[11]=e("span",null,"Unitário",-1))])]),e("div",uo,[v(K,{text:"Cancelar",onClick:z}),v(Q,{text:"Atualizar",onClick:s[6]||(s[6]=o=>x("Atualizar esse Produto?"))})])],32),v(O,{isVisible:$.value,motivo:D.value,onConfirm:I,onCancel:j},null,8,["isVisible","motivo"])]))])):g("",!0)]),_:1}))}},po=q(co,[["__scopeId","data-v-98bdf7cf"]]),vo={key:0,class:"w-full h-[200px] bg-white rounded-[20px] p-12 relative overflow-y-auto scrollbar-hidden"},mo={class:"relative w-full h-full"},fo={class:"flex items-center"},go={class:"w-1/1 flex justify-center"},ho=["src"],_o={class:"w-2/3 pl-5"},yo={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},bo={class:"owner"},xo={class:"w-1/1"},wo={key:1,class:"mt-4"},Co={__name:"DetalhesProduto",props:{produto:{type:Object,required:!0}},setup(u){const i=T(),c=u,_=n(!1),h=n(""),p=n(!1),t=n(!1),l=n(!1),f=()=>{n.dadosProduto.fetchProduto()},y=async()=>{var b,x,I,j;try{l.value=!0;const C=await L.delete(`/api/excluir-produto/${c.produto.id}`);console.log(C.data.message),i.success("Produto deletado com sucesso!"),X.Inertia.visit("/insumos")}catch(C){i.error("Erro ao deletar o produto:",((x=(b=C.response)==null?void 0:b.data)==null?void 0:x.error)||C.message),console.error("Erro ao deletar o produto:",((j=(I=C.response)==null?void 0:I.data)==null?void 0:j.error)||C.message)}finally{l.value=!1}},P=()=>{t.value=!t.value,p.value=!1},V=b=>{h.value=b,_.value=!0},w=()=>{y(),_.value=!1},$=()=>{_.value=!1},D=()=>{t.value=!1,p.value=!0};return(b,x)=>(a(),r(B,null,[t.value?g("",!0):(a(),r("div",vo,[e("div",mo,[e("div",fo,[e("div",go,[e("img",{src:u.produto.profile_photo||"/storage/images/no_imagem.svg",alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-lg"},null,8,ho)]),e("div",_o,[e("div",yo,[G(F(u.produto.nome||"N/A")+" ",1),e("div",bo,F(u.produto.categoria)+" / "+F(u.produto.unidadeDeMedida),1)])]),e("div",xo,[v(O,{isVisible:_.value,motivo:h.value,onConfirm:w,onCancel:$},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-4 right-4 cursor-pointer",onClick:x[0]||(x[0]=I=>V("Excluir esse produto?"))},x[1]||(x[1]=[e("img",{src:"/storage/images/delete.svg",alt:"Deletar Usuário",class:"w-6 h-6"},null,-1)]))])])])])),u.produto.id&&!t.value?(a(),r("div",wo,[v(ae,{text:"Editar insumos","icon-path":"/storage/images/border_color.svg",onClick:P,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):g("",!0),t.value?(a(),S(po,{key:2,ref:"dadosProduto",isVisible:t.value,produto:u.produto,onDadosProduto:f,onCancelar:D},null,8,["isVisible","produto"])):g("",!0)],64))}},$o=q(Co,[["__scopeId","data-v-4a5d0422"]]),ko={class:"flex flex-col gap-4"},Po={class:"absolute bottom-4 right-4"},Vo={key:1,class:"mt-4"},Eo={__name:"Index",setup(u){const i=n(null),c=n(!1),_=()=>{c.value=!c.value},h=()=>{p(),c.value=!1},p=()=>{var f;(f=n("listarUnidades").value)==null||f.fetchUnidades()},t=l=>{l&&typeof l=="object"?i.value=l:console.warn("Dados inválidos recebidos no evento produto-selecionado:",l)};return(l,f)=>(a(),S(W,null,{default:R(()=>[v(se(te),{title:"Insumos"}),e("div",{class:"grid grid-cols-1 gap-4 mt-3 sm:grid-cols-2 overflow-hidden card-container h-full overflow-y-scroll",onScrollPassive:f[0]||(f[0]=()=>{})},[e("div",null,[v(he,{ref:"listarUnidades",onUnidadeCadastrada:p,onProdutoSelecionado:t},null,512)]),e("div",ko,[c.value?(a(),r("div",Vo,[v(ze,{isVisible:c.value,onUnidadeCadastrada:h,onCancelar:_},null,8,["isVisible"])])):(a(),r(B,{key:0},[i.value?(a(),S($o,{key:0,produto:i.value},null,8,["produto"])):g("",!0),e("div",Po,[v(Q,{text:"Cadastrar insumo",iconPath:"/storage/images/arrow_left_alt.svg",onClick:_})])],64))])],32)]),_:1}))}};export{Eo as default};
