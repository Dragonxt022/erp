import{A as J}from"./AppLayout-DJI0S5pw.js";import{y as M,o as a,e as n,a as e,j as D,v as K,F as S,g as W,f as Y,t as F,h as _,s as N,d as l,c as E,w as z,i as j,b as f,B as L,z as X,x as ee,u as oe,Z as se}from"./app-Cp0ba3IO.js";import{_ as Z,I as G,B as H,a as T,C as R,d as Q}from"./ConfirmDialog-B69rbOlC.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as te}from"./ButtonEditeMedio-DQewWd3F.js";const ae={data(){return{produtos:[],searchQuery:""}},mounted(){this.fetchProdutos()},methods:{async fetchProdutos(){try{const d=await M.get("/api/lista-produtos");this.produtos=d.data}catch(d){console.error("Erro ao carregar os produtos:",d)}},selecionarProduto(d){this.$emit("produto-selecionado",d)}},computed:{filteredProdutos(){const d=this.searchQuery.toLowerCase();return this.produtos.filter(r=>r.nome.toLowerCase().includes(d))}}},le={class:"search-container relative flex items-center w-full mb-4"},re={class:"card-container"},ne=["onClick"],ie={class:"card-inner"},de={class:"icon-container"},ue={class:"icon-leaf"},ce=["src"],pe={class:"text-container"},ve={class:"city"},me={key:0,class:"estrela"},fe={class:"owner"};function ge(d,r,u,h,g,c){return a(),n("div",null,[r[4]||(r[4]=e("div",{class:"painel-title"},"Insumos",-1)),r[5]||(r[5]=e("div",{class:"painel-subtitle"},[e("p",null,"Adicione os itens que você recebeu ao estoque")],-1)),e("div",le,[r[1]||(r[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>g.searchQuery=s),placeholder:"Buscar um produto",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[K,g.searchQuery]])]),e("div",re,[(a(!0),n(S,null,W(c.filteredProdutos,s=>(a(),n("div",{key:s.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:i=>c.selecionarProduto(s)},[e("div",ie,[e("div",de,[r[2]||(r[2]=e("div",{class:"icon-bg"},null,-1)),e("div",ue,[e("img",{src:s.profile_photo||"/storage/images/no_imagem.svg",alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,ce)])]),e("div",pe,[e("div",ve,[Y(F(s.nome)+" ",1),s.estrela?(a(),n("span",me,"★")):_("",!0)]),e("div",fe,F(s.categoria),1)]),r[3]||(r[3]=e("div",{class:"action-icon"},null,-1))])],8,ne))),128))])])}const he=q(ae,[["render",ge],["__scopeId","data-v-24b66e05"]]),_e={key:0,class:"sidebar-container"},ye={key:0,class:"loading-overlay"},be={key:1,class:"w-full h-[400px] bg-white rounded-[20px] p-12"},xe={class:"flex justify-center mb-6 relative group"},we=["src"],Ce={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ke={key:0,class:"error-message"},$e={class:"flex items-center space-x-4 mt-5"},Pe={class:"flex items-center space-x-2 cursor-pointer"},Ve={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Ie={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Ue={class:"flex items-center space-x-2 cursor-pointer"},je={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},De={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Fe={class:"flex justify-start space-x-1 mt-5"},Ee={__name:"CadastroProduto",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(d,{emit:r}){const u=N(),h=r,g=l(""),c=l(""),s=l("secundario"),i=l(null),v=l(""),k=l(null),$=l(!1),b=l(!1),C=l(""),V=()=>{var t;(t=k.value)==null||t.click()},I=t=>{C.value=t,b.value=!0},x=()=>{m(),b.value=!1},y=()=>{b.value=!1},P=()=>{c.value="",u.info("Imagem removida.")},U=t=>{const o=t.target.files[0];if(o){i.value=o;const p=new FileReader;p.onload=()=>{c.value=p.result,u.success("Imagem carregada com sucesso!")},p.readAsDataURL(o)}},w=()=>{B(),h("cancelar")},B=()=>{g.value="",s.value="",c.value="",i.value=null,v.value=""},A=()=>!g.value||!i.value?(u.error("Por favor, preencha todos os campos obrigatórios."),v.value="Por favor, preencha todos os campos obrigatórios.",!1):!0,m=async()=>{var t,o;if(A())try{$.value=!0;const p=new FormData;p.append("nome",g.value),p.append("categoria",s.value),p.append("profile_photo",i.value);const O=await M.post("/api/cadastar-produtos",p,{headers:{"Content-Type":"multipart/form-data"}});u.success("Produto cadastrado com sucesso!"),Q.Inertia.visit("/insumos"),B()}catch(p){u.error("Erro ao cadastrar o produto."),v.value=((o=(t=p.response)==null?void 0:t.data)==null?void 0:o.message)||"Erro inesperado."}finally{$.value=!1}};return(t,o)=>(a(),E(X,{name:"fade"},{default:z(()=>[d.isVisible?(a(),n("div",_e,[$.value?(a(),n("div",ye,o[5]||(o[5]=[e("div",{class:"spinner"},null,-1)]))):(a(),n("div",be,[e("form",{onSubmit:j(m,["prevent"])},[e("div",xe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:V},[c.value?(a(),n(S,{key:0},[e("img",{src:c.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,we),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:o[0]||(o[0]=j(()=>{},["stop"]))},[e("button",{onClick:j(P,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(a(),n("img",Ce))]),e("input",{type:"file",ref_key:"fileInput",ref:k,accept:"image/*",class:"hidden",onChange:U},null,544)]),f(Z,{text:"Nome"}),f(G,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=p=>g.value=p),placeholder:"Shoyu Premium Sakaki"},null,8,["modelValue"]),v.value?(a(),n("div",ke,F(v.value),1)):_("",!0),e("div",$e,[e("label",Pe,[D(e("input",{type:"radio","onUpdate:modelValue":o[2]||(o[2]=p=>s.value=p),value:"principal",class:"hidden"},null,512),[[L,s.value]]),e("div",Ve,[s.value==="principal"?(a(),n("div",Ie)):_("",!0)]),o[6]||(o[6]=e("span",null,"Principal",-1))]),e("label",Ue,[D(e("input",{type:"radio","onUpdate:modelValue":o[3]||(o[3]=p=>s.value=p),value:"secundario",class:"hidden"},null,512),[[L,s.value]]),e("div",je,[s.value==="secundario"?(a(),n("div",De)):_("",!0)]),o[7]||(o[7]=e("span",null,"Secundário",-1))])]),e("div",Fe,[f(H,{text:"Cancelar",onClick:w}),f(T,{text:"Cadastrar",onClick:o[4]||(o[4]=p=>I("Criar novo Produto?"))})])],32)])),f(R,{isVisible:b.value,motivo:C.value,onConfirm:x,onCancel:y},null,8,["isVisible","motivo"])])):_("",!0)]),_:1}))}},Se=q(Ee,[["__scopeId","data-v-452453f6"]]),Be={key:0,class:"sidebar-container"},Le={key:0,class:"loading-overlay"},Me={key:1,class:"w-full h-[400px] bg-white rounded-[20px] p-12"},qe={class:"flex justify-center mb-6 relative group"},Ae=["src"],Ne={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ze={key:0,class:"error-message"},Te={class:"flex items-center space-x-4 mt-5"},Re={class:"flex items-center space-x-2 cursor-pointer"},Qe={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Oe={key:0,class:"w-3 h-3 rounded-full bg-green-500"},Xe={class:"flex items-center space-x-2 cursor-pointer"},Ze={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},Ge={key:0,class:"w-3 h-3 rounded-full bg-green-500"},He={class:"flex justify-start space-x-1 mt-5"},Je={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar"],setup(d,{emit:r}){const u=N(),h=d,g=r,c=l(""),s=l(""),i=l(""),v=l(null),k=l(""),$=l(null),b=l(!1),C=l(!1),V=l("");ee(()=>h.produto,m=>{m&&(c.value=m.nome||"",s.value=m.categoria||"",i.value=m.profile_photo||"")},{immediate:!0});const I=async()=>{var m,t;if(!c.value){u.error("O campo nome é obrigatório.");return}try{b.value=!0;const o=new FormData;if(o.append("id",h.produto.id),o.append("nome",c.value),o.append("categoria",s.value),v.value){const O=`${Date.now()}_${v.value.name}`;o.append("profile_photo_name",O),o.append("profile_photo",v.value)}const p=await M.post("/api/atualizar-produtos",o,{headers:{"Content-Type":"multipart/form-data"}});Q.Inertia.replace(route("insumos"),{produto:p.data.produto,preserveState:!0}),u.success("Produto atualizado com sucesso!")}catch(o){u.error("Erro ao atualizar o produto."),k.value=((t=(m=o.response)==null?void 0:m.data)==null?void 0:t.message)||"Erro inesperado."}finally{b.value=!1}},x=m=>{V.value=m,C.value=!0},y=()=>{I(),C.value=!1},P=()=>{C.value=!1},U=()=>{var m;(m=$.value)==null||m.click()},w=()=>{i.value="",u.info("Imagem removida.")},B=m=>{const t=m.target.files[0];if(t){v.value=t;const o=new FileReader;o.onload=()=>{i.value=o.result,u.success("Imagem carregada com sucesso!")},o.readAsDataURL(t)}},A=()=>{g("cancelar")};return(m,t)=>(a(),E(X,{name:"fade"},{default:z(()=>[d.isVisible?(a(),n("div",Be,[b.value?(a(),n("div",Le,t[5]||(t[5]=[e("div",{class:"spinner"},null,-1)]))):(a(),n("div",Me,[e("form",{onSubmit:j(I,["prevent"])},[e("div",qe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:U},[i.value?(a(),n(S,{key:0},[e("img",{src:i.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Ae),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:t[0]||(t[0]=j(()=>{},["stop"]))},[e("button",{onClick:j(w,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(a(),n("img",Ne))]),e("input",{type:"file",ref_key:"fileInput",ref:$,accept:"image/*",class:"hidden",onChange:B},null,544)]),f(Z,{text:"Nome"}),f(G,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),placeholder:""},null,8,["modelValue"]),k.value?(a(),n("div",ze,F(k.value),1)):_("",!0),e("div",Te,[e("label",Re,[D(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=o=>s.value=o),value:"principal",class:"hidden"},null,512),[[L,s.value]]),e("div",Qe,[s.value==="principal"?(a(),n("div",Oe)):_("",!0)]),t[6]||(t[6]=e("span",null,"Principal",-1))]),e("label",Xe,[D(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=o=>s.value=o),value:"secundario",class:"hidden"},null,512),[[L,s.value]]),e("div",Ze,[s.value==="secundario"?(a(),n("div",Ge)):_("",!0)]),t[7]||(t[7]=e("span",null,"Secundário",-1))])]),e("div",He,[f(H,{text:"Cancelar",onClick:A}),f(T,{text:"Atualizar",onClick:t[4]||(t[4]=o=>x("Atualizar esse Produto?"))})])],32),f(R,{isVisible:C.value,motivo:V.value,onConfirm:y,onCancel:P},null,8,["isVisible","motivo"])]))])):_("",!0)]),_:1}))}},Ke=q(Je,[["__scopeId","data-v-18b55c08"]]),We={key:0,class:"w-full h-[200px] bg-white rounded-[20px] p-12 relative overflow-y-auto scrollbar-hidden"},Ye={class:"relative w-full h-full"},eo={class:"flex items-center"},oo={class:"w-1/1 flex justify-center"},so=["src"],to={class:"w-2/3 pl-5"},ao={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},lo={class:"w-1/1"},ro={key:1,class:"mt-4"},no={__name:"DetalhesProduto",props:{produto:{type:Object,required:!0}},setup(d){const r=N(),u=d,h=l(!1),g=l(""),c=l(!1),s=l(!1),i=l(!1),v=()=>{l.dadosProduto.fetchProduto()},k=async()=>{var x,y,P,U;try{i.value=!0;const w=await M.delete(`/api/excluir-produto/${u.produto.id}`);console.log(w.data.message),r.success("Produto deletado com sucesso!"),Q.Inertia.visit("/insumos")}catch(w){r.error("Erro ao deletar o produto:",((y=(x=w.response)==null?void 0:x.data)==null?void 0:y.error)||w.message),console.error("Erro ao deletar o produto:",((U=(P=w.response)==null?void 0:P.data)==null?void 0:U.error)||w.message)}finally{i.value=!1}},$=()=>{s.value=!s.value,c.value=!1},b=x=>{g.value=x,h.value=!0},C=()=>{k(),h.value=!1},V=()=>{h.value=!1},I=()=>{s.value=!1,c.value=!0};return(x,y)=>(a(),n(S,null,[s.value?_("",!0):(a(),n("div",We,[e("div",Ye,[e("div",eo,[e("div",oo,[e("img",{src:d.produto.profile_photo||"/storage/images/no_imagem.svg",alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-lg"},null,8,so)]),e("div",to,[e("div",ao,F(d.produto.nome||"N/A"),1)]),e("div",lo,[f(R,{isVisible:h.value,motivo:g.value,onConfirm:C,onCancel:V},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-4 right-4 cursor-pointer",onClick:y[0]||(y[0]=P=>b("Excluir esse produto?"))},y[1]||(y[1]=[e("img",{src:"/storage/images/delete.svg",alt:"Deletar Usuário",class:"w-6 h-6"},null,-1)]))])])])])),d.produto.id&&!s.value?(a(),n("div",ro,[f(te,{text:"Editar insumos","icon-path":"/storage/images/border_color.svg",onClick:$,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):_("",!0),s.value?(a(),E(Ke,{key:2,ref:"dadosProduto",isVisible:s.value,produto:d.produto,onDadosProduto:v,onCancelar:I},null,8,["isVisible","produto"])):_("",!0)],64))}},io=q(no,[["__scopeId","data-v-237de369"]]),uo={class:"flex flex-col gap-4"},co={class:"absolute bottom-4 right-4"},po={key:1,class:"mt-4"},_o={__name:"Index",setup(d){const r=l(null),u=l(!1),h=()=>{u.value=!u.value},g=()=>{c(),u.value=!1},c=()=>{var v;(v=l("listarUnidades").value)==null||v.fetchUnidades()},s=i=>{i&&typeof i=="object"?r.value=i:console.warn("Dados inválidos recebidos no evento produto-selecionado:",i)};return(i,v)=>(a(),E(J,null,{default:z(()=>[f(oe(se),{title:"Insumos"}),e("div",{class:"grid grid-cols-1 gap-4 mt-3 sm:grid-cols-2 overflow-hidden card-container h-full overflow-y-scroll",onScrollPassive:v[0]||(v[0]=()=>{})},[e("div",null,[f(he,{ref:"listarUnidades",onUnidadeCadastrada:c,onProdutoSelecionado:s},null,512)]),e("div",uo,[u.value?(a(),n("div",po,[f(Se,{isVisible:u.value,onUnidadeCadastrada:g,onCancelar:h},null,8,["isVisible"])])):(a(),n(S,{key:0},[r.value?(a(),E(io,{key:0,produto:r.value},null,8,["produto"])):_("",!0),e("div",co,[f(T,{text:"Cadastrar insumo",iconPath:"/storage/images/arrow_left_alt.svg",onClick:h})])],64))])],32)]),_:1}))}};export{_o as default};
