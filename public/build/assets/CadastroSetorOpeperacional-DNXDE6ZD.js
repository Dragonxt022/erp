import{l as $,d as t,q as L,e as v,f as U,o as g,a,b as n,F as B,p as y,k as P}from"./app-D8B-quTi.js";import{I as O}from"./InputModel-CB03lLOF.js";import{_ as S}from"./LabelModel-B0qadcnX.js";import{B as z}from"./ButtonPrimaryMedio-DvxW02fI.js";import{B as M}from"./ButtonCancelar-P4jo61Dz.js";import{C as N}from"./ConfirmDialog-DRSw55jS.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={key:0,class:"sidebar-container"},T={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},A={class:"flex justify-center mb-6 relative group"},X=["src"],G={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},H={class:"form-buttons"},J={__name:"EditarSetorOperacional",props:{isVisible:{type:Boolean,required:!0},informacoes:{type:Object,required:!0}},emits:["cancelar"],setup(b,{emit:C}){const c=$(),x=b,u=C,i=t(""),r=t(""),d=t(""),m=t(null),h=t(null),p=t(""),f=t(!1),k=t("");L(()=>x.informacoes,s=>{s&&(i.value=s.id||"",r.value=s.name||"",d.value=s.profile_photo_url||"")},{immediate:!0});const _=()=>{f.value=!0},w=()=>{f.value=!1,D()},I=()=>{f.value=!1},V=()=>{h.value.click()},F=s=>{const o=s.target.files[0];o&&(m.value=o,d.value=URL.createObjectURL(o))},j=()=>{m.value=null,d.value=""},E=()=>{u("cancelar")},D=async()=>{var s,o;if(!i.value||!r.value){p.value="Por favor, preencha todos os campos obrigatórios.";return}try{const e=new FormData;e.append("id",i.value),e.append("name",r.value),m.value&&e.append("profile_photo",m.value),e.append("_method","PUT"),await P.post(`/api/admin-operacionais/${i.value}`,e,{headers:{"Content-Type":"multipart/form-data"}}),c.success("Informações atualizadas com sucesso!"),u("cancelar")}catch(e){c.error("Erro ao atualizar as informações."),p.value=((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||"Erro ao atualizar as informações.",console.error("Erro na atualização:",e)}};return(s,o)=>b.isVisible?(g(),v("div",R,[a("div",T,[a("form",null,[a("div",A,[a("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:V},[d.value?(g(),v(B,{key:0},[a("img",{src:d.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,X),a("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:o[0]||(o[0]=y(()=>{},["stop"]))},[a("button",{onClick:y(j,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(g(),v("img",G))]),a("input",{type:"file",ref_key:"fileInput",ref:h,accept:"image/*",class:"hidden",onChange:F},null,544)]),n(S,{text:"Nome do setor operacional"}),n(O,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e),placeholder:"Entregas"},null,8,["modelValue"]),n(N,{isVisible:f.value,motivo:k.value,onConfirm:w,onCancel:I},null,8,["isVisible","motivo"]),a("div",H,[n(M,{class:"w-full mr-2",text:"Cancelar",onClick:E}),n(z,{class:"w-full",text:"Atualizar",onClick:_})])])])])):U("",!0)}},de=q(J,[["__scopeId","data-v-6be0fdad"]]),K={key:0,class:"sidebar-container"},Q={key:0,class:"loading-overlay"},W={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},Y={class:"flex justify-center mb-6 relative group"},Z=["src"],ee={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},oe={class:"form-buttons"},ae={__name:"CadastroSetorOpeperacional",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(b,{emit:C}){const c=$(),x=C,u=t(""),i=t(""),r=t(null),d=t(null),m=t(""),h=t(!1),p=t(!1),f=t(""),k=()=>{_(),x("cancelar")},_=()=>{u.value="",m.value=""},w=()=>u.value?!0:(c.error("Por favor, preencha todos os campos obrigatórios."),m.value="Por favor, preencha todos os campos obrigatórios.",!1),I=async()=>{var o,e;if(w())try{h.value=!0;const l=new FormData;l.append("name",u.value),r.value&&l.append("profile_photo",r.value);const te=await P.post("/api/admin-operacionais",l,{headers:{"Content-Type":"multipart/form-data"}});c.success("setor cadastrada com sucesso!"),_()}catch(l){c.error("Erro ao cadastrar setor."),m.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"Erro ao cadastrar setor."}finally{h.value=!1}},V=o=>{f.value=o,p.value=!0},F=()=>{I(),p.value=!1},j=()=>{p.value=!1},E=()=>{var o;(o=d.value)==null||o.click()},D=()=>{i.value="",r.value=null,c.info("Imagem removida.")},s=o=>{const e=o.target.files[0];if(e){r.value=e;const l=new FileReader;l.onload=()=>{i.value=l.result,c.success("Imagem carregada com sucesso!")},l.readAsDataURL(e)}};return(o,e)=>b.isVisible?(g(),v("div",K,[h.value?(g(),v("div",Q,e[3]||(e[3]=[a("div",{class:"spinner"},null,-1)]))):U("",!0),a("div",W,[a("form",null,[a("div",Y,[a("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:E},[i.value?(g(),v(B,{key:0},[a("img",{src:i.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Z),a("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:e[0]||(e[0]=y(()=>{},["stop"]))},[a("button",{onClick:y(D,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(g(),v("img",ee))]),a("input",{type:"file",ref_key:"fileInput",ref:d,accept:"image/*",class:"hidden",onChange:s},null,544)]),n(S,{text:"Nome do setor operacional"}),n(O,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l),placeholder:"Entregas"},null,8,["modelValue"]),n(N,{isVisible:p.value,motivo:f.value,onConfirm:F,onCancel:j},null,8,["isVisible","motivo"]),a("div",oe,[n(M,{class:"w-full mr-2",text:"Cancelar",onClick:k}),n(z,{class:"w-full",text:"Cadastrar",onClick:e[2]||(e[2]=l=>V("Criar novo setor?"))})])])])])):U("",!0)}},me=q(ae,[["__scopeId","data-v-47f6ee8c"]]);export{me as C,de as E};
