import{l as N,d as o,e as l,o as t,f as k,c as j,a as e,t as $,b as n,F as C,h as D,j as X,i as P,m as T,v as Z,k as G,p as O,x as H,w as q,u as K,Z as W,s as Y,n as ee}from"./app-CJV0vEcG.js";import{A as se}from"./LayoutFranqueadora-zFHzqElD.js";import{B as L}from"./ButtonPrimaryMedio-DNLSf_CT.js";import{B as ae}from"./ButtonEditeMedio-Dg7GrUK9.js";import{E as oe}from"./EditarSetorOperacional-DAeVWctj.js";import{C as te}from"./ConfirmDialog-DY1d8jnC.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as M}from"./InputModel-CnkbUehz.js";import{_ as A}from"./LabelModel-r8Ik1D7U.js";import{B as le}from"./ButtonCancelar-DDfF7pm8.js";const ie={key:0},re={class:"w-full h-[180px] bg-white rounded-[20px] p-12 mb-4"},ne={class:"flex items-center"},de={class:"w-1/1 flex justify-center"},ce=["src"],ue={class:"w-2/3 pl-5"},me={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},pe={class:"w-1/1"},ve={class:"w-full h-[280px] bg-white rounded-[20px] px-12 pt-5 relative overflow-hidden"},fe={class:"max-h-[220px] overflow-y-auto pr-2 scrollbar-hide"},ge={class:"list-decimal list-inside space-y-2 mt-4 text-gray-800 text-[15px] font-['Figtree']"},_e={key:1,class:"mt-4"},he={__name:"DetalhesGestaoOperacional",props:{informacoes:{type:Object,required:!0}},setup(_){const h=N(),r=_,v=o(!1),m=o("");o("");const x=g=>{m.value=g,v.value=!0},p=o(!1),b=()=>{d(),v.value=!1},i=()=>{v.value=!1},d=async()=>{try{p.value=!0;const g=await axios.delete(`/api/admin-operacionais/${r.informacoes.id}`);h.success("setor excluído com sucesso!"),p.value=!1}catch(g){console.error("Erro ao excluir setor:",g),h.error("Erro ao excluir setor."),p.value=!1}},c=g=>g?`/storage/${g}`:"/storage/images/no-imagem.jpg",y=o(!1),f=o(!1),F=()=>{o.dadosinformacoes.fetchinformacoes()},E=()=>{f.value=!f.value,y.value=!1},S=()=>{f.value=!1,y.value=!0};return(g,w)=>(t(),l(C,null,[f.value?k("",!0):(t(),l("div",ie,[e("div",re,[e("div",ne,[e("div",de,[e("img",{src:c(_.informacoes.profile_photo),alt:"Imagem",class:"w-20 h-20 p-2 rounded-md shadow-lg"},null,8,ce)]),e("div",ue,[e("div",me,$(_.informacoes.name||"N/A"),1)]),e("div",pe,[n(te,{isVisible:v.value,motivo:m.value,onConfirm:b,onCancel:i},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-[110px] right-[70px] cursor-pointer",onClick:w[0]||(w[0]=V=>x("excluir setor operacional"))},w[1]||(w[1]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-6 h-6"},null,-1)]))])])]),w[2]||(w[2]=e("div",{class:"text-gray-700 text-[15px] font-semibold font-['Figtree'] mt-2 mb-2"}," Etapas da atividade ",-1)),e("div",ve,[e("div",fe,[e("ul",ge,[(t(!0),l(C,null,D(_.informacoes.etapas,(V,U)=>(t(),l("li",{key:V.id,class:"items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},$(V.descricao),1))),128))])])])])),_.informacoes.id&&!f.value?(t(),l("div",_e,[n(ae,{text:"Editar informacoes","icon-path":"/storage/images/border_color.svg",onClick:E,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):k("",!0),f.value?(t(),j(oe,{key:2,ref:"dadosinformacoes",isVisible:f.value,informacoes:_.informacoes,onDadosinformacoes:F,onCancelar:S},null,8,["isVisible","informacoes"])):k("",!0)],64))}},xe=B(he,[["__scopeId","data-v-4436f4cb"]]),ye={class:"search-container relative flex items-center w-full mb-4"},be={class:"card-container"},we=["onClick"],Ce={class:"card-inner"},ke={class:"icon-container"},$e=["src"],Ve={class:"text-container"},Fe={class:"city"},Ee={class:"owner text-gray-500 text-sm"},Ie={__name:"ListarGestaoAtividade",emits:["selecionado"],setup(_,{emit:h}){const r=o([]),v=o(""),m=h,x=async()=>{try{const i=await G.get("/api/atividades");r.value=i.data.data}catch(i){console.error("Erro ao carregar operacionais:",i)}},p=i=>{m("selecionado",i),console.log("Selecionado:",i)},b=X(()=>r.value.filter(i=>i.name.toLowerCase().includes(v.value.toLowerCase())));return P(x),(i,d)=>(t(),l("div",null,[d[2]||(d[2]=e("div",{class:"painel-title"},"Gestão de atividades",-1)),d[3]||(d[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Visualize as atividades dos processos da franquia")],-1)),e("div",ye,[d[1]||(d[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),T(e("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=c=>v.value=c),placeholder:"Buscar uma atividade",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[Z,v.value]])]),e("div",be,[(t(!0),l(C,null,D(b.value,c=>(t(),l("div",{key:c.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:y=>p(c)},[e("div",Ce,[e("div",ke,[e("img",{src:c.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,$e)]),e("div",Ve,[e("div",Fe,$(c.name),1),e("div",Ee,$(c.etapas.length)+" Etapas",1)])])],8,we))),128))])]))}},Ae=B(Ie,[["__scopeId","data-v-d08b3d79"]]),De={key:0,class:"sidebar-container"},Be={key:0,class:"loading-overlay"},Se={key:"listagem",class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},Me={class:"w-full h-full bg-white rounded-[20px] p-12"},je={class:"flex justify-center mb-6 relative group"},Ge=["src"],Le={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Ue={class:"w-full h-full bg-white rounded-[20px] p-12"},Oe={class:"mt-4 space-y-2"},qe=["onClick"],Ne={class:"w-full h-full bg-white rounded-[20px] p-12"},Pe={class:"flex-1"},Te=["value"],ze={class:"relative"},Re={class:"absolute bottom-6 right-6 flex space-x-4 z-10"},Je={__name:"CadastroGestaoAtividade",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(_,{emit:h}){const r=N(),v=h,m=o(""),x=o(""),p=o(null),b=o(null),i=o([]),d=o(null),c=o([]),y=o(""),f=o(""),F=o(""),E=o(!1);P(async()=>{try{const u=await G.get("/api/admin-operacionais");i.value=u.data.data}catch{r.error("Erro ao carregar setores operacionais.")}});const S=()=>{y.value.trim()!==""&&(c.value.push({descricao:y.value}),y.value="")},g=u=>{c.value.splice(u,1)},w=()=>{V(),v("cancelar")},V=()=>{m.value="",F.value=""},U=()=>m.value?!0:(r.error("Por favor, preencha todos os campos obrigatórios."),F.value="Por favor, preencha todos os campos obrigatórios.",!1),z=async()=>{var u,s;if(U())try{E.value=!0;const a=new FormData;a.append("name",m.value),a.append("setor_id",d.value),a.append("tempo_estimated",parseInt(f.value)),a.append("etapas",JSON.stringify(c.value)),p.value&&a.append("profile_photo",p.value);const I=await G.post("/api/admin-operacionais",a,{headers:{"Content-Type":"multipart/form-data"}});r.success("setor cadastrada com sucesso!"),V()}catch(a){r.error("Erro ao cadastrar setor."),F.value=((s=(u=a.response)==null?void 0:u.data)==null?void 0:s.message)||"Erro ao cadastrar setor."}finally{E.value=!1}},R=()=>{var u;(u=b.value)==null||u.click()},J=()=>{x.value="",p.value=null,r.info("Imagem removida.")},Q=u=>{const s=u.target.files[0];if(s){p.value=s;const a=new FileReader;a.onload=()=>{x.value=a.result,r.success("Imagem carregada com sucesso!")},a.readAsDataURL(s)}};return(u,s)=>(t(),l(C,null,[_.isVisible?(t(),l("div",De,[E.value?(t(),l("div",Be,s[5]||(s[5]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),s[9]||(s[9]=e("div",{class:"painel-title"},"Cadastrar nova atividade",-1)),s[10]||(s[10]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastre atividades para os processos da franquia")],-1)),u.showView?k("",!0):(t(),l("div",Se,[e("div",Me,[e("div",je,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:R},[x.value?(t(),l(C,{key:0},[e("img",{src:x.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Ge),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:s[0]||(s[0]=O(()=>{},["stop"]))},[e("button",{onClick:O(J,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),l("img",Le))]),e("input",{type:"file",ref_key:"fileInput",ref:b,accept:"image/*",class:"hidden",onChange:Q},null,544)]),n(A,{text:"Nome da atividade"}),n(M,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),placeholder:"Limpar camarão"},null,8,["modelValue"])]),e("div",Ue,[n(A,{text:"Etapas da atividade"}),n(M,{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=a=>y.value=a),placeholder:"Descreva a etapa aqui..."},null,8,["modelValue"]),e("ul",Oe,[(t(!0),l(C,null,D(c.value,(a,I)=>(t(),l("li",{key:I,class:"flex justify-between items-center bg-gray-100 p-3 rounded"},[e("span",null,$(I+1)+". "+$(a.descricao),1),e("button",{onClick:Ye=>g(I),class:"text-red-600 font-bold hover:text-red-800"},s[6]||(s[6]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-4 h-4"},null,-1)]),8,qe)]))),128))]),n(L,{onClick:S,text:"Adicionar nova etapa",class:"w-full mt-3"})]),e("div",Ne,[e("div",Pe,[n(A,{text:"Setor"}),T(e("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>d.value=a),class:"w-full py-2 bg-[#F3F8F3] border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[s[7]||(s[7]=e("option",{disabled:"",value:""},"Selecione um setor",-1)),(t(!0),l(C,null,D(i.value,a=>(t(),l("option",{key:a.id,value:a.id},$(a.name),9,Te))),128))],512),[[H,d.value]])]),n(A,{text:"Tempo estimado em minutos"}),e("div",ze,[n(M,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=a=>f.value=a),placeholder:"0"},null,8,["modelValue"]),s[8]||(s[8]=e("span",{class:"absolute right-[130px] top-1/2 transform -translate-y-1/2 text-gray-500"},"minutos",-1))])])]))])):k("",!0),e("div",Re,[n(le,{text:"Cancelar",onClick:w}),n(L,{onClick:z,text:"Cadastrar atividade"})])],64))}},Qe=B(Je,[["__scopeId","data-v-4842a5d3"]]),Xe={key:"listagem",class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},Ze={class:"flex flex-col gap-4"},He={class:"absolute bottom-4 right-4"},Ke={key:"cadastro",class:"mt-4"},We={__name:"GestaoAtividades",setup(_){const h=o(null),r=o(!1),v=o(!1),m=()=>{r.value=!r.value},x=()=>{p(),r.value=!1},p=()=>{o.listar.fetch()},b=i=>{h.value=i};return(i,d)=>(t(),j(se,null,{default:q(()=>[n(K(W),{title:"Gestão de Atividades"}),n(Y,{name:"fade",mode:"out-in"},{default:q(()=>[r.value?(t(),l("div",Ke,[n(Qe,{isVisible:r.value,onCadastrar:x,onCancelar:m},null,8,["isVisible"])])):(t(),l("div",Xe,[e("div",null,[n(Ae,{ref:"listar",onCadastrar:p,onSelecionado:b},null,512)]),e("div",Ze,[h.value?(t(),j(xe,{key:0,informacoes:h.value},null,8,["informacoes"])):k("",!0),e("div",He,[n(L,{text:"Cadastrar nova atividade",iconPath:"/storage/images/arrow_left_alt.svg",onClick:m,class:ee({hidden:v.value})},null,8,["class"])])])]))]),_:1})]),_:1}))}},cs=B(We,[["__scopeId","data-v-a089e238"]]);export{cs as default};
