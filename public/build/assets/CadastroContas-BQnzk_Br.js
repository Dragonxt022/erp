import{l as I,d as r,y as M,k as q,o as i,e as d,a,b as n,j as m,s as D,F as B,g as j,t as u,h as g,B as O,v as w,n as T,f as z}from"./app-B6DhRNyQ.js";import{_ as v}from"./LabelModel-BAHYgCaB.js";import{B as P}from"./ButtonPrimaryMedio-pUH7thsG.js";import{B as G}from"./ButtonCancelar-CLgex1Rm.js";import{C as H}from"./ConfirmDialog-BWUYffP0.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"mt-5"},Q={class:"grid grid-cols-2 gap-8"},W={class:"bg-white rounded-lg p-12"},X={class:"flex gap-4"},Y={class:"flex-1 mb-8"},Z=["value"],ee={key:0,class:"text-red-500 text-sm"},ae={class:"flex-1"},te={key:0,class:"text-red-500 text-sm"},oe={key:0,class:"text-red-500 text-sm"},se={class:"col-span-1 row-span-2 mt-12"},re={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ne={key:0,class:"text-red-500 text-sm"},le={key:1,class:"text-red-500 text-sm"},ie={class:"bg-white rounded-lg p-12"},de={class:"mt-2"},ue={class:"mt-2"},ce={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},ve={key:0,class:"text-red-500 text-sm"},me={class:"form-buttons"},ge={__name:"CadastroContas",emits:["voltar"],setup(pe,{emit:N}){const h=I(),l=r(null),c=r(""),p=r(""),f=r(""),b=r(1),x=r(null),y=r(""),_=r(!1),V=r(""),k=r([]),o=r({}),E=N;M(async()=>{try{const s=await q.get("/api/categorias/lista");k.value=s.data}catch(s){console.error("Erro ao carregar categorias:",s)}});const S=async()=>{o.value={},x.value||(o.value.categoria="A categoria é obrigatória"),l.value||(o.value.valor="O valor é obrigatório"),p.value||(o.value.emitidaEm="A data emitida é obrigatória"),f.value||(o.value.vencimento="A data de vencimento é obrigatória"),c.value.length>200&&(o.value.descricao="A descrição deve ter no máximo 200 caracteres");const s=parseFloat(l.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(s)?o.value.valor="O valor informado não é válido":l.value=s,Object.keys(o.value).length===0)try{const e=new FormData;if(e.append("categoria_id",x.value),e.append("valor",l.value),e.append("emitida_em",p.value),e.append("vencimento",f.value),e.append("dias_lembrete",b.value),e.append("descricao",c.value),y.value){const C=document.querySelector('input[type="file"]');C.files.length>0&&e.append("arquivo",C.files[0])}const t=await q.post("/api/cursto/contas-a-pagar",e);h.success("Conta cadastrada com sucesso",t.data),console.log("Conta cadastrada com sucesso",t.data),F()}catch(e){h.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",e)}},U=s=>{V.value=s,_.value=!0},$=()=>{S(),_.value=!1},A=()=>{_.value=!1},L=s=>{h.info("Arquivo selecionado com sucesso");const e=s.target.files[0];e&&(y.value=e.name)},R=s=>{let e=s.replace(/\D/g,"");e||(e="0");const t=e.slice(0,-2)||"0",C=e.slice(-2);return`R$ ${Number(t).toLocaleString("pt-BR")},${C}`},F=()=>{x.value=null,l.value=null,p.value="",f.value="",b.value=1,c.value="",y.value="",E("voltar")};return(s,e)=>(i(),d(B,null,[e[13]||(e[13]=a("div",{class:"painel-title"},"Cadastrar Contas",-1)),e[14]||(e[14]=a("div",{class:"painel-subtitle"},[a("p",null,"Cadastrar contas a pagar da sua operação")],-1)),a("div",K,[a("div",Q,[a("div",W,[a("div",X,[a("div",Y,[e[9]||(e[9]=a("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),n(v,{text:"Nome da Conta"}),m(a("select",{id:"categoria","onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[e[8]||(e[8]=a("option",{value:"",selected:""},"Selecione uma categoria",-1)),(i(!0),d(B,null,j(k.value,t=>(i(),d("option",{key:t.id,value:t.id},u(t.nome),9,Z))),128))],512),[[D,x.value]]),o.value.categoria?(i(),d("span",ee,u(o.value.categoria),1)):g("",!0)]),a("div",ae,[n(v,{text:"Lembrar - me"}),m(a("select",{id:"dias_lembrete","onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},e[10]||(e[10]=[O('<option value="1" data-v-e0ba62fa>1 dia antes</option><option value="3" data-v-e0ba62fa>3 dias antes</option><option value="5" data-v-e0ba62fa>5 dias antes</option><option value="15" data-v-e0ba62fa>15 dias antes</option><option value="30" data-v-e0ba62fa>30 dias antes</option>',5)]),512),[[D,b.value]]),o.value.diasLembrete?(i(),d("span",te,u(o.value.diasLembrete),1)):g("",!0)])]),n(v,{text:"Valor"}),m(a("input",{id:"valor","onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t),onInput:e[3]||(e[3]=t=>l.value=R(l.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[w,l.value]]),o.value.valor?(i(),d("span",oe,u(o.value.valor),1)):g("",!0),a("div",se,[a("div",re,[n(v,{text:"Data emitida"}),m(a("input",{type:"date",id:"emitida_em","onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[w,p.value]]),o.value.emitidaEm?(i(),d("span",ne,u(o.value.emitidaEm),1)):g("",!0),e[11]||(e[11]=a("div",{class:"mt-12"},null,-1)),n(v,{text:"Data de vencimento"}),m(a("input",{type:"date",id:"vencimento","onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[w,f.value]]),o.value.vencimento?(i(),d("span",le,u(o.value.vencimento),1)):g("",!0)])])]),a("div",ie,[n(v,{text:"Informações adicionais"}),m(a("textarea",{id:"descricao","onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[w,c.value]]),a("p",{class:T(["text-right text-xs mt-1",{"text-gray-500":c.value.length<=200,"text-red-500":c.value.length>200}])},u(c.value.length)+"/200 caracteres ",3),a("div",de,[n(v,{text:"Enviar boleto/fatura"}),a("div",ue,[a("label",ce,[z(u(y.value||"Selecionar Arquivo")+" ",1),e[12]||(e[12]=a("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),a("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:L},null,32),o.value.arquivo?(i(),d("span",ve,u(o.value.arquivo),1)):g("",!0)])]),a("div",me,[n(G,{class:"w-full",text:"Cancelar",onClick:F}),n(P,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:e[7]||(e[7]=t=>U("Cadastrar um nova conta?"))})])])])]),n(H,{isVisible:_.value,motivo:V.value,onConfirm:$,onCancel:A},null,8,["isVisible","motivo"])],64))}},we=J(ge,[["__scopeId","data-v-e0ba62fa"]]);export{we as C};
