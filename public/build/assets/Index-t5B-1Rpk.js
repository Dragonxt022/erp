import{d as l,j as U,i as B,c as D,o as x,w as N,b as _,a as e,u as R,Z as I,e as v,f as F,g as n,m as p,v as u,F as T,h as O,t as g,k as H}from"./app-Bh3-sTA_.js";import{L as P}from"./LayoutFranqueado-BDfelG1B.js";import{_ as S}from"./CalendarSimples-Dp8_Br95.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Ddy5XIz5.js";import"./dayjs.min-Dl4P1pFo.js";const K={class:"flex justify-between items-center mb-4"},Q={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Z={class:"flex items-center space-x-2"},G={class:"text-gray-900 text-[17px] font-semibold"},J={class:"mt-8"},W={class:"bg-white rounded-lg shadow"},X={class:"bg-[#164110] grid grid-cols-7 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},Y={key:0,class:"grid grid-cols-7 gap-4 py-2 px-6 bg-gray-50"},ee={class:"space-y-1"},se={class:"flex items-center text-gray-900 font-semibold"},te=["src"],oe={class:"text-gray-900 font-semibold"},ae={class:"text-gray-900 font-medium"},le={class:"text-gray-600 font-semibold"},re={class:"text-gray-500 font-semibold"},ne={key:1,class:"text-center mt-4"},ie={__name:"Index",setup(de){const C=l("0,00"),k=l("0,00"),q=l("0,00"),h=l("0,00"),V=l("0,00"),L=l("0,00"),b=l([]),M=l(!1),$=l(null),i=l(null),m=l(!0),f=l(!1),o=l({operacao:"",quantidade:"",quando:"",item:"",responsavel:""}),y={Entrada:{icon:"/storage/images/arrow_back_verde.svg",label:"Entrada"},Retirada:{icon:"/storage/images/arrow_back_red.svg",label:"Retirada"},Ajuste:{icon:"/storage/images/icon_ajustes.svg",label:"Ajuste"}},j=U(()=>b.value.filter(a=>(o.value.operacao===""||a.operacao.toLowerCase().includes(o.value.operacao.toLowerCase()))&&(o.value.quantidade===""||String(a.quantidade).includes(o.value.quantidade))&&(o.value.item===""||a.item.toLowerCase().includes(o.value.item.toLowerCase()))&&(o.value.responsavel===""||a.responsavel.toLowerCase().includes(o.value.responsavel.toLowerCase()))&&(o.value.quando===""||a.data.toLowerCase().includes(o.value.quando.toLowerCase()))).sort((a,s)=>i.value?m.value?a[i.value]>s[i.value]?1:-1:a[i.value]<s[i.value]?1:-1:0)),d=a=>{i.value===a?m.value=!m.value:(i.value=a,m.value=!0)},A=()=>{f.value=!f.value},E=a=>{console.log("Filtros atualizados:",a),w(a.startDate,a.endDate)},w=async(a=null,s=null)=>{try{let t="/api/estoque/incial";const c=[];a&&c.push(`start_date=${a}`),s&&c.push(`end_date=${s}`),c.length>0&&(t+=`?${c.join("&")}`);const r=(await H.get(t)).data;r.saldo_estoque_inicial?(b.value=Array.isArray(r.historicoMovimentacoes)?r.historicoMovimentacoes:Object.values(r.historicoMovimentacoes),C.value=r.start_date||"não informado",k.value=r.end_date||"não informado",q.value=r.saldo_estoque_inicial||"0,00",h.value=r.entradas_durante_periodo||"0,00",V.value=r.saldo_estoque_final||"0,00",L.value=r.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(t){console.error("Erro ao buscar dados analíticos:",t)}};return B(()=>{w()}),(a,s)=>(x(),D(P,null,{default:N(()=>[_(R(I),{title:"Controle de Resíduos"}),e("div",K,[s[15]||(s[15]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de Resíduos "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe o aproveitamento de insumos ")])],-1)),e("div",Q,[e("div",Z,[s[14]||(s[14]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",G,[_(S,{onUpdateFilters:E})])])])]),s[25]||(s[25]=e("div",{class:"mt-5"},[e("div",{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4"},[e("div",{class:"bg-white rounded-lg p-7"},[e("p",{class:"font-semibold text-[#6d6d6d] text-[15px] leading-none"}," Aproveitamento médio "),e("div",{class:"flex items-center -mt-9"},[e("span",{class:"font-bold text-[120.01px] text-[#1d5915] tracking-wider"}," 72% "),e("svg",{class:"w-[40px] h-[40px] ml-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("polygon",{points:"12,2 22,20 2,20",fill:"#6DB631"})])]),e("div",{class:"flex items-center gap-2 text-[#6d6d6d] text-[15px] font-semibold -mt-9"},[e("img",{src:"/storage/images/trending_up.svg",alt:"Filtro",class:"w-5 h-5"}),e("p",null,"0% coletando informações")])]),e("div",{class:"bg-white rounded-lg p-7"},[e("h3",{class:"font-semibold text-[#6d6d6d] text-[15px] mb-2"}," Eficiência por colaborador "),e("div",{class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},[e("div",{class:"compromissos-container flex flex-col gap-2 overflow-hidden"},[e("div",{class:"flex justify-between items-center bg-[#F5FAF4] px-5 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},[e("div",{class:"flex items-center gap-2"},[e("p",{class:"text-[14px] font-medium text-gray-900"},"#1"),e("p",{class:"text-sm text-[#262a27]"},"Nome do usuário")]),e("div",{class:"text-[17px] object-contain transition-transform transform hover:scale-105"}," 72% ")])])])])])],-1)),e("div",J,[e("div",{class:"flex items-center justify-between mb-4"},[s[17]||(s[17]=e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),e("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:A},s[16]||(s[16]=[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),e("div",W,[e("div",X,[e("span",{onClick:s[0]||(s[0]=t=>d("aproveitamento")),class:"px-5 cursor-pointer flex items-center gap-2"},s[18]||(s[18]=[n(" APROVEITAMENTO "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[1]||(s[1]=t=>d("calibre")),class:"cursor-pointer flex items-center gap-2"},s[19]||(s[19]=[n(" Calibre "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[2]||(s[2]=t=>d("peso_lipo")),class:"flex items-center gap-2 cursor-pointer"},s[20]||(s[20]=[n(" peso limpo "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[3]||(s[3]=t=>d("peso_bruto")),class:"cursor-pointer flex items-center gap-2"},s[21]||(s[21]=[n(" peso bruto "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),e("span",{onClick:s[4]||(s[4]=t=>d("desperdicio")),class:"cursor-pointer flex items-center gap-2"},s[22]||(s[22]=[n(" desperdício "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[5]||(s[5]=t=>d("quanto")),class:"cursor-pointer flex items-center gap-2"},s[23]||(s[23]=[n(" Quando "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[6]||(s[6]=t=>d("responsavel")),class:"cursor-pointer flex items-center gap-2"},s[24]||(s[24]=[n(" Responsável "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),f.value?(x(),v("div",Y,[p(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.aproveitamento=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.aproveitamento]]),p(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.calibre=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.calibre]]),p(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.peso_lipo=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.peso_lipo]]),p(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.peso_bruto=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.peso_bruto]]),p(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>o.value.desperdicio=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.desperdicio]]),p(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>o.value.quando=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.quando]]),p(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>o.value.responsavel=t),type:"text",placeholder:"Filtrar",class:"p-2 border border-gray-300 rounded"},null,512),[[u,o.value.responsavel]])])):F("",!0),e("div",{ref_key:"scrollContainer",ref:$,class:"overflow-y-auto max-h-96 scroll-hidden"},[e("ul",ee,[(x(!0),v(T,null,O(j.value,(t,c)=>(x(),v("li",{key:c,class:"hover:bg-gray-200 grid grid-cols-5 gap-1 px-6 py-2 text-[16px]"},[e("span",se,[e("img",{src:y[t.operacao].icon,alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,te),n(" "+g(y[t.operacao].label),1)]),e("span",oe,g(t.quantidade)+" "+g(t.unidade==="unidade"?"uni":"kg"),1),e("span",ae,g(t.item),1),e("span",le,g(t.data),1),e("span",re,g(t.responsavel),1)]))),128))])],512),M.value?(x(),v("div",ne,"Carregando...")):F("",!0)])])]),_:1}))}},fe=z(ie,[["__scopeId","data-v-4bcd196c"]]);export{fe as default};
