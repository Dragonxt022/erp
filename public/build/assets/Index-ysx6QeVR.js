import{d as c,i as P,e as f,o as g,a as e,f as B,t as r,F as k,h as M,n as S,p as $,ak as j,j as T,c as V,w as I,b as Y,u as N,Z as z,y as U,k as H}from"./app-BXAXZzIC.js";import{L as q}from"./LayoutFranqueado-BexKhhzF.js";import{A as W}from"./AvisoSistemaNovo-CnBqcDRd.js";import{C as R,A as G,p as Q,a as Z,D as J,P as K,B as X,L as ee,R as te,q as se,d as ae,c as oe,e as le,s as ne,f as re,b as ie,i as de}from"./chart-CX66tr7T.js";import{p as ce}from"./chartjs-plugin-datalabels.esm-BFtiKef5.js";import{d as _}from"./dayjs.min-DnxLz6J9.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"relative"},ge={key:0},me={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},fe={class:"flex justify-between items-center mb-3"},xe={class:"font-semibold flex items-center"},ve={class:"ml-[90px]"},be={class:"grid grid-cols-7 gap-1 text-center text-sm"},ye=["onClick"],he={class:"mt-5"},_e={class:"flex items-center space-x-4"},we={class:"flex items-center"},Fe={class:"flex items-center"},Ce={__name:"CalendarFilterDia",setup(E,{emit:w}){const F=w,v=c(!1),u=c(_().subtract(7,"day").startOf("day")),p=c(_().endOf("day")),b=c(_()),i=c(!0),h=["D","S","T","Q","Q","S","S"],A=P(()=>{const a=[],o=u.value.startOf("month"),n=p.value.endOf("month");for(let x=0;x<o.day();x++)a.push({day:"",date:null});for(let x=1;x<=n.date();x++){const L=o.date(x);a.push({day:x,date:L})}return a}),d=c(""),O=()=>{b.value=b.value.subtract(1,"month")},C=a=>a&&(a.isSame(u.value)||a.isSame(p.value)),D=a=>!a||!u.value||!p.value?!1:a.isAfter(u.value,"day")&&a.isBefore(p.value,"day"),l=a=>{a&&(i.value?(u.value=a.startOf("day"),i.value=!1):(p.value=a.endOf("day"),i.value=!0))},t=()=>{m(),v.value=!1},s=()=>{v.value=!v.value},y=()=>{const a=u.value.format("DD-MM-YYYY"),o=p.value.format("DD-MM-YYYY");console.log("Data inicial:",a),console.log("Data final:",o),console.log("Categoria:",d.value),F("update-filters",{startDate:a,endDate:o,periodo:d.value}),v.value=!1},m=()=>{u.value=_().subtract(7,"day").startOf("day"),p.value=_().endOf("day"),d.value=""};return(a,o)=>(g(),f("div",pe,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:s},[e("span",null,[u.value&&p.value?(g(),f("span",ge,r(u.value.format("DD/MM/YYYY"))+" - "+r(p.value.format("DD/MM/YYYY")),1)):B("",!0)])]),v.value?(g(),f("div",me,[e("div",fe,[e("button",{onClick:O,class:"text-indigo-600 hover:underline"},o[3]||(o[3]=[e("img",{src:"/storage/images/arrow_drop_down_circle.svg",alt:"icone drop",class:"w-5 h-5"},null,-1)])),e("span",xe,[e("span",null,r(b.value.format("MMM")),1),e("span",ve,r(b.value.format("YYYY")),1)]),e("button",{onClick:o[0]||(o[0]=(...n)=>a.nextMonsth&&a.nextMonsth(...n)),class:"text-indigo-600 hover:underline"},o[4]||(o[4]=[e("img",{src:"/storage/images/arrow_drop_direita_circle.svg",alt:"icone drop",class:"w-5 h-5"},null,-1)]))]),e("div",be,[(g(),f(k,null,M(h,n=>e("div",{class:"font-semibold text-gray-600",key:n},r(n),1)),64)),(g(!0),f(k,null,M(A.value,(n,x)=>(g(),f("div",{key:x,onClick:L=>l(n.date),class:S(["p-2 rounded-full cursor-pointer",C(n.date)?"bg-[#6db631] text-white":D(n.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},r(n.day),11,ye))),128))]),e("div",he,[e("div",_e,[e("div",we,[$(e("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),class:S(["mr-2",{"text-[#6db631]":d.value==="almoco","border-[#6db631]":d.value==="almoco"}])},null,2),[[j,d.value]]),o[5]||(o[5]=e("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),e("div",Fe,[$(e("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":o[2]||(o[2]=n=>d.value=n),class:S(["mr-2",{"text-[#6db631]":d.value==="janta","border-[#6db631]":d.value==="janta"}])},null,2),[[j,d.value]]),o[6]||(o[6]=e("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:m}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:t}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:y}," OK ")])])])):B("",!0)]))}},De={class:"flex justify-between items-center mb-4"},ke={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Me={class:"flex items-center space-x-2"},Ae={class:"text-gray-900 text-[17px] font-semibold"},Oe={class:"mt-5"},Se={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},Ye={class:"bg-white rounded-lg px-12 py-8"},Be={class:"w-full"},$e={class:"py-3 flex items-center gap-5"},Le=["src","alt"],je={class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},Re={class:"py-3 text-right text-[#262a27] font-semibold"},Ee={class:"w-full h-[60px] bg-[#d2fac3] rounded-bl-[10px] rounded-br-[10px] px-12 flex justify-between items-center"},Pe={class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"},Te={class:"bg-white rounded-lg px-12 py-8"},Ve={class:"mb-4 text-center"},Ie={class:"mt-8"},Ne={class:"bg-white rounded-lg shadow"},ze={ref:"scrollContainer",class:"overflow-y-auto max-h-96 scroll-hidden"},Ue={class:"space-y-2"},He={class:"flex items-center text-gray-900 font-semibold"},qe=["src"],We={class:"text-center text-gray-900 font-semibold"},Ge={class:"text-left text-gray-900 font-medium"},Qe={class:"text-center text-gray-600 font-semibold"},Ze={class:"text-center text-gray-500 font-semibold"},Je={__name:"Index",setup(E){R.register(G,Q,Z,J,K,X,ee,te,se,ae,oe,le,ne,re,ie,de,ce);const w=c([]),F=c(""),v=c([]),u=c([]),p=c([]),b=c([]),i=c("pie");let h=null;const A=l=>{switch(l){case"abertura":case"suprimento":return"/storage/images/arrow_back_verde.svg";case"fechamento":return"/storage/images/thumb_up.svg";case"sangria":return"/storage/images/arrow_back_red.svg";default:return""}},d=l=>{switch(l){case"abertura":return"Abertura";case"fechamento":return"Fechamento";case"suprimento":return"Suprimento";case"sangria":return"Sangria";default:return""}},O=l=>{console.log("Filtros atualizados:",l),C(l.startDate,l.endDate,l.periodo)},C=async(l,t,s)=>{try{const m=(await H.get("/api/analyticos/lista-metodos-pagamentos",{params:{start_date:l,end_date:t,periodo:s||"total"}})).data;w.value=m.metodos,v.value=m.historico,F.value=m.total,p.value=m.grafico.labels,u.value=m.grafico.data,b.value=m.grafico.porcentagem,D()}catch(y){console.error("Erro ao buscar dados:",y)}},D=()=>{const l=document.getElementById("myChart").getContext("2d");h&&h.destroy();const t={type:i.value,data:{labels:p.value,datasets:[{data:u.value,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#F7464A","#FF7F50"],borderColor:i.value==="line"?"#36A2EB":void 0,borderWidth:i.value==="line"||i.value==="bar"?1:0,fill:i.value==="line"}]},options:{plugins:{tooltip:{callbacks:{label:function(s){const y=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.raw),m=b.value[s.dataIndex];return`${s.label}: ${y} (${m})`}}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15,boxWidth:10}},datalabels:{display:!1}},scales:i.value==="bar"||i.value==="line"?{x:{type:"category"},y:{beginAtZero:!0,ticks:{callback:function(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}}}}:void 0}};h=new R(l,t)};return T(()=>{C()}),(l,t)=>(g(),V(q,null,{default:I(()=>[Y(N(z),{title:"Histórico de Caixa"}),e("div",De,[t[2]||(t[2]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Histórico de Caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",ke,[e("div",Me,[t[1]||(t[1]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",Ae,[Y(Ce,{onUpdateFilters:O})])])])]),e("div",Oe,[e("div",Se,[e("div",null,[e("div",Ye,[e("table",Be,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-gray-500 text-left text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Método de pagamento "),e("th",{class:"text-gray-500 text-right text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Valor ")])],-1)),e("tbody",null,[(g(!0),f(k,null,M(w.value,s=>(g(),f("tr",{key:s.nome},[e("td",$e,[s.img_icon?(g(),f("img",{key:0,src:`/${s.img_icon}`,alt:s.nome,class:"w-8 h-8"},null,8,Le)):B("",!0),e("div",je,r(s.nome),1)]),e("td",Re,r(s.valor),1)]))),128))])])]),e("div",Ee,[t[4]||(t[4]=e("div",{class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"}," TOTAL ",-1)),e("div",Pe,r(F.value),1)])]),e("div",null,[e("div",Te,[e("div",Ve,[t[6]||(t[6]=e("label",{for:"chartType",class:"text-gray-700 font-semibold mr-2"}," Tipo de Gráfico: ",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),onChange:D,id:"chartType",class:"border rounded px-2 py-1"},t[5]||(t[5]=[e("option",{value:"pie"},"Pizza (Pie)",-1),e("option",{value:"doughnut"},"Rosquinha (Doughnut)",-1),e("option",{value:"bar"},"Barras (Bar)",-1),e("option",{value:"line"},"Linha (Line)",-1),e("option",{value:"radar"},"Radar",-1),e("option",{value:"polarArea"},"Área Polar (Polar Area)",-1)]),544),[[U,i.value]])]),t[7]||(t[7]=e("canvas",{id:"myChart"},null,-1))])])])]),e("div",Ie,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),e("div",{class:"flex items-center space-x-2"},[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"})])],-1)),e("div",Ne,[t[8]||(t[8]=e("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[e("span",{class:"text-left px-5"},"OPERAÇÃO"),e("span",{class:"text-center"},"VALOR"),e("span",{class:"text-left"},"DATA/HORA"),e("span",{class:"text-center"},"MOTIVO"),e("span",{class:"text-center"},"RESPONSÁVEL")],-1)),e("div",ze,[e("ul",Ue,[(g(!0),f(k,null,M(v.value,s=>(g(),f("li",{key:s.hora,class:"hover:bg-gray-200 grid grid-cols-5 gap-2 px-6 py-3 text-[16px]"},[e("span",He,[e("img",{src:A(s.operacao),alt:"icon",class:"mr-3 w-5 h-5"},null,8,qe),e("span",null,r(d(s.operacao)),1)]),e("span",We,r(s.valor),1),e("span",Ge,r(s.hora),1),e("span",Qe,r(s.motivo),1),e("span",Ze,r(s.responsavel),1)]))),128))])],512)])]),Y(W)]),_:1}))}},lt=ue(Je,[["__scopeId","data-v-4e04aec4"]]);export{lt as default};
