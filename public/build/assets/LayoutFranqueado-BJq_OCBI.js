import{d as q,j as f,i as j,e as n,o as t,a as s,c as F,f as k,w as L,t as b,n as S,u as x,z as A,O as T,q as N,C as R,P as V,p as D,F as C,h as $,b as w,N as H,R as U,k as z,Z as O,r as J}from"./app-DDh7OboO.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"navbar"},W={class:"navbar-content"},Z={class:"navbar-left"},K={class:"navbar-logo"},X=["href"],Y={class:"navbar-right"},ee={key:0,class:"user-info"},se=["src"],ae={class:"user-details"},oe={class:"user-name"},ie={class:"user-location"},te={key:1,class:"user-info loading"},ne={__name:"Navbar",setup(r){const e=q(null),d=f(()=>{var o;return(o=e.value)==null?void 0:o.unidade}),u=f(()=>{var o,i;return((o=e.value)==null?void 0:o.profile_photo_url)||`https://ui-avatars.com/api/?name=${_((i=e.value)==null?void 0:i.name)}&color=7F9CF5&background=EBF4FF`}),_=o=>o?o.split(" ").map(a=>a.charAt(0).toUpperCase()).join(""):"*",g=async()=>{try{const o=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!o.ok)throw new Error("Erro ao carregar perfil do usuário");const i=await o.json();e.value=i.data}catch(o){console.error("Erro ao buscar perfil:",o),e.value=null}};return j(()=>{g()}),(o,i)=>(t(),n("div",Q,[i[3]||(i[3]=s("div",{class:"navbar-background"},null,-1)),s("div",W,[s("div",Z,[s("div",K,[i[1]||(i[1]=s("div",{class:"mr-4"},[s("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[s("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),s("div",null,[s("a",{href:o.route("franqueado.painel")},i[0]||(i[0]=[s("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,X)])])]),s("div",Y,[e.value?(t(),F(x(A),{key:0,href:o.route("franqueado.perfil"),class:S(["user-info",{loading:!e.value}])},{default:L(()=>{var a;return[e.value?(t(),n("div",ee,[s("img",{src:u.value,alt:"Avatar",class:"avatar"},null,8,se),s("div",ae,[s("div",oe,b(e.value.name),1),s("div",ie,b(((a=d.value)==null?void 0:a.cidade)||"Taiksu Franchising"),1)])])):(t(),n("div",te,i[2]||(i[2]=[s("div",{class:"avatar-skeleton"},null,-1),s("div",{class:"user-details-skeleton"},[s("div",{class:"name-skeleton"}),s("div",{class:"location-skeleton"})],-1)])))]}),_:1},8,["href","class"])):k("",!0)])])]))}},re=I(ne,[["__scopeId","data-v-8a82a90b"]]),le={class:"icon"},ue=["src"],ce={class:"label"},de={type:"submit",class:"w-full h-full flex items-center"},me={class:"icon"},ve=["src"],fe={class:"label"},ge={key:2,class:"submenu"},be={class:"label"},_e={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]},requiredPermission:String},setup(r){const e=r,d=T("userPermissions",q({})),u=q(!1),_=f(()=>u.value),g=f(()=>e.link&&/^https?:\/\//.test(e.link)),o=f(()=>g.value?e.link:e.link?route(e.link):"#"),i=f(()=>!e.requiredPermission||d.value[e.requiredPermission]),a=f(()=>e.submenuItems.filter(l=>!l.requiredPermission||d.value[l.requiredPermission])),v=l=>{a.value.length>0&&(l.preventDefault(),c())},c=()=>{u.value=!u.value,y()},m=()=>{const l=localStorage.getItem(`submenu-${e.link}`);l!==null&&(u.value=JSON.parse(l))},y=()=>{localStorage.setItem(`submenu-${e.link}`,JSON.stringify(u.value))},B=f(()=>p.value||e.isActive?"submenu-active":""),E=l=>{const P=window.location.pathname,h=new URL(route(l),window.location.origin).pathname;return P===h},p=f(()=>a.value.some(l=>E(l.link))),G=()=>{e.isLogout&&H.post(route("logout"))};return m(),N(p,()=>{p.value||R(()=>{u.value=!1,y()})}),N(u,()=>{R(()=>y())}),(l,P)=>(t(),n("div",null,[!r.isLogout&&r.link&&i.value?(t(),F(V(g.value?"a":x(A)),{key:0,class:S(["menu-item",[B.value,{active:r.isActive||p.value}]]),href:o.value,target:g.value?"_blank":null,onClick:v},{default:L(()=>[s("div",le,[s("img",{src:r.icon,alt:"icon"},null,8,ue)]),s("div",ce,b(r.label),1),a.value.length>0?(t(),n("div",{key:0,class:S(["right-icon",{"rotate-icon":_.value}])},P[0]||(P[0]=[s("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):k("",!0)]),_:1},8,["class","href","target"])):r.isLogout&&i.value?(t(),n("form",{key:1,onSubmit:D(G,["prevent"]),class:"menu-item"},[s("button",de,[s("div",me,[s("img",{src:r.icon,alt:"icon"},null,8,ve)]),s("div",fe,b(r.label),1)])],32)):k("",!0),a.value.length>0&&(u.value||p.value)?(t(),n("div",ge,[(t(!0),n(C,null,$(a.value,(h,M)=>(t(),n("div",{key:M},[w(x(A),{class:S(["submenu-item",{active:E(h.link)}]),href:l.route(h.link)},{default:L(()=>[s("div",be,b(h.label),1)]),_:2},1032,["href","class"])]))),128))])):k("",!0)]))}},pe=I(_e,[["__scopeId","data-v-bed64f61"]]),he={key:0,class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},ke={__name:"Slidebar",setup(r){const e=q(null),d=q({}),u=async()=>{try{const a=await z.get("/api/navbar-profile");d.value=a.data.data.permissions||{}}catch(a){console.error("Erro ao carregar permissões:",a),d.value={}}};U("userPermissions",d);const _=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Ferramentas",items:[{label:"E-mail",icon:"/storage/images/email.svg",link:"https://arquivos.taiksu.com.br/apps/mail/box/1",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Gestão da loja",items:[{label:"Gestão de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,requiredPermission:"controle_estoque",submenuItems:[{label:"Inventário",link:"franqueado.inventario",requiredPermission:"controle_estoque"},{label:"Saida de estoque",link:"franqueado.controleEstoque",requiredPermission:"controle_saida_estoque"},{label:"Fornecedores",link:"franqueado.fornecedores",requiredPermission:"controle_estoque"},{label:"Novo Pedidos",link:"franqueado.pedidos",requiredPermission:"controle_estoque"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos",requiredPermission:"controle_estoque"}],isActive:!1},{label:"Gestão de resíduos",icon:"/storage/images/delete_branco.svg",link:"franqueado.supervisaoResidos",isLogout:!1,requiredPermission:"gestao_salmao",submenuItems:[{label:"Limpeza de salmão",link:"franqueado.limpesaSalmoes",requiredPermission:"gestao_salmao"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,requiredPermission:"gestao_equipe",submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto",requiredPermission:"gestao_equipe"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento",requiredPermission:"gestao_equipe"}],isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,requiredPermission:"fluxo_caixa",submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos",requiredPermission:"fluxo_caixa"},{label:"Canais de Vendas",link:"franqueado.canaisVendas",requiredPermission:"fluxo_caixa"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa",requiredPermission:"fluxo_caixa"},{label:"Caixa Retroativo",link:"franqueado.caixaRetroativo",requiredPermission:"fluxo_caixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,requiredPermission:"contas_pagar",submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas",requiredPermission:"contas_pagar"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,requiredPermission:"dre",isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}],g=f(()=>_.map(a=>({...a,items:a.items.filter(v=>!v.requiredPermission||d.value[v.requiredPermission]||v.submenuItems&&v.submenuItems.some(c=>!c.requiredPermission||d.value[c.requiredPermission]))})).filter(a=>a.items.length>0));j(async()=>{await u();const a=localStorage.getItem("sidebarScrollPosition");a&&e.value&&(e.value.scrollTop=a)});const o=()=>{e.value&&localStorage.setItem("sidebarScrollPosition",e.value.scrollTop)},i=a=>{const v=window.location.pathname,c=new URL(a,window.location.origin).pathname;return v===c||v.startsWith(c)};return(a,v)=>(t(),n("div",null,[s("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:e,onScroll:o},[(t(!0),n(C,null,$(g.value,c=>(t(),n("div",{key:c.name,class:"menu-category mb-6"},[c.items.length>0?(t(),n("div",he,b(c.name),1)):k("",!0),(t(!0),n(C,null,$(c.items,m=>(t(),F(pe,{key:m.link||"no-link",label:m.label,icon:m.icon,link:m.link,submenuItems:m.submenuItems,isActive:m.link?i(m.link):!1,isLogout:m.isLogout,requiredPermission:m.requiredPermission},null,8,["label","icon","link","submenuItems","isActive","isLogout","requiredPermission"]))),128))]))),128))],544)]))}},qe=I(ke,[["__scopeId","data-v-a058ccbc"]]),Pe={class:"content"},Se={__name:"LayoutFranqueado",props:{title:String},setup(r){return(e,d)=>(t(),n("div",null,[w(x(O),{title:r.title},null,8,["title"]),w(re),w(qe),s("main",Pe,[J(e.$slots,"default",{},void 0,!0)])]))}},ye=I(Se,[["__scopeId","data-v-d4397c97"]]);export{ye as L};
