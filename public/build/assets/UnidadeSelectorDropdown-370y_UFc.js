import{d as u,i as k,j as U,a1 as C,e as o,o as l,a as e,b as S,t as g,n as i,w as D,f as v,F as N,h as B,x as E,k as I}from"./app-BpJtz6--.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"relative inline-block w-full"},T={class:"flex items-center gap-2"},V={class:"text-gray-900 text-[15px] font-semibold"},z={key:0,class:"absolute z-50 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},F=["onClick"],M={class:"font-semibold text-[15px]"},O={class:"text-xs text-gray-500"},$={key:0,class:"px-4 py-6 text-center text-gray-500 text-sm"},q={key:1,class:"px-4 py-6 text-center text-gray-500 text-sm"},A={__name:"UnidadeSelectorDropdown",props:{defaultUnitId:{type:[Number,String],default:null}},emits:["unit-selected"],setup(m,{emit:x}){const y=m,b=x,r=u(!1),d=u([]),a=u(y.defaultUnitId),c=u(!1),w=k(()=>{if(a.value===null)return"Todas as Unidades";const s=d.value.find(t=>t.id===a.value);return s?s.cidade:"Selecione uma unidade"}),h=()=>{r.value=!r.value},f=s=>{a.value=s,r.value=!1,b("unit-selected",s)},_=async()=>{c.value=!0;try{const s=await I.get("/api/admin/painel/unidades");d.value=s.data.unidades||[]}catch(s){console.error("Erro ao buscar unidades:",s)}finally{c.value=!1}},p=s=>{s.target.closest(".relative")||(r.value=!1)};return U(()=>{_(),document.addEventListener("click",p)}),C(()=>{document.removeEventListener("click",p)}),(s,t)=>(l(),o("div",L,[e("button",{onClick:h,class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-left flex items-center justify-between hover:border-gray-400 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500"},[e("div",T,[t[1]||(t[1]=e("img",{src:"/storage/images/storefrontb.svg",alt:"Unidade",class:"w-5 h-5"},null,-1)),e("span",V,g(w.value),1)]),(l(),o("svg",{class:i(["w-5 h-5 text-gray-500 transition-transform",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),S(E,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:D(()=>[r.value?(l(),o("div",z,[e("button",{onClick:t[0]||(t[0]=n=>f(null)),class:i(["w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center gap-3",{"bg-green-50 text-green-700":a.value===null,"text-gray-700":a.value!==null}])},[e("div",{class:i(["w-2 h-2 rounded-full",{"bg-green-500":a.value===null,"bg-gray-300":a.value!==null}])},null,2),t[3]||(t[3]=e("div",null,[e("p",{class:"font-semibold text-[15px]"},"Todas as Unidades"),e("p",{class:"text-xs text-gray-500"},"Dados agregados")],-1))],2),t[4]||(t[4]=e("div",{class:"border-t border-gray-200"},null,-1)),(l(!0),o(N,null,B(d.value,n=>(l(),o("button",{key:n.id,onClick:G=>f(n.id),class:i(["w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors flex items-center gap-3",{"bg-green-50 text-green-700":a.value===n.id,"text-gray-700":a.value!==n.id}])},[e("div",{class:i(["w-2 h-2 rounded-full",{"bg-green-500":a.value===n.id,"bg-gray-300":a.value!==n.id}])},null,2),e("div",null,[e("p",M,g(n.cidade),1),e("p",O," ID: "+g(String(n.id).padStart(4,"0")),1)])],10,F))),128)),d.value.length===0&&!c.value?(l(),o("div",$," Nenhuma unidade encontrada ")):v("",!0),c.value?(l(),o("div",q," Carregando unidades... ")):v("",!0)])):v("",!0)]),_:1})]))}},K=j(A,[["__scopeId","data-v-7896dc25"]]);export{K as U};
