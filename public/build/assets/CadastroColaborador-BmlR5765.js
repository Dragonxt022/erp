import{m as K,d as r,j as U,k as $,e as s,o as n,a as t,f as y,b as i,p as c,F,q as j,y as O,h as P,t as p,v as k}from"./app-BaHRZf8E.js";import{_ as v}from"./LabelModel-BaPyoy92.js";import{B as Q}from"./ButtonPrimaryMedio-mRdDnHO4.js";import{B as W}from"./ButtonCancelar-B5Cgmuik.js";import{C as Y}from"./ConfirmDialog-9vWeNa6w.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={key:0,class:"loading-overlay"},ae={class:"mt-5"},oe={class:"bg-white rounded-lg p-12"},te={class:"flex gap-8 mb-8"},le={class:"flex flex-col items-center"},re={class:"relative group"},se=["src"],ne={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ie={class:"flex flex-col flex-1"},ue=["value"],de={class:"flex flex-col flex-1"},ce=["value"],pe={key:0,class:"text-red-500 text-sm"},ve={key:1,class:"text-red-500 text-sm"},me={key:2,class:"text-red-500 text-sm"},fe={key:3,class:"text-red-500 text-sm"},ge={class:"form-buttons"},be={__name:"CadastroColaborador",emits:["voltar"],setup(xe,{emit:R}){const C=K(),E=R,m=r(""),f=r(""),u=r(""),d=r(""),g=r(null),_=r(null),b=r(""),x=r(null),D=r(null),V=r([]),B=r([]),l=r({}),w=r(!1),S=r(""),h=r(!1);U(async()=>{try{const a=await $.get("/api/usuarios/cargos");V.value=a.data}catch(a){console.error("Erro ao carregar cargos:",a)}}),U(async()=>{try{const a=await $.get("/api/usuarios/operacionais");B.value=a.data.data}catch(a){console.error("Erro ao carregar setores:",a)}});const M=a=>{let e=a.replace(/\D/g,"");return e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d)/,"$1.$2"),e=e.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),e},N=a=>{let e=a.replace(/\D/g,"");e||(e="0");const o=e.slice(0,-2)||"0",H=e.slice(-2);return`R$ ${Number(o).toLocaleString("pt-BR")},${H}`},L=a=>{let e=a.replace("R$","").trim();return e=e.replace(".","").replace(",","."),parseFloat(e)},T=async()=>{if(l.value={},m.value||(l.value.nome="O nome é obrigatório"),f.value||(l.value.email="O email é obrigatório"),u.value||(l.value.cpf="O CPF é obrigatório"),d.value||(l.value.salario="O salário é obrigatório"),g.value||(l.value.cargo="O cargo é obrigatório"),_.value||(l.value.setor="O setor operacional é obrigatório"),Object.keys(l.value).length===0)try{h.value=!0;const a=new FormData;a.append("name",m.value),a.append("email",f.value),a.append("cpf",u.value),a.append("salario",L(d.value)),a.append("cargo_id",g.value),a.append("setor_id",_.value),x.value&&a.append("profile_photo",x.value);const e=await $.post("/api/usuarios/cadastrar-colaborador",a,{headers:{"Content-Type":"multipart/form-data"}});C.success("Colaborador cadastrado com sucesso!"),console.log("Colaborador cadastrado:",e.data),I()}catch(a){C.error("Erro ao cadastrar colaborador"),console.error("Erro ao cadastrar colaborador:",a)}finally{h.value=!1}},q=a=>{S.value=a,w.value=!0},z=()=>{T(),w.value=!1},A=()=>{w.value=!1},J=()=>{var a;(a=D.value)==null||a.click()},X=()=>{b.value="",x.value=null,C.info("Imagem removida.")},G=a=>{const e=a.target.files[0];if(e){x.value=e;const o=new FileReader;o.onload=()=>{b.value=o.result,C.success("Imagem carregada com sucesso!")},o.readAsDataURL(e)}},I=()=>{m.value="",f.value="",u.value="",d.value="",g.value=null,b.value="",x.value=null,E("voltar")};return(a,e)=>(n(),s(F,null,[e[13]||(e[13]=t("div",{class:"painel-title"},"Cadastrar colaborador",-1)),e[14]||(e[14]=t("div",{class:"painel-subtitle"},[t("p",null,"Crie uma nova conta para acessar a sua loja")],-1)),h.value?(n(),s("div",ee,e[10]||(e[10]=[t("div",{class:"spinner"},null,-1)]))):y("",!0),t("div",ae,[t("div",oe,[t("div",te,[t("div",le,[t("div",re,[t("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden",onClick:J},[b.value?(n(),s(F,{key:0},[t("img",{src:b.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,se),t("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:e[0]||(e[0]=j(()=>{},["stop"]))},[t("button",{onClick:j(X,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(n(),s("img",ne))]),t("input",{type:"file",ref_key:"fileInput",ref:D,accept:"image/*",class:"hidden",onChange:G},null,544)])]),t("div",ie,[i(v,{text:"Cargo",class:"mb-2"}),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),class:"w-full h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[e[11]||(e[11]=t("option",{value:"",disabled:"",selected:""},"Selecione um cargo",-1)),(n(!0),s(F,null,P(V.value,o=>(n(),s("option",{key:o.id,value:o.id,class:"text-base font-semibold"},p(o.nome),9,ue))),128))],512),[[O,g.value]])]),t("div",de,[i(v,{text:"Setor operacional",class:"mb-2"}),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>_.value=o),class:"w-full h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[e[12]||(e[12]=t("option",{value:"",disabled:"",selected:""},"Selecione um setor",-1)),(n(!0),s(F,null,P(B.value,o=>(n(),s("option",{key:o.id,value:o.id,class:"text-base font-semibold"},p(o.name),9,ce))),128))],512),[[O,_.value]])])]),i(v,{text:"Nome Completo"}),c(t("input",{id:"nome","onUpdate:modelValue":e[3]||(e[3]=o=>m.value=o),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"João Silva Souza"},null,512),[[k,m.value]]),l.value.nome?(n(),s("span",pe,p(l.value.nome),1)):y("",!0),i(v,{text:"E-mail"}),c(t("input",{id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>f.value=o),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:`usuario@email.com
`},null,512),[[k,f.value]]),l.value.email?(n(),s("span",ve,p(l.value.email),1)):y("",!0),i(v,{text:"CPF"}),c(t("input",{id:"cpf","onUpdate:modelValue":e[5]||(e[5]=o=>u.value=o),onInput:e[6]||(e[6]=o=>u.value=M(u.value)),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"000.000.000-00",maxlength:"14"},null,544),[[k,u.value]]),l.value.cpf?(n(),s("span",me,p(l.value.cpf),1)):y("",!0),i(v,{text:"Salário"}),c(t("input",{id:"salario","onUpdate:modelValue":e[7]||(e[7]=o=>d.value=o),onInput:e[8]||(e[8]=o=>d.value=N(d.value)),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 1.600,00"},null,544),[[k,d.value]]),l.value.salario?(n(),s("span",fe,p(l.value.salario),1)):y("",!0),t("div",ge,[i(W,{class:"w-full",text:"Cancelar",onClick:I}),i(Q,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:e[9]||(e[9]=o=>q("Cadastrar um novo colaborador?"))})])])]),i(Y,{isVisible:w.value,motivo:S.value,onConfirm:z,onCancel:A},null,8,["isVisible","motivo"])],64))}},he=Z(be,[["__scopeId","data-v-3205afb1"]]);export{he as C};
