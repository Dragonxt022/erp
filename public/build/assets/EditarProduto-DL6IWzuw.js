import{P as k,R as pe,l as ve,d as S,m as xe,k as _e,o as h,c as he,w as ye,e as w,a as o,f as Te,t as y,p as qe,F as je,g as Se,j as we,u as Oe,v as ke,b as Re,h as Ie,q as Ee}from"./app-C7pfRHd-.js";import{B as Ne}from"./ButtonCancelar-CExHJCf0.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";var N,X;function de(){if(X)return N;X=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return N=e,N}var L,J;function Ce(){if(J)return L;J=1;var e=typeof k=="object"&&k&&k.Object===Object&&k;return L=e,L}var C,K;function ce(){if(K)return C;K=1;var e=Ce(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return C=n,C}var D,Y;function De(){if(Y)return D;Y=1;var e=ce(),t=function(){return e.Date.now()};return D=t,D}var F,Z;function Fe(){if(Z)return F;Z=1;var e=/\s/;function t(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return F=t,F}var G,ee;function Ge(){if(ee)return G;ee=1;var e=Fe(),t=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return G=n,G}var B,te;function le(){if(te)return B;te=1;var e=ce(),t=e.Symbol;return B=t,B}var V,re;function Be(){if(re)return V;re=1;var e=le(),t=Object.prototype,n=t.hasOwnProperty,a=t.toString,d=e?e.toStringTag:void 0;function p(c){var l=n.call(c,d),f=c[d];try{c[d]=void 0;var r=!0}catch{}var m=a.call(c);return r&&(l?c[d]=f:delete c[d]),m}return V=p,V}var M,ne;function Ve(){if(ne)return M;ne=1;var e=Object.prototype,t=e.toString;function n(a){return t.call(a)}return M=n,M}var P,ie;function Me(){if(ie)return P;ie=1;var e=le(),t=Be(),n=Ve(),a="[object Null]",d="[object Undefined]",p=e?e.toStringTag:void 0;function c(l){return l==null?l===void 0?d:a:p&&p in Object(l)?t(l):n(l)}return P=c,P}var A,oe;function Pe(){if(oe)return A;oe=1;function e(t){return t!=null&&typeof t=="object"}return A=e,A}var U,ae;function Ae(){if(ae)return U;ae=1;var e=Me(),t=Pe(),n="[object Symbol]";function a(d){return typeof d=="symbol"||t(d)&&e(d)==n}return U=a,U}var W,se;function Ue(){if(se)return W;se=1;var e=Ge(),t=de(),n=Ae(),a=NaN,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function f(r){if(typeof r=="number")return r;if(n(r))return a;if(t(r)){var m=typeof r.valueOf=="function"?r.valueOf():r;r=t(m)?m+"":m}if(typeof r!="string")return r===0?r:+r;r=e(r);var g=p.test(r);return g||c.test(r)?l(r.slice(2),g?2:8):d.test(r)?a:+r}return W=f,W}var $,ue;function We(){if(ue)return $;ue=1;var e=de(),t=De(),n=Ue(),a="Expected a function",d=Math.max,p=Math.min;function c(l,f,r){var m,g,_,v,i,s,b=0,T=!1,q=!1,R=!0;if(typeof l!="function")throw new TypeError(a);f=n(f)||0,e(r)&&(T=!!r.leading,q="maxWait"in r,_=q?d(n(r.maxWait)||0,f):_,R="trailing"in r?!!r.trailing:R);function I(u){var x=m,j=g;return m=g=void 0,b=u,v=l.apply(j,x),v}function fe(u){return b=u,i=setTimeout(O,f),T?I(u):v}function me(u){var x=u-s,j=u-b,Q=f-x;return q?p(Q,_-j):Q}function z(u){var x=u-s,j=u-b;return s===void 0||x>=f||x<0||q&&j>=_}function O(){var u=t();if(z(u))return H(u);i=setTimeout(O,me(u))}function H(u){return i=void 0,R&&m?I(u):(m=g=void 0,v)}function be(){i!==void 0&&clearTimeout(i),b=0,m=s=g=i=void 0}function ge(){return i===void 0?v:H(t())}function E(){var u=t(),x=z(u);if(m=arguments,g=this,s=u,x){if(i===void 0)return fe(s);if(q)return clearTimeout(i),i=setTimeout(O,f),I(s)}return i===void 0&&(i=setTimeout(O,f)),v}return E.cancel=be,E.flush=ge,E}return $=c,$}var $e=We();const ze=pe($e),He={key:0,class:"sidebar-container"},Qe={key:0,class:"loading-overlay"},Xe={key:1},Je={class:"w-full h-[80%] bg-white rounded-[20px] p-12"},Ke={class:"relative w-full h-full"},Ye={class:"flex items-center"},Ze={class:"w-1/1 flex justify-center"},et=["src"],tt={class:"w-2/3 pl-5"},rt={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},nt={class:"text-[#6db631] text-[25px] font-bold font-['Figtree'] mt-3 tracking-tight"},it={class:"mt-5"},ot={class:"min-w-full table-auto"},at={class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider TrRedonDireita"},st={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},ut={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},dt={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},ct=["onUpdate:modelValue","onInput"],lt={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},ft={class:"flex justify-left mt-12"},mt={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar"],setup(e,{emit:t}){const n=ve(),a=e,d=t,p=S(""),c=S(""),l=S(!1),f=S(!1),r=S("");xe(()=>a.produto,i=>{i&&(p.value=i.nome||"",c.value=i.categoria||"")},{immediate:!0});const m=i=>i?new URL(i,window.location.origin).href:"/storage/images/no_imagem.svg",g=ze(i=>{_e.put(`/api/estoque/estoque/lote/${i.id}`,{quantidade:i.quantidade}).then(s=>{n.success("Quantidade do lote atualizada!")}).catch(s=>{n.error("Erro ao atualizar o lote.")})},1e3),_=i=>{r.value=i,f.value=!0},v=()=>{d("cancelar")};return(i,s)=>(h(),he(Ee,{name:"fade"},{default:ye(()=>[e.isVisible?(h(),w("div",He,[l.value?(h(),w("div",Qe,s[1]||(s[1]=[o("div",{class:"spinner"},null,-1)]))):(h(),w("div",Xe,[o("div",Je,[o("div",Ke,[o("div",Ye,[o("div",Ze,[o("img",{src:m(e.produto.profile_photo),alt:"Foto do Produto",class:"w-20 h-20 rounded-md shadow-lg"},null,8,et)]),o("div",tt,[o("div",rt,[Te(y(e.produto.nome||"N/A")+" ",1),o("div",nt,y(e.produto.unidadeDeMedida==="a_granel"&&e.produto.valor_pago_por_quilo_lote?e.produto.valor_pago_por_quilo_lote:e.produto.valor_total_lote),1)])])])])]),o("form",{onSubmit:s[0]||(s[0]=qe(b=>_("Atualizar este produto?"),["prevent"]))},[o("div",it,[o("table",ot,[o("thead",null,[o("tr",null,[s[2]||(s[2]=o("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider TrRedonEsquerda"}," entrada ",-1)),s[3]||(s[3]=o("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider"}," Fornecedor ",-1)),s[4]||(s[4]=o("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider"}," qtd ",-1)),o("th",at,y(e.produto.unidadeDeMedida==="unitario"?"v. unit":"v. kg"),1)])]),o("tbody",null,[(h(!0),w(je,null,Se(e.produto.lotes,b=>(h(),w("tr",{key:b.id},[o("td",st,y(b.data),1),o("td",ut,y(b.fornecedor),1),o("td",dt,[we(o("input",{"onUpdate:modelValue":T=>b.quantidade=T,type:"number",min:"0",class:"border rounded-lg px-2 py-1 w-[75px] h-[32px] text-center",onInput:T=>Oe(g)(b)},null,40,ct),[[ke,b.quantidade]])]),o("td",lt,y(b.preco_unitario),1)]))),128))])])]),o("div",ft,[Re(Ne,{text:"Voltar",onClick:v})])],32)]))])):Ie("",!0)]),_:1}))}},vt=Le(mt,[["__scopeId","data-v-9ad6d994"]]);export{vt as E};
