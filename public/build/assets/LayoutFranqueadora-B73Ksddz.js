import{d as y,i as S,j as D,a6 as H,e as n,o as t,a as e,c as N,f as _,a3 as T,F as x,h as A,n as I,t as g,w as $,u as L,a2 as P,k as B,s as z,a5 as F,q as j,b as q,a7 as G,Q as O,g as U,Z as R,r as Z}from"./app-DAiSBrZd.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"navbar"},Q={class:"navbar-content"},W={class:"navbar-left"},K={class:"navbar-logo"},X=["href"],Y={class:"navbar-right"},ee={class:"notification-container"},ae={key:0,class:"notification-badge"},se={key:0,class:"notification-tray"},te={class:"notification-header"},oe={class:"notification-list"},ne={key:0,class:"notification-loading"},ie={key:1,class:"no-notifications"},le=["onClick"],re={class:"notification-icon-type"},ce={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},de={key:2,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ve={class:"notification-content"},me={class:"notification-title"},fe={class:"notification-message"},ge={class:"notification-time"},he={key:0,class:"user-info"},ke=["src"],be={class:"user-details"},pe={class:"user-name"},_e={class:"user-location"},we={key:1,class:"user-info loading"},ye={__name:"Navbar",setup(i){const o=y(null),u=S(()=>{var s;return(s=o.value)==null?void 0:s.unidade}),c=y([]),w=y(!1),f=y(!1),C=S(()=>c.value.filter(s=>s.lida===0).length),b=S(()=>{var s,a;return((s=o.value)==null?void 0:s.profile_photo_url)||`https://ui-avatars.com/api/?name=${d((a=o.value)==null?void 0:a.name)}&color=7F9CF5&background=EBF4FF`}),d=s=>s?s.split(" ").map(r=>r.charAt(0).toUpperCase()).join(""):"*",h=async()=>{try{const s=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error("Erro ao carregar perfil do usuário");const a=await s.json();o.value=a.data}catch(s){console.error("Erro ao buscar perfil:",s),o.value=null}},l=async()=>{w.value=!0;try{const s=await fetch("/api/notificacoes",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error("Erro ao carregar notificações");const a=await s.json();c.value=a.data}catch(s){console.error("Erro ao buscar notificações:",s),c.value=[]}finally{w.value=!1}},v=async s=>{try{if((await B.post(`/api/notificacoes/${s}/ler`)).status===200){const r=c.value.findIndex(M=>M.id===s);r!==-1&&(c.value[r].lida=1,c.value[r].lida_em=new Date().toISOString())}}catch(a){console.error("Erro ao marcar notificação como lida:",a)}},E=async()=>{try{(await B.post("/api/notificacoes/ler-todas")).status===200&&c.value.forEach(a=>{a.lida=1,a.lida_em=new Date().toISOString()})}catch(s){console.error("Erro ao marcar todas notificações como lidas:",s)}},m=s=>{s.stopPropagation(),f.value=!f.value,f.value&&l()},p=s=>{const a=document.querySelector(".notification-container");a&&!a.contains(s.target)&&(f.value=!1)};let k;return D(()=>{h(),l(),document.addEventListener("click",p),k=setInterval(()=>{f.value||l()},3e5)}),H(()=>{document.removeEventListener("click",p),clearInterval(k)}),(s,a)=>(t(),n("div",J,[a[9]||(a[9]=e("div",{class:"navbar-background"},null,-1)),e("div",Q,[e("div",W,[e("div",K,[a[1]||(a[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:s.route("franqueado.painel")},a[0]||(a[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,X)])])]),e("div",Y,[e("div",ee,[e("div",{class:"notification-icon",onClick:m},[a[2]||(a[2]=T('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1a7823b4><mask id="mask0_4631_13059" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24" data-v-1a7823b4><rect width="24" height="24" fill="#D9D9D9" data-v-1a7823b4></rect></mask><g mask="url(#mask0_4631_13059)" data-v-1a7823b4><path d="M2.40039 20.4V18H4.80039V9.6C4.80039 7.94 5.30039 6.465 6.30039 5.175C7.30039 3.885 8.60039 3.04 10.2004 2.64V1.8C10.2004 1.3 10.3754 0.875 10.7254 0.525C11.0754 0.175 11.5004 0 12.0004 0C12.5004 0 12.9254 0.175 13.2754 0.525C13.6254 0.875 13.8004 1.3 13.8004 1.8V2.64C15.4004 3.04 16.7004 3.885 17.7004 5.175C18.7004 6.465 19.2004 7.94 19.2004 9.6V18H21.6004V20.4H2.40039ZM12.0004 24C11.3404 24 10.7754 23.765 10.3054 23.295C9.83539 22.825 9.60039 22.26 9.60039 21.6H14.4004C14.4004 22.26 14.1654 22.825 13.6954 23.295C13.2254 23.765 12.6604 24 12.0004 24ZM7.20039 18H16.8004V9.6C16.8004 8.28 16.3304 7.15 15.3904 6.21C14.4504 5.27 13.3204 4.8 12.0004 4.8C10.6804 4.8 9.55039 5.27 8.61039 6.21C7.67039 7.15 7.20039 8.28 7.20039 9.6V18Z" fill="#6DB631" data-v-1a7823b4></path></g></svg>',1)),C.value>0?(t(),n("div",ae)):_("",!0)]),f.value?(t(),n("div",se,[e("div",te,[a[3]||(a[3]=e("h3",null,"Notificações",-1)),c.value.length>0?(t(),n("span",{key:0,onClick:E,class:"mark-all-read"},"Marcar todas como lidas")):_("",!0)]),e("div",oe,[w.value?(t(),n("div",ne,a[4]||(a[4]=[e("div",{class:"notification-skeleton"},null,-1),e("div",{class:"notification-skeleton"},null,-1)]))):c.value.length===0?(t(),n("div",ie," Nenhuma notificação no momento ")):(t(!0),n(x,{key:2},A(c.value,r=>(t(),n("div",{key:r.id,class:I(["notification-item",{unread:r.lida===0}]),onClick:M=>v(r.id)},[e("div",re,[r.tipo==="info"?(t(),n("svg",ce,a[5]||(a[5]=[e("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z",fill:"#6DB631"},null,-1)]))):r.tipo==="alerta"?(t(),n("svg",ue,a[6]||(a[6]=[e("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-7v2h2v-2h-2zm0-8v6h2V7h-2z",fill:"#FF9800"},null,-1)]))):(t(),n("svg",de,a[7]||(a[7]=[e("path",{d:"M4 19h16v2H4v-2zm5-4h11v2H9v-2zm-5-4h16v2H4v-2zm5-4h11v2H9V7zM4 3h16v2H4V3z",fill:"#6DB631"},null,-1)])))]),e("div",ve,[e("div",me,g(r.titulo),1),e("div",fe,g(r.mensagem),1),e("div",ge,g(r.tempo),1)])],10,le))),128))])])):_("",!0)]),o.value?(t(),N(L(P),{key:0,href:s.route("franqueadora.perfil"),class:I(["user-info",{loading:!o.value}])},{default:$(()=>{var r;return[o.value?(t(),n("div",he,[e("img",{src:b.value,alt:"Avatar",class:"avatar"},null,8,ke),e("div",be,[e("div",pe,g(o.value.name),1),e("div",_e,g(((r=u.value)==null?void 0:r.cidade)||"Taiksu Franchising"),1)])])):(t(),n("div",we,a[8]||(a[8]=[e("div",{class:"avatar-skeleton"},null,-1),e("div",{class:"user-details-skeleton"},[e("div",{class:"name-skeleton"}),e("div",{class:"location-skeleton"})],-1)])))]}),_:1},8,["href","class"])):_("",!0)])])]))}},Se=V(ye,[["__scopeId","data-v-1a7823b4"]]),Ce={class:"icon"},Ie=["src"],qe={class:"label"},xe={type:"submit",class:"w-full h-full flex items-center"},Ae={class:"icon"},Le=["src"],Ve={class:"label"},$e={key:2,class:"submenu"},Pe={class:"label"},Ne={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]}},setup(i){const o=i,u=y(!1),c=S(()=>u.value),w=m=>{o.submenuItems&&o.submenuItems.length>0&&(m.preventDefault(),f())},f=()=>{u.value=!u.value,b()},C=()=>{const m=localStorage.getItem(`submenu-${o.link}`);m!==null&&(u.value=JSON.parse(m))},b=()=>{localStorage.setItem(`submenu-${o.link}`,JSON.stringify(u.value))},d=S(()=>l.value||o.isActive?"submenu-active":""),h=m=>{const p=window.location.pathname,k=new URL(route(m),window.location.origin).pathname;return p===k},l=S(()=>o.submenuItems.some(m=>h(m.link))),v=()=>{o.isLogout&&G.post(route("logout.sair"))};return C(),z(l,()=>{l.value||F(()=>{u.value=!1,b()})}),z(u,()=>{F(()=>{b()})}),(m,p)=>(t(),n("div",null,[!i.isLogout&&i.link?(t(),N(L(P),{key:0,class:I(["menu-item",[d.value,{active:i.isActive||l.value}]]),href:i.link||"#",onClick:w},{default:$(()=>[e("div",Ce,[e("img",{src:i.icon,alt:"icon"},null,8,Ie)]),e("div",qe,g(i.label),1),i.submenuItems&&i.submenuItems.length>0?(t(),n("div",{key:0,class:I(["right-icon",{"rotate-icon":c.value}])},p[0]||(p[0]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):_("",!0)]),_:1},8,["class","href"])):(t(),n("form",{key:1,onSubmit:j(v,["prevent"]),class:"menu-item"},[e("button",xe,[e("div",Ae,[e("img",{src:i.icon,alt:"icon"},null,8,Le)]),e("div",Ve,g(i.label),1)])],32)),i.submenuItems&&i.submenuItems.length>0&&(u.value||l.value)?(t(),n("div",$e,[(t(!0),n(x,null,A(i.submenuItems,(k,s)=>(t(),n("div",{key:s},[q(L(P),{class:I(["submenu-item",{active:h(k.link)}]),href:m.route(k.link)},{default:$(()=>[e("div",Pe,g(k.label),1)]),_:2},1032,["href","class"])]))),128))])):_("",!0)]))}},Ee=V(Ne,[["__scopeId","data-v-c2d58d42"]]),Me={class:"category-title flex items-center gap-2"},Be={key:0,class:"bg-green-600 text-white text-[9px] px-1.5 py-0.5 rounded font-bold uppercase tracking-tighter ml-1"},ze={__name:"Slidebar",setup(i){const o=y(null);D(()=>{const d=localStorage.getItem("sidebarScrollPosition");d&&o.value&&(o.value.scrollTop=d)});const u=()=>{o.value&&localStorage.setItem("sidebarScrollPosition",o.value.scrollTop)},c=d=>{const h=window.location.pathname,l=new URL(d,window.location.origin).pathname;return h===l||h.startsWith(l)},f=O().props.auth.user||{},C=f.franqueado&&f.colaborador!=1,b=[{name:"",items:[{label:"Visão Geral",icon:"/storage/images/insert_chart.svg",link:"franqueadora.painel",isLogout:!1}]},{name:"Analíticos",items:[{label:"Métricas",icon:"/storage/images/insert_chart.svg",link:"franqueadora.analytics.dre",isLogout:!1,submenuItems:[{label:"DRE Gerencial",link:"franqueadora.analytics.dre",visible:C},{label:"Caixas",link:"franqueadora.analytics.faturamento",visible:!0}].filter(d=>d.visible!==!1),isActive:!1}]},{name:"Gestão da rede",items:[{label:"Franqueados",icon:"/storage/images/person.svg",link:"franqueadora.franqueados",isLogout:!1},{label:"Produtividade",icon:"/storage/images/skillet.svg",link:"franqueadora.produtividade.geral",isLogout:!1,submenuItems:[{label:"Visão Geral",link:"franqueadora.produtividade.geral"},{label:"Gestão de atividades",link:"franqueadora.GestaoAtividades"},{label:"Setores operacionais",link:"franqueadora.SetorOperacionais"},{label:"Pontuação por critério",link:"franqueadora.PontuaCriterio"}],isActive:!1},{label:"Unidades",icon:"/storage/images/storefront.svg",link:"franqueadora.unidades",isLogout:!1}]},{name:"Parâmetros da franquia",items:[{label:"Fornecedores",icon:"/storage/images/handshake_branca.svg",link:"franqueadora.fornecedores",isLogout:!1},{label:"Insumos",icon:"/storage/images/insumos_nova.svg",link:"franqueadora.insumos",isLogout:!1},{label:"Inspetor",icon:"/storage/images/inspecionador.svg",link:"franqueadora.inspetor",isLogout:!1},{label:"Caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueadora.metodosPagamentos",isLogout:!1,submenuItems:[{label:"Métodos de pagamento",link:"franqueadora.metodosPagamentos"},{label:"Canais de Vendas",link:"franqueadora.canaisVendas"}],isActive:!1},{label:"Menu",icon:"/storage/images/bx-menuu.svg",link:"franqueadora.menu",isLogout:!1},{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}];return(d,h)=>(t(),n("div",{class:"sidebar",ref_key:"sidebar",ref:o,onScroll:u},[(t(),n(x,null,A(b,l=>e("div",{key:l.name,class:"menu-category"},[e("div",Me,[U(g(l.name)+" ",1),l.name==="Analíticos"?(t(),n("span",Be," NOVA! ")):_("",!0)]),(t(!0),n(x,null,A(l.items,v=>(t(),N(Ee,{key:v.link||"no-link",label:v.label,icon:v.icon,link:v.link?d.route(v.link):null,submenuItems:v.submenuItems,isActive:v.link?c(d.route(v.link)):!1,isLogout:v.isLogout},null,8,["label","icon","link","submenuItems","isActive","isLogout"]))),128))])),64))],544))}},Fe=V(ze,[["__scopeId","data-v-0e60acc0"]]),De={class:"content"},He={__name:"LayoutFranqueadora",props:{title:String},setup(i){return(o,u)=>(t(),n("div",null,[q(L(R),{title:i.title},null,8,["title"]),q(Se),q(Fe),e("main",De,[Z(o.$slots,"default",{},void 0,!0)])]))}},Ge=V(He,[["__scopeId","data-v-bd0a65dc"]]);export{Ge as A};
