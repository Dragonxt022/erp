import{d as l,i as U,j as D,c as N,o as x,w as S,b as C,a as t,u as B,Z as I,t as r,e as m,f as h,g as i,p,v as c,F as T,h as O,k as H}from"./app-BpJtz6--.js";import{L as P}from"./LayoutFranqueado-Dw886fCe.js";import{_ as Q}from"./CalendarSimples2-CC1UZry7.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CENYjK0l.js";import"./pt-br-BhvyQGt6.js";const K={class:"flex justify-between items-center mb-4"},Z={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},G={class:"flex items-center space-x-2"},J={class:"text-gray-900 text-[17px] font-semibold"},W={class:"mt-5"},X={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Y={class:"bg-white rounded-lg p-7"},ee={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},te={class:"bg-white rounded-lg p-7"},se={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},oe={class:"bg-white rounded-lg p-7"},ae={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},le={class:"mt-8"},re={class:"bg-white rounded-lg shadow"},ne={class:"bg-[#164110] grid grid-cols-7 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},ie={key:0,class:"grid grid-cols-7 gap-4 py-2 px-6 bg-gray-50"},de={class:"space-y-1"},ue={class:"flex items-center text-gray-900 font-semibold"},pe=["src"],ce={class:"text-gray-900 font-semibold"},ge={class:"text-gray-900 font-medium"},xe={class:"text-gray-900 font-semibold"},ve={class:"text-gray-900 font-semibold"},me={class:"text-gray-600 font-semibold"},fe={class:"text-gray-500 font-semibold"},_e={key:1,class:"text-center mt-4"},be={__name:"Index",setup(ye){const V=l("0,00"),A=l("0,00"),_=l("0,00"),$=l("0,00"),b=l("0,00"),y=l("0,00"),w=l([]),j=l(!1),E=l(null),d=l(null),v=l(!0),f=l(!1),o=l({operacao:"",quantidade:"",quando:"",item:"",preco_unitario:"",valor_total:"",responsavel:""}),F={Entrada:{icon:"/storage/images/arrow_back_verde.svg",label:"Entrada"},Retirada:{icon:"/storage/images/arrow_back_red.svg",label:"Retirada"},Saida:{icon:"/storage/images/arrow_back_red.svg",label:"Saída"},Ajuste:{icon:"/storage/images/icon_ajustes.svg",label:"Ajuste"},"Ajuste - Exclusão":{icon:"/storage/images/arrow_back_red.svg",label:"Ajuste - Exclusão"},"Ajuste - Adição":{icon:"/storage/images/arrow_back_verde.svg",label:"Ajuste - Adição"},"Ajuste - Redução":{icon:"/storage/images/arrow_back_red.svg",label:"Ajuste - Redução"}},L=U(()=>w.value.filter(a=>(o.value.operacao===""||a.operacao.toLowerCase().includes(o.value.operacao.toLowerCase()))&&(o.value.quantidade===""||String(a.quantidade).includes(o.value.quantidade))&&(o.value.item===""||a.item.toLowerCase().includes(o.value.item.toLowerCase()))&&(o.value.preco_unitario===""||String(a.preco_unitario).includes(o.value.preco_unitario))&&(o.value.valor_total===""||String(a.valor_total).includes(o.value.valor_total))&&(o.value.responsavel===""||a.responsavel.toLowerCase().includes(o.value.responsavel.toLowerCase()))&&(o.value.quando===""||a.data.toLowerCase().includes(o.value.quando.toLowerCase()))).sort((a,e)=>d.value?v.value?a[d.value]>e[d.value]?1:-1:a[d.value]<e[d.value]?1:-1:0)),u=a=>{d.value===a?v.value=!v.value:(d.value=a,v.value=!0)},M=()=>{f.value=!f.value},R=a=>{console.log("Filtros atualizados:",a),k(a.startDate,a.endDate)},k=async(a=null,e=null)=>{try{let s="/api/estoque/incial";const g=[];a&&g.push(`start_date=${a}`),e&&g.push(`end_date=${e}`),g.length>0&&(s+=`?${g.join("&")}`);const n=(await H.get(s)).data;n.saldo_estoque_inicial?(w.value=Array.isArray(n.historicoMovimentacoes)?n.historicoMovimentacoes:Object.values(n.historicoMovimentacoes),V.value=n.start_date||"não informado",A.value=n.end_date||"não informado",_.value=n.saldo_estoque_inicial||"0,00",$.value=n.entradas_durante_periodo||"0,00",b.value=n.itensNoEstoque||"0,00",y.value=n.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(s){console.error("Erro ao buscar dados analíticos:",s)}},q=a=>a==null?"0,00":Number(a).toFixed(2).replace(".",",");return D(()=>{k()}),(a,e)=>(x(),N(P,null,{default:S(()=>[C(B(I),{title:"Controle de estoque"}),t("div",K,[e[15]||(e[15]=t("div",null,[t("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),t("div",{class:"painel-subtitle"},[t("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),t("div",Z,[t("div",G,[e[14]||(e[14]=t("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),t("span",J,[C(Q,{onUpdateFilters:R})])])])]),t("div",W,[t("div",X,[t("div",Y,[e[16]||(e[16]=t("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),t("div",ee," R$ "+r(_.value),1)]),t("div",te,[e[17]||(e[17]=t("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),t("div",se," R$ "+r(b.value),1)]),t("div",oe,[e[18]||(e[18]=t("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," CMV ",-1)),t("div",ae,r(y.value),1)])])]),t("div",le,[t("div",{class:"flex items-center justify-between mb-4"},[e[20]||(e[20]=t("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),t("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:M},e[19]||(e[19]=[t("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),t("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),t("div",re,[t("div",ne,[t("span",{onClick:e[0]||(e[0]=s=>u("operacao")),class:"px-5 cursor-pointer flex items-center gap-2"},e[21]||(e[21]=[i(" OPERAÇÃO "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[1]||(e[1]=s=>u("quantidade")),class:"flex items-center gap-2 cursor-pointer"},e[22]||(e[22]=[i(" QTD. "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[2]||(e[2]=s=>u("item")),class:"cursor-pointer flex items-center gap-2"},e[23]||(e[23]=[i(" Item "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),t("span",{onClick:e[3]||(e[3]=s=>u("preco_unitario")),class:"cursor-pointer flex items-center gap-2"},e[24]||(e[24]=[i(" Valor Unit. "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[4]||(e[4]=s=>u("valor_total")),class:"cursor-pointer flex items-center gap-2"},e[25]||(e[25]=[i(" Valor Total "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[5]||(e[5]=s=>u("quanto")),class:"cursor-pointer flex items-center gap-2"},e[26]||(e[26]=[i(" Quando "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[6]||(e[6]=s=>u("responsavel")),class:"cursor-pointer flex items-center gap-2"},e[27]||(e[27]=[i(" Responsável "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),f.value?(x(),m("div",ie,[p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.operacao=s),type:"text",placeholder:"Filtrar por operação",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.operacao]]),p(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.quantidade=s),type:"text",placeholder:"Filtrar por qtd.",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.quantidade]]),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.item=s),type:"text",placeholder:"Filtrar por item",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.item]]),p(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.value.preco_unitario=s),type:"text",placeholder:"Filtrar por valor unit.",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.preco_unitario]]),p(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.valor_total=s),type:"text",placeholder:"Filtrar por valor total",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.valor_total]]),p(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.quando=s),type:"text",placeholder:"Filtrar por quando",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.quando]]),p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.responsavel=s),type:"text",placeholder:"Filtrar por responsável",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.responsavel]])])):h("",!0),t("div",{ref_key:"scrollContainer",ref:E,class:"overflow-y-auto max-h-96 scroll-hidden"},[t("ul",de,[(x(!0),m(T,null,O(L.value,(s,g)=>(x(),m("li",{key:g,class:"hover:bg-gray-200 grid grid-cols-7 gap-1 px-6 py-2 text-[16px]"},[t("span",ue,[t("img",{src:F[s.operacao].icon,alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,pe),i(" "+r(F[s.operacao].label),1)]),t("span",ce,r(s.quantidade)+" "+r(s.unidade==="unidade"?"uni":"kg"),1),t("span",ge,r(s.item),1),t("span",xe," R$ "+r(q(s.preco_unitario)),1),t("span",ve," R$ "+r(q(s.valor_total)),1),t("span",me,r(s.data),1),t("span",fe,r(s.responsavel),1)]))),128))])],512),j.value?(x(),m("div",_e,"Carregando...")):h("",!0)])])]),_:1}))}},Ae=z(be,[["__scopeId","data-v-f8c51a5f"]]);export{Ae as default};
