import{d as c,j as P,e as f,o as g,a as e,f as B,t as r,F as k,h as M,n as A,m as $,aj as L,i as T,c as V,w as I,b as O,u as N,Z as z,x as U,k as H}from"./app-DEOfEQ61.js";import{L as q}from"./LayoutFranqueado-Dbq0Xqcq.js";import{C as R,A as W,p as G,a as Q,D as Z,P as J,l as K,L as X,R as ee,n as te,o as se,B as ae,k as oe,q as le,s as ne,b as re,i as ie}from"./chart-lMt0pmU3.js";import{p as de}from"./chartjs-plugin-datalabels.esm-BIjjlP_n.js";import{d as y}from"./dayjs.min-D7euKn-l.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"relative"},pe={key:0},ge={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},me={class:"flex justify-between items-center mb-3"},fe={class:"font-semibold flex items-center"},xe={class:"ml-[90px]"},ve={class:"grid grid-cols-7 gap-1 text-center text-sm"},be=["onClick"],he={class:"mt-5"},_e={class:"flex items-center space-x-4"},ye={class:"flex items-center"},we={class:"flex items-center"},Fe={__name:"CalendarFilterDia",setup(E,{emit:w}){const F=w,v=c(!1),u=c(y()),p=c(y()),b=c(y()),i=c(!0),_=["D","S","T","Q","Q","S","S"],S=P(()=>{const a=[],o=u.value.startOf("month"),n=p.value.endOf("month");for(let x=0;x<o.day();x++)a.push({day:"",date:null});for(let x=1;x<=n.date();x++){const j=o.date(x);a.push({day:x,date:j})}return a}),d=c(""),Y=()=>{b.value=b.value.subtract(1,"month")},C=a=>a&&(a.isSame(u.value)||a.isSame(p.value)),D=a=>!a||!u.value||!p.value?!1:a.isAfter(u.value,"day")&&a.isBefore(p.value,"day"),l=a=>{a&&(i.value?(u.value=a.startOf("day"),i.value=!1):(p.value=a.endOf("day"),i.value=!0))},t=()=>{m(),v.value=!1},s=()=>{v.value=!v.value},h=()=>{const a=u.value.format("DD-MM-YYYY"),o=p.value.format("DD-MM-YYYY");console.log("Data inicial:",a),console.log("Data final:",o),console.log("Categoria:",d.value),F("update-filters",{startDate:a,endDate:o,periodo:d.value}),v.value=!1},m=()=>{u.value=y(),p.value=y(),d.value=""};return(a,o)=>(g(),f("div",ue,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:s},[e("span",null,[u.value&&p.value?(g(),f("span",pe,r(u.value.format("DD/MM/YYYY"))+" - "+r(p.value.format("DD/MM/YYYY")),1)):B("",!0)])]),v.value?(g(),f("div",ge,[e("div",me,[e("button",{onClick:Y,class:"text-indigo-600 hover:underline"},o[3]||(o[3]=[e("img",{src:"/storage/images/arrow_drop_down_circle.svg",alt:"icone drop",class:"w-5 h-5"},null,-1)])),e("span",fe,[e("span",null,r(b.value.format("MMM")),1),e("span",xe,r(b.value.format("YYYY")),1)]),e("button",{onClick:o[0]||(o[0]=(...n)=>a.nextMonsth&&a.nextMonsth(...n)),class:"text-indigo-600 hover:underline"},o[4]||(o[4]=[e("img",{src:"/storage/images/arrow_drop_direita_circle.svg",alt:"icone drop",class:"w-5 h-5"},null,-1)]))]),e("div",ve,[(g(),f(k,null,M(_,n=>e("div",{class:"font-semibold text-gray-600",key:n},r(n),1)),64)),(g(!0),f(k,null,M(S.value,(n,x)=>(g(),f("div",{key:x,onClick:j=>l(n.date),class:A(["p-2 rounded-full cursor-pointer",C(n.date)?"bg-[#6db631] text-white":D(n.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},r(n.day),11,be))),128))]),e("div",he,[e("div",_e,[e("div",ye,[$(e("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),class:A(["mr-2",{"text-[#6db631]":d.value==="almoco","border-[#6db631]":d.value==="almoco"}])},null,2),[[L,d.value]]),o[5]||(o[5]=e("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),e("div",we,[$(e("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":o[2]||(o[2]=n=>d.value=n),class:A(["mr-2",{"text-[#6db631]":d.value==="janta","border-[#6db631]":d.value==="janta"}])},null,2),[[L,d.value]]),o[6]||(o[6]=e("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:m}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:t}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:h}," OK ")])])])):B("",!0)]))}},Ce={class:"flex justify-between items-center mb-4"},De={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},ke={class:"flex items-center space-x-2"},Me={class:"text-gray-900 text-[17px] font-semibold"},Se={class:"mt-5"},Ye={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},Ae={class:"bg-white rounded-lg px-12 py-8"},Be={class:"w-full"},$e={class:"py-3 flex items-center gap-5"},je=["src","alt"],Le={class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},Oe={class:"py-3 text-right text-[#262a27] font-semibold"},Re={class:"w-full h-[60px] bg-[#d2fac3] rounded-bl-[10px] rounded-br-[10px] px-12 flex justify-between items-center"},Ee={class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"},Pe={class:"bg-white rounded-lg px-12 py-8"},Te={class:"mb-4 text-center"},Ve={class:"mt-8"},Ie={class:"bg-white rounded-lg shadow"},Ne={ref:"scrollContainer",class:"overflow-y-auto max-h-96 scroll-hidden"},ze={class:"space-y-2"},Ue={class:"flex items-center text-gray-900 font-semibold"},He=["src"],qe={class:"text-center text-gray-900 font-semibold"},We={class:"text-left text-gray-900 font-medium"},Ge={class:"text-center text-gray-600 font-semibold"},Qe={class:"text-center text-gray-500 font-semibold"},Ze={__name:"Index",setup(E){R.register(W,G,Q,Z,J,K,X,ee,te,se,ae,oe,le,ne,re,ie,de);const w=c([]),F=c(""),v=c([]),u=c([]),p=c([]),b=c([]),i=c("pie");let _=null;const S=l=>{switch(l){case"abertura":case"suprimento":return"/storage/images/arrow_back_verde.svg";case"fechamento":return"/storage/images/thumb_up.svg";case"sangria":return"/storage/images/arrow_back_red.svg";default:return""}},d=l=>{switch(l){case"abertura":return"Abertura";case"fechamento":return"Fechamento";case"suprimento":return"Suprimento";case"sangria":return"Sangria";default:return""}},Y=l=>{console.log("Filtros atualizados:",l),C(l.startDate,l.endDate,l.periodo)},C=async(l,t,s)=>{try{const m=(await H.get("/api/analyticos/lista-metodos-pagamentos",{params:{start_date:l,end_date:t,periodo:s||"total"}})).data;w.value=m.metodos,v.value=m.historico,F.value=m.total,p.value=m.grafico.labels,u.value=m.grafico.data,b.value=m.grafico.porcentagem,D()}catch(h){console.error("Erro ao buscar dados:",h)}},D=()=>{const l=document.getElementById("myChart").getContext("2d");_&&_.destroy();const t={type:i.value,data:{labels:p.value,datasets:[{data:u.value,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#F7464A","#FF7F50"],borderColor:i.value==="line"?"#36A2EB":void 0,borderWidth:i.value==="line"||i.value==="bar"?1:0,fill:i.value==="line"}]},options:{plugins:{tooltip:{callbacks:{label:function(s){const h=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.raw),m=b.value[s.dataIndex];return`${s.label}: ${h} (${m})`}}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15,boxWidth:10}},datalabels:{display:!1}},scales:i.value==="bar"||i.value==="line"?{x:{type:"category"},y:{beginAtZero:!0,ticks:{callback:function(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}}}}:void 0}};_=new R(l,t)};return T(()=>{C()}),(l,t)=>(g(),V(q,null,{default:I(()=>[O(N(z),{title:"Histórico de Caixa"}),e("div",Ce,[t[2]||(t[2]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Histórico de Caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",De,[e("div",ke,[t[1]||(t[1]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",Me,[O(Fe,{onUpdateFilters:Y})])])])]),e("div",Se,[e("div",Ye,[e("div",null,[e("div",Ae,[e("table",Be,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-gray-500 text-left text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Método de pagamento "),e("th",{class:"text-gray-500 text-right text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Valor ")])],-1)),e("tbody",null,[(g(!0),f(k,null,M(w.value,s=>(g(),f("tr",{key:s.nome},[e("td",$e,[s.img_icon?(g(),f("img",{key:0,src:`/${s.img_icon}`,alt:s.nome,class:"w-8 h-8"},null,8,je)):B("",!0),e("div",Le,r(s.nome),1)]),e("td",Oe,r(s.valor),1)]))),128))])])]),e("div",Re,[t[4]||(t[4]=e("div",{class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"}," TOTAL ",-1)),e("div",Ee,r(F.value),1)])]),e("div",null,[e("div",Pe,[e("div",Te,[t[6]||(t[6]=e("label",{for:"chartType",class:"text-gray-700 font-semibold mr-2"}," Tipo de Gráfico: ",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),onChange:D,id:"chartType",class:"border rounded px-2 py-1"},t[5]||(t[5]=[e("option",{value:"pie"},"Pizza (Pie)",-1),e("option",{value:"doughnut"},"Rosquinha (Doughnut)",-1),e("option",{value:"bar"},"Barras (Bar)",-1),e("option",{value:"line"},"Linha (Line)",-1),e("option",{value:"radar"},"Radar",-1),e("option",{value:"polarArea"},"Área Polar (Polar Area)",-1)]),544),[[U,i.value]])]),t[7]||(t[7]=e("canvas",{id:"myChart"},null,-1))])])])]),e("div",Ve,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),e("div",{class:"flex items-center space-x-2"},[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"})])],-1)),e("div",Ie,[t[8]||(t[8]=e("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[e("span",{class:"text-left px-5"},"OPERAÇÃO"),e("span",{class:"text-center"},"VALOR"),e("span",{class:"text-left"},"DATA/HORA"),e("span",{class:"text-center"},"MOTIVO"),e("span",{class:"text-center"},"RESPONSÁVEL")],-1)),e("div",Ne,[e("ul",ze,[(g(!0),f(k,null,M(v.value,s=>(g(),f("li",{key:s.hora,class:"hover:bg-gray-200 grid grid-cols-5 gap-2 px-6 py-3 text-[16px]"},[e("span",Ue,[e("img",{src:S(s.operacao),alt:"icon",class:"mr-3 w-5 h-5"},null,8,He),e("span",null,r(d(s.operacao)),1)]),e("span",qe,r(s.valor),1),e("span",We,r(s.hora),1),e("span",Ge,r(s.motivo),1),e("span",Qe,r(s.responsavel),1)]))),128))])],512)])])]),_:1}))}},at=ce(Ze,[["__scopeId","data-v-dd2c31ff"]]);export{at as default};
