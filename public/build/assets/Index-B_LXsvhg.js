import{l as Q,d as n,i as G,o as t,e as a,a as e,j as U,s as oe,F as S,g as T,t as V,b as h,h as b,v as J,w as j,f as R,p as z,k as E,y as te,q as X,c as M,m as se,x as N,u as ae,Z as re}from"./app-DQS7A7Rv.js";import{_ as L,I as H,B as W,a as O,d as Z,C as ne}from"./ConfirmDialog-Duqbsbrm.js";import{B as le}from"./ButtonPrimary-CXw5g-Xs.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                         */import{L as ie}from"./LayoutFranqueado-Wo0hwi5z.js";import"./user-DC5DM_Lm.js";const de={key:0,class:"w-[100%] h-full flex flex-col p-4 bg-gray-50"},ue={class:"mb-6 relative"},ce={class:"relative"},ve=["value"],pe={class:"w-full bg-white rounded-lg p-6 mb-6"},fe={class:"flex items-center"},me={class:"flex-shrink-0"},ge=["src"],_e={class:"ml-6"},xe={class:"text-2xl font-semibold text-gray-800"},he={key:0,class:"text-red-500 text-sm text-center"},ye={class:"relative flex items-center w-full"},be={class:"flex justify-end space-x-4"},$e={__name:"CadastrarInsumoEstoque",props:{produtoSelecionado:{type:Object,required:!1}},setup(r,{emit:s}){var B;const l=Q(),y=s,x=r,d=n([]),o=n(""),c=n(""),_=n(((B=x.produtoSelecionado)==null?void 0:B.valor)||""),p=n(!1);n(!1);const C=n(!1),f=n(""),q=G(()=>x.produtoSelecionado.unidadeDeMedida==="a_granel"?"Kg":"Quantidade"),k=G(()=>x.produtoSelecionado.unidadeDeMedida==="a_granel"?"Digite o peso (ex: 1.5)":"Digite a quantidade"),v=()=>{const P=x.produtoSelecionado.unidadeDeMedida==="a_granel"?/^[0-9]+(\.[0-9]+)?$/:/^[0-9]+$/;p.value=!P.test(c.value)},m=()=>{const P=_.value.replace(/\D/g,""),w=P.slice(0,-2)||"0",u=P.slice(-2).padStart(2,"0");_.value=`R$ ${Number(w).toLocaleString("pt-BR")},${u}`},$=()=>{c.value="",_.value="",o.value=""};(async()=>{try{const P=await E.get("/api/estoque/fornecedores");d.value=P.data.data.map(w=>({id:w.id||"N/D",razao_social:w.razao_social||"N/D"}))}catch(P){console.error("Erro ao carregar fornecedores:",P)}})();const I=P=>P?new URL(P,window.location.origin).href:"/storage/images/no_imagem.svg",K=()=>(f.value="",o.value?!c.value||p.value?(l.error("Quantidade inválida."),f.value="Quantidade inválida.",!1):!_.value||C.value?(l.error("Valor inválido."),f.value="Valor inválido.",!1):!0:(l.error("Fornecedor não selecionado."),f.value="Fornecedor não selecionado.",!1)),A=()=>{if(!K())return;const P={...x.produtoSelecionado,fornecedor_id:o.value,quantidade:c.value,valor:_.value,unidade_de_medida:x.produtoSelecionado.unidadeDeMedida};l.success("Inusmo adicionado"),$(),y("adicionarAoCarrinho",P)};return(P,w)=>r.produtoSelecionado?(t(),a("div",de,[w[5]||(w[5]=e("h3",{class:"text-xl font-bold mb-4 text-gray-500"}," Estou recebendo todos os itens de ",-1)),e("div",ue,[e("div",ce,[U(e("select",{"onUpdate:modelValue":w[0]||(w[0]=u=>o.value=u),id:"fornecedor",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-green-600 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[w[3]||(w[3]=e("option",{value:"",disabled:""},"Selecione um fornecedor",-1)),(t(!0),a(S,null,T(d.value,u=>(t(),a("option",{key:u.id,value:u.id},V(u.razao_social),9,ve))),128))],512),[[oe,o.value]])])]),e("div",pe,[e("div",fe,[e("div",me,[e("img",{src:I(r.produtoSelecionado.profile_photo),alt:"Foto do Produto",class:"w-24 h-24 rounded-lg"},null,8,ge)]),e("div",_e,[e("div",xe,V(r.produtoSelecionado.nome||"N/A"),1)])])]),e("form",{onSubmit:z(A,["prevent"]),class:"space-y-4"},[e("div",null,[h(L,{text:q.value},null,8,["text"]),h(H,{modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=u=>c.value=u),placeholder:k.value,onInput:v},null,8,["modelValue","placeholder"]),p.value?(t(),a("p",he," Insira um valor válido. ")):b("",!0)]),e("div",null,[h(L,{text:"Valor"}),e("div",ye,[U(e("input",{"onUpdate:modelValue":w[2]||(w[2]=u=>_.value=u),placeholder:"R$ 0,00",onInput:m,class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,544),[[J,_.value]])])]),e("div",be,[h(le,{onClick:A},{default:j(()=>w[4]||(w[4]=[R("Adicionar")])),_:1})])],32)])):b("",!0)}},we=D($e,[["__scopeId","data-v-90e4faf6"]]),Ce={class:"flex gap-5"},ke={class:"flex-1"},Pe={class:"min-w-full table-auto"},Ve={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},qe={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Ie={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-left"},Ue={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},De={class:"botao-container"},Se={__name:"ResumoCarrinho",props:{carrinho:{type:Array,required:!0}},emits:["confirmar","cancelar"],setup(r,{emit:s}){const l=Q(),y=r,x=s,d=p=>p.unidadeDeMedida==="a_granel"?parseFloat(p.valor.replace("R$","").replace(",","."))/p.quantidade:parseFloat(p.valor.replace("R$","").replace(",",".")),o=p=>p.unidadeDeMedida==="a_granel"?d(p)*p.quantidade:p.quantidade*parseFloat(p.valor.replace("R$","").replace(",",".")),c=async()=>{var p,C;try{const f={fornecedor_id:((p=y.carrinho[0])==null?void 0:p.fornecedor_id)||null,itens:y.carrinho.map(k=>({id:k.id,nome:k.nome,quantidade:k.quantidade,unidadeDeMedida:k.unidadeDeMedida,valorUnitario:Math.round(parseFloat(k.valor.replace("R$","").replace(",","."))*100),total:Math.round(o(k)*100)}))};console.log("Dados enviados:",JSON.stringify(f,null,2));const q=await E.post("/api/estoque/armazenar-entrada",f);console.log("Resposta da API:",q.data),Z.Inertia.visit(route("franqueado.inventario")),l.success("Lista de insumos salvas em seu estoque.")}catch(f){l.error("Ouve um erro, tente novamente ou chame o suporte."),console.error("Erro ao enviar entrada:",((C=f.response)==null?void 0:C.data)||f.message)}},_=()=>{x("cancelar")};return(p,C)=>(t(),a("div",Ce,[C[1]||(C[1]=e("div",{class:"flex-1"},[e("div",{class:"painel-title"},"Confirmar entrada"),e("div",{class:"painel-subtitle"},[e("p",null,"Vamos conferir se está tudo certo")]),e("div",{class:"mt-[25%] text-[#6d6d6d] text-[18px] font-normal font-['Figtree'] leading-[23px] tracking-tight"},[R(" Você confirma que está "),e("br"),R(" realizando uma nova entrada "),e("br"),R(" com os seguintes itens? ")])],-1)),e("div",ke,[e("table",Pe,[C[0]||(C[0]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider TrRedonDireita"}," TOTAL ")])],-1)),e("tbody",null,[(t(!0),a(S,null,T(r.carrinho,f=>(t(),a("tr",{key:f.id},[e("td",Ve,V(f.nome),1),e("td",qe,V(f.quantidade),1),e("td",Ie,V(f.unidadeDeMedida==="a_granel"?`${d(f).toFixed(2)} /kg`:f.valor),1),e("td",Ue,V(o(f).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)]))),128))])]),e("div",De,[h(W,{text:"Cancelar",onClick:_}),h(O,{text:"Confirmar",onClick:c})])])]))}},Fe=D(Se,[["__scopeId","data-v-18d607a6"]]),Re={key:0},Me={key:0,class:"sidebar-container"},Ee={key:0,class:"loading-overlay"},Le={key:1,class:"flex"},je={class:"flex-1 p-4"},Ae={class:"relative flex items-center w-full mb-4"},Be={class:"space-y-4"},Ne=["onClick"],ze={class:"flex-shrink-0"},Qe=["src"],Te={class:"ml-4 flex-1"},Oe={class:"text-lg font-semibold flex items-center"},Ke={key:0,class:"ml-5 text-xs bg-green-100 text-green-600 font-bold rounded-full px-2 py-1"},Ge={key:1,class:"mr-2 ml-5 text-yellow-500",title:"Essa estrela sigifinica que esse insumo e um produto princial"},Je={class:"absolute bottom-4 right-4 mt-5 botao-container"},Xe={class:"flex-1 p-4"},Ze={__name:"CadastroProduto",props:{isVisible:{type:Boolean,required:!0}},setup(r){const s=n([]),l=n(""),y=n(!1),x=n(null),d=n([]),o=n(!1),c=()=>{console.log("Entrada confirmada",d.value),mostrarModalRevisao.value=!1,d.value=[]},_=async()=>{y.value=!0;try{const v=await E.get("/api/produtos/lista");s.value=v.data}catch(v){console.error("Erro ao carregar os produtos:",v)}finally{y.value=!1}},p=v=>v?new URL(v,window.location.origin).href:"/storage/images/no_imagem.svg",C=v=>{x.value=v},f=v=>d.value.filter(m=>m.id===v).length,q=v=>{d.value.push(v),x.value=null},k=G(()=>s.value.filter(v=>v.nome.toLowerCase().includes(l.value.toLowerCase())));return te(_),(v,m)=>(t(),a(S,null,[h(X,{name:"fade"},{default:j(()=>[o.value?b("",!0):(t(),a("div",Re,[r.isVisible?(t(),a("div",Me,[y.value?(t(),a("div",Ee,m[3]||(m[3]=[e("div",{class:"spinner"},null,-1)]))):(t(),a("div",Le,[e("div",je,[m[5]||(m[5]=e("div",{class:"painel-title"},"Nova entrada",-1)),m[6]||(m[6]=e("div",{class:"painel-subtitle"},[e("p",null,"Adicione os itens que você recebeu ao estoque")],-1)),e("div",Ae,[m[4]||(m[4]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),U(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=$=>l.value=$),placeholder:"Buscar um produto",class:"pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[J,l.value]])]),e("div",Be,[(t(!0),a(S,null,T(k.value,$=>(t(),a("div",{key:$.id,class:"flex items-center p-4 bg-white rounded-lg cursor-pointer",onClick:F=>C($)},[e("div",ze,[e("img",{src:p($.profile_photo),alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,Qe)]),e("div",Te,[e("div",Oe,[R(V($.nome)+" ",1),f($.id)>0?(t(),a("span",Ke,V(f($.id)),1)):b("",!0),$.estrela?(t(),a("span",Ge," ★ ")):b("",!0)])])],8,Ne))),128))])]),e("div",Je,[h(O,{text:"Finalizar",onClick:m[1]||(m[1]=$=>o.value=!0),iconPath:"/storage/images/arrow_left_alt.svg"})]),e("div",Xe,[h(we,{produtoSelecionado:x.value,onAdicionarAoCarrinho:q},null,8,["produtoSelecionado"])])]))])):b("",!0)]))]),_:1}),o.value?(t(),M(Fe,{key:0,carrinho:d.value,onConfirmar:c,onCancelar:m[2]||(m[2]=$=>o.value=!1)},null,8,["carrinho"])):b("",!0)],64))}},He=D(Ze,[["__scopeId","data-v-4deae6b8"]]),We={key:0,class:"sidebar-container"},Ye={key:0,class:"loading-overlay"},eo={key:1,class:"w-full h-[80%] bg-white rounded-[20px] p-12"},oo={class:"flex justify-center mb-6 relative group"},to=["src"],so={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ao={key:0,class:"error-message"},ro={class:"flex items-center space-x-4 mt-2"},no={class:"flex items-center space-x-2 cursor-pointer"},lo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},io={key:0,class:"w-3 h-3 rounded-full bg-green-500"},uo={class:"flex items-center space-x-2 cursor-pointer"},co={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},vo={key:0,class:"w-3 h-3 rounded-full bg-green-500"},po={class:"flex items-center space-x-4 mt-2"},fo={class:"flex items-center space-x-2 cursor-pointer"},mo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},go={key:0,class:"w-3 h-3 rounded-full bg-green-500"},_o={class:"flex items-center space-x-2 cursor-pointer"},xo={class:"w-5 h-5 rounded-full border-2 border-green-500 flex items-center justify-center"},ho={key:0,class:"w-3 h-3 rounded-full bg-green-500"},yo={class:"flex justify-start space-x-1 mt-[15%]"},bo={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar"],setup(r,{emit:s}){const l=Q(),y=r,x=s,d=n(""),o=n(""),c=n(""),_=n(""),p=n(null),C=n(""),f=n(null),q=n(!1),k=n(!1),v=n("");se(()=>y.produto,u=>{u&&(d.value=u.nome||"",o.value=u.categoria||"",c.value=u.unidadeDeMedida||"",_.value=u.profile_photo||"")},{immediate:!0});const m=u=>u?new URL(u,window.location.origin).href:"/storage/images/no_imagem.svg",$=async()=>{var u,i;if(!d.value){l.error("O campo nome é obrigatório.");return}try{q.value=!0;const g=new FormData;if(g.append("id",y.produto.id),g.append("nome",d.value),g.append("categoria",o.value),g.append("unidadeDeMedida",c.value),p.value){const ee=`${Date.now()}_${p.value.name}`;g.append("profile_photo_name",ee),g.append("profile_photo",p.value)}const Y=await E.post("/api/produtos/atualizar",g,{headers:{"Content-Type":"multipart/form-data"}});Z.Inertia.replace(route("franqueadora.insumos"),{produto:Y.data.produto,preserveState:!0}),l.success("Produto atualizado com sucesso!")}catch(g){l.error("Erro ao atualizar o produto."),C.value=((i=(u=g.response)==null?void 0:u.data)==null?void 0:i.message)||"Erro inesperado."}finally{q.value=!1}},F=u=>{v.value=u,k.value=!0},I=()=>{$(),k.value=!1},K=()=>{k.value=!1},A=()=>{var u;(u=f.value)==null||u.click()},B=()=>{_.value="",l.info("Imagem removida.")},P=u=>{const i=u.target.files[0];if(i){if(i.size>5*1024*1024){l.error("A imagem não pode exceder 5 MB.");return}p.value=i;const g=new FileReader;g.onload=()=>{_.value=g.result,l.success("Imagem carregada com sucesso!")},g.readAsDataURL(i)}},w=()=>{x("cancelar")};return(u,i)=>(t(),M(X,{name:"fade"},{default:j(()=>[r.isVisible?(t(),a("div",We,[q.value?(t(),a("div",Ye,i[7]||(i[7]=[e("div",{class:"spinner"},null,-1)]))):(t(),a("div",eo,[e("form",{onSubmit:z($,["prevent"])},[e("div",oo,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:A},[_.value?(t(),a(S,{key:0},[e("img",{src:m(_.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,to),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:i[0]||(i[0]=z(()=>{},["stop"]))},[e("button",{onClick:z(B,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),a("img",so))]),e("input",{type:"file",ref_key:"fileInput",ref:f,accept:"image/*",class:"hidden",onChange:P},null,544)]),h(L,{text:"Nome"}),h(H,{modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=g=>d.value=g),placeholder:""},null,8,["modelValue"]),C.value?(t(),a("div",ao,V(C.value),1)):b("",!0),h(L,{class:"font-semibold text-gray-800 mt-8",text:"Prioridade"}),e("div",ro,[e("label",no,[U(e("input",{type:"radio","onUpdate:modelValue":i[2]||(i[2]=g=>o.value=g),value:"principal",class:"hidden"},null,512),[[N,o.value]]),e("div",lo,[o.value==="principal"?(t(),a("div",io)):b("",!0)]),i[8]||(i[8]=e("span",null,"Principal",-1))]),e("label",uo,[U(e("input",{type:"radio","onUpdate:modelValue":i[3]||(i[3]=g=>o.value=g),value:"secundario",class:"hidden"},null,512),[[N,o.value]]),e("div",co,[o.value==="secundario"?(t(),a("div",vo)):b("",!0)]),i[9]||(i[9]=e("span",null,"Secundário",-1))])]),h(L,{class:"font-semibold text-gray-800 mt-8",text:"Unidade de medida"}),e("div",po,[e("label",fo,[U(e("input",{type:"radio","onUpdate:modelValue":i[4]||(i[4]=g=>c.value=g),value:"a_granel",class:"hidden"},null,512),[[N,c.value]]),e("div",mo,[c.value==="a_granel"?(t(),a("div",go)):b("",!0)]),i[10]||(i[10]=e("span",null,"A granel",-1))]),e("label",_o,[U(e("input",{type:"radio","onUpdate:modelValue":i[5]||(i[5]=g=>c.value=g),value:"unitario",class:"hidden"},null,512),[[N,c.value]]),e("div",xo,[c.value==="unitario"?(t(),a("div",ho)):b("",!0)]),i[11]||(i[11]=e("span",null,"Unitário",-1))])]),e("div",yo,[h(W,{text:"Cancelar",onClick:w}),h(O,{text:"Atualizar",onClick:i[6]||(i[6]=g=>F("Atualizar esse Produto?"))})])],32),h(ne,{isVisible:k.value,motivo:v.value,onConfirm:I,onCancel:K},null,8,["isVisible","motivo"])]))])):b("",!0)]),_:1}))}},$o=D(bo,[["__scopeId","data-v-f1b871f9"]]),wo={props:{isVisible:{type:Boolean,default:!1},motivo:{type:String,required:!0}},methods:{confirm(){this.$emit("confirm")},cancel(){this.$emit("cancel")}}},Co={key:0,class:"confirm-dialog-overlay"},ko={class:"confirm-dialog"},Po={class:"confirm-dialog-content"},Vo={class:"confirm-dialog-actions"};function qo(r,s,l,y,x,d){return t(),M(X,{name:"fade"},{default:j(()=>[l.isVisible?(t(),a("div",Co,[e("div",ko,[s[4]||(s[4]=e("div",{class:"alert-icon"},[e("img",{src:"/storage/images/warning.svg",alt:"Ícone de alerta"})],-1)),e("div",Po,[e("p",null,"Você tem certeza que deseja "+V(l.motivo),1),e("div",Vo,[e("button",{onClick:s[0]||(s[0]=(...o)=>d.cancel&&d.cancel(...o)),class:"btn-cancel"},s[2]||(s[2]=[e("span",null,"CANCELAR",-1)])),e("button",{onClick:s[1]||(s[1]=(...o)=>d.confirm&&d.confirm(...o)),class:"btn-confirm"},s[3]||(s[3]=[e("span",null,"CONFIRMAR",-1)]))])])])])):b("",!0)]),_:1})}const Io=D(wo,[["render",qo],["__scopeId","data-v-f1cbb43c"]]),Uo={class:"elemento-fixo"},Do={key:0,class:"w-full h-[200px] bg-white rounded-[20px] p-12"},So={class:"relative w-full h-full"},Fo={class:"flex items-center"},Ro={class:"w-1/1 flex justify-center"},Mo=["src"],Eo={class:"w-2/3 pl-5"},Lo={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},jo={class:"text-[#6db631] text-xl font-bold font-['Figtree'] leading-[30px] tracking-tight cursor-pointer",title:"Soma do valor total de todos os produtos."},Ao={class:"w-1/1"},Bo={__name:"DetalhesProduto",props:{produto:{type:Object,required:!0}},setup(r){const s=Q(),l=r,y=n(!1),x=n(""),d=n(!1),o=n(!1),c=n(!1),_=()=>{n.dadosProduto.fetchProduto()},p=v=>v?new URL(v,window.location.origin).href:"/storage/images/no_imagem.svg",C=async()=>{var v,m,$,F;try{c.value=!0;const I=await E.delete(`/api/produtos/excluir/${l.produto.id}`);console.log(I.data.message),s.success("Produto deletado com sucesso!"),Z.Inertia.visit(route("franqueadora.insumos"))}catch(I){s.error("Erro ao deletar o produto:",((m=(v=I.response)==null?void 0:v.data)==null?void 0:m.error)||I.message),console.error("Erro ao deletar o produto:",((F=($=I.response)==null?void 0:$.data)==null?void 0:F.error)||I.message)}finally{c.value=!1}},f=()=>{C(),y.value=!1},q=()=>{y.value=!1},k=()=>{o.value=!1,d.value=!0};return(v,m)=>(t(),a("div",Uo,[o.value?b("",!0):(t(),a("div",Do,[e("div",So,[e("div",Fo,[e("div",Ro,[e("img",{src:p(r.produto.insumo.profile_photo),alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-lg"},null,8,Mo)]),e("div",Eo,[e("div",Lo,[R(V(r.produto.insumo.nome||"N/A")+" ",1),e("div",jo,V(r.produto.valor_total),1)])]),e("div",Ao,[h(Io,{isVisible:y.value,motivo:x.value,onConfirm:f,onCancel:q},null,8,["isVisible","motivo"])])])])])),o.value?(t(),M($o,{key:1,ref:"dadosProduto",isVisible:o.value,produto:r.produto,onDadosProduto:_,onCancelar:k},null,8,["isVisible","produto"])):b("",!0)]))}},No=D(Bo,[["__scopeId","data-v-8d3374ff"]]),zo={data(){return{produtos:[],searchQuery:""}},mounted(){this.fetchProdutos()},methods:{async fetchProdutos(){try{const r=await E.get("/api/estoque/lista");console.log("Produtos carregados:",r.data),this.produtos=r.data}catch(r){console.error("Erro ao carregar os produtos:",r)}},getProfilePhotoUrl(r){return r?new URL(r,window.location.origin).href:"/storage/images/no_imagem.svg"},selecionarProduto(r){this.$emit("produto-selecionado",r)}},computed:{filteredProdutos(){const r=this.searchQuery.toLowerCase();return this.produtos.filter(s=>s.insumo.nome.toLowerCase().includes(r))}}},Qo={class:"search-container relative flex items-center w-full mb-4"},To={class:"card-container"},Oo=["onClick"],Ko={class:"card-inner"},Go={class:"icon-container"},Jo={class:"icon-leaf"},Xo=["src"],Zo={class:"text-container flex justify-between items-center p-2"},Ho={class:"city"},Wo={class:"quantidade text-gray-600 font-semibold"};function Yo(r,s,l,y,x,d){return t(),a("div",null,[s[3]||(s[3]=e("div",{class:"painel-title"},"Inventário da loja",-1)),s[4]||(s[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Verifique a quantidade de cada item")],-1)),e("div",Qo,[s[1]||(s[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),U(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>x.searchQuery=o),placeholder:"Buscar um produto",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[J,x.searchQuery]])]),e("div",To,[(t(!0),a(S,null,T(d.filteredProdutos,o=>(t(),a("div",{key:o.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:c=>d.selecionarProduto(o)},[e("div",Ko,[e("div",Go,[s[2]||(s[2]=e("div",{class:"icon-bg"},null,-1)),e("div",Jo,[e("img",{src:d.getProfilePhotoUrl(o.insumo.profile_photo),alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,Xo)])]),e("div",Zo,[e("div",Ho,V(o.insumo.nome),1),e("div",Wo,V(o.quantidade),1)])])],8,Oo))),128))])])}const et=D(zo,[["render",Yo],["__scopeId","data-v-06355e5f"]]),ot={key:0,class:"mt-6"},tt={class:"grid grid-cols-1 gap-4 mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},st={key:0},at={class:"flex flex-col gap-4"},rt={class:"absolute bottom-4 right-4 botao-container"},nt={__name:"Index",setup(r){const s=n(null),l=n(!1),y=()=>{l.value=!l.value},x=()=>{d(),l.value=!1},d=()=>{var _;(_=n("listarUnidades").value)==null||_.fetchUnidades()},o=c=>{c&&typeof c=="object"?s.value=c:console.warn("Dados inválidos recebidos no evento produto-selecionado:",c)};return(c,_)=>(t(),M(ie,null,{default:j(()=>[h(ae(re),{title:"Insumos"}),l.value?(t(),a("div",ot,[h(He,{isVisible:l.value,onUnidadeCadastrada:x,onCancelar:y},null,8,["isVisible"])])):b("",!0),e("div",tt,[l.value?b("",!0):(t(),a("div",st,[h(et,{ref:"listarUnidades",onUnidadeCadastrada:d,onProdutoSelecionado:o},null,512)])),e("div",at,[l.value?b("",!0):(t(),a(S,{key:0},[s.value?(t(),M(No,{key:0,produto:s.value},null,8,["produto"])):b("",!0),e("div",rt,[h(O,{text:"Nova entrada",iconPath:"/storage/images/arrow_left_alt.svg",onClick:y})])],64))])])]),_:1}))}},ft=D(nt,[["__scopeId","data-v-7dfa8c6b"]]);export{ft as default};
