import{l as T,d as i,i as P,k as V,e as c,o as r,a as e,b as u,m as D,f as C,x as j,F as S,h as O,t as p,a0 as Z,v as F,n as K,g as G,q as H,j as J,c as R,w as W,u as X,Z as Y}from"./app-DYh8EFuX.js";import{L as ee}from"./LayoutFranqueado-DUyq-26W.js";import{_ as k}from"./LabelModel-oqMHav-v.js";import{B as Q}from"./ButtonPrimaryMedio-ZcIUmY9P.js";import{B as te}from"./ButtonCancelar-BxH7Rdk7.js";import{C as M}from"./ConfirmDialog-UINhhakX.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"mt-5"},oe={class:"grid grid-cols-2 gap-8"},se={class:"bg-white rounded-lg p-12"},ne={class:"flex gap-4"},re={class:"flex-1 mb-8"},le=["value"],ie={key:0,class:"text-red-500 text-sm"},de={class:"flex-1"},ce={key:0,class:"text-red-500 text-sm"},ue={key:0,class:"text-red-500 text-sm"},ve={class:"col-span-1 row-span-2 mt-12"},ge={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},pe={key:0,class:"text-red-500 text-sm"},me={key:1,class:"text-red-500 text-sm"},fe={class:"bg-white rounded-lg p-12"},xe={class:"mt-2"},be={class:"mt-2"},_e={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},ye={key:0,class:"text-red-500 text-sm"},he={class:"form-buttons"},Ce={__name:"CadastroContas",emits:["voltar"],setup(x,{emit:h}){const l=T(),o=i(null),v=i(""),b=i(""),m=i(""),w=i(1),y=i(null),_=i(""),$=i(!1),q=i(""),E=i([]),a=i({}),g=h;P(async()=>{try{const s=await V.get("/api/categorias/seleto-contas");E.value=s.data}catch(s){console.error("Erro ao carregar categorias:",s)}});const f=async()=>{a.value={},y.value||(a.value.categoria="A categoria é obrigatória"),o.value||(a.value.valor="O valor é obrigatório"),b.value||(a.value.emitidaEm="A data emitida é obrigatória"),m.value||(a.value.vencimento="A data de vencimento é obrigatória"),v.value.length>200&&(a.value.descricao="A descrição deve ter no máximo 200 caracteres");const s=parseFloat(o.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(s)?a.value.valor="O valor informado não é válido":o.value=s,Object.keys(a.value).length===0)try{const t=new FormData;if(t.append("categoria_id",y.value),t.append("valor",o.value),t.append("emitida_em",b.value),t.append("vencimento",m.value),t.append("dias_lembrete",w.value),t.append("descricao",v.value),_.value){const z=document.querySelector('input[type="file"]');z.files.length>0&&t.append("arquivo",z.files[0])}const d=await V.post("/api/cursto/contas-a-pagar",t);l.success("Conta cadastrada com sucesso",d.data),console.log("Conta cadastrada com sucesso",d.data),n()}catch(t){l.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",t)}},A=s=>{q.value=s,$.value=!0},I=()=>{f(),$.value=!1},N=()=>{$.value=!1},B=s=>{l.info("Arquivo selecionado com sucesso");const t=s.target.files[0];t&&(_.value=t.name)},U=s=>{let t=s.replace(/\D/g,"");t||(t="0");const d=t.slice(0,-2)||"0",z=t.slice(-2);return`R$ ${Number(d).toLocaleString("pt-BR")},${z}`},n=()=>{y.value=null,o.value=null,b.value="",m.value="",w.value=1,v.value="",_.value="",g("voltar")};return(s,t)=>(r(),c(S,null,[t[13]||(t[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),t[14]||(t[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",ae,[e("div",oe,[e("div",se,[e("div",ne,[e("div",re,[t[9]||(t[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),u(k,{text:"Nome da Conta"}),D(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=d=>y.value=d),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[8]||(t[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(r(!0),c(S,null,O(E.value,d=>(r(),c("option",{key:d.id,value:d.id},p(d.nome),9,le))),128))],512),[[j,y.value]]),a.value.categoria?(r(),c("span",ie,p(a.value.categoria),1)):C("",!0)]),e("div",de,[u(k,{text:"Lembrar - me"}),D(e("select",{id:"dias_lembrete","onUpdate:modelValue":t[1]||(t[1]=d=>w.value=d),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},t[10]||(t[10]=[Z('<option value="1" data-v-a038958e>1 dia antes</option><option value="3" data-v-a038958e>3 dias antes</option><option value="5" data-v-a038958e>5 dias antes</option><option value="15" data-v-a038958e>15 dias antes</option><option value="30" data-v-a038958e>30 dias antes</option>',5)]),512),[[j,w.value]]),a.value.diasLembrete?(r(),c("span",ce,p(a.value.diasLembrete),1)):C("",!0)])]),u(k,{text:"Valor"}),D(e("input",{id:"valor","onUpdate:modelValue":t[2]||(t[2]=d=>o.value=d),onInput:t[3]||(t[3]=d=>o.value=U(o.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[F,o.value]]),a.value.valor?(r(),c("span",ue,p(a.value.valor),1)):C("",!0),e("div",ve,[e("div",ge,[u(k,{text:"Data emitida"}),D(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":t[4]||(t[4]=d=>b.value=d),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[F,b.value]]),a.value.emitidaEm?(r(),c("span",pe,p(a.value.emitidaEm),1)):C("",!0),t[11]||(t[11]=e("div",{class:"mt-12"},null,-1)),u(k,{text:"Data de vencimento"}),D(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":t[5]||(t[5]=d=>m.value=d),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[F,m.value]]),a.value.vencimento?(r(),c("span",me,p(a.value.vencimento),1)):C("",!0)])])]),e("div",fe,[u(k,{text:"Informações adicionais"}),D(e("textarea",{id:"descricao","onUpdate:modelValue":t[6]||(t[6]=d=>v.value=d),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[F,v.value]]),e("p",{class:K(["text-right text-xs mt-1",{"text-gray-500":v.value.length<=200,"text-red-500":v.value.length>200}])},p(v.value.length)+"/200 caracteres ",3),e("div",xe,[u(k,{text:"Enviar boleto/fatura"}),e("div",be,[e("label",_e,[G(p(_.value||"Selecionar Arquivo")+" ",1),t[12]||(t[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:B},null,32),a.value.arquivo?(r(),c("span",ye,p(a.value.arquivo),1)):C("",!0)])]),e("div",he,[u(te,{class:"w-full",text:"Cancelar",onClick:n}),u(Q,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:t[7]||(t[7]=d=>A("Cadastrar um nova conta?"))})])])])]),u(M,{isVisible:$.value,motivo:q.value,onConfirm:I,onCancel:N},null,8,["isVisible","motivo"])],64))}},we=L(Ce,[["__scopeId","data-v-a038958e"]]),$e=["type"],ke={class:"text-center text-[15px] font-semibold font-['Figtree'] leading-tight"},De=["src"],Ve={__name:"ButtonClaroMedio",props:{text:{type:String,required:!0,default:"Nome do Botão"},type:{type:String,default:"button"},iconPath:{type:String,required:!1}},emits:["click"],setup(x,{emit:h}){const l=h,o=()=>{l("click")};return(v,b)=>(r(),c("button",{type:x.type,onClick:o,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5"},[e("span",ke,p(x.text),1),x.iconPath?(r(),c("img",{key:0,src:x.iconPath,alt:"icon",class:"h-6 w-6"},null,8,De)):C("",!0)],8,$e))}},qe=L(Ve,[["__scopeId","data-v-3918f9aa"]]),Ee={class:"elemento-fixo"},Fe={key:0},Se={class:"mt-8"},Ae={class:"w-full h-[555px] bg-white rounded-[20px] p-7 relative"},Be={class:"flex justify-between items-center"},ze={class:"text-[25px] font-bold font-['Figtree'] leading-8 tracking-tight"},Le={class:"text-[#6db631] text-xl font-normal font-['Figtree'] leading-[25px] tracking-tight"},Ie={class:"col-span-1 row-span-2 mt-8"},Ne={class:"col-span-1 row-span-2 mt-8"},Ue={class:"text-[#262a27] text-[12px] font-bold leading-[48px] tracking-wide"},je=["value"],Me=["value"],Pe={class:"w-full h-[100px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500"},Oe={class:"flex space-x-4 mt-5"},Re=["value"],Te={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["voltar","atualiza"],setup(x,{emit:h}){const l=T(),o=x,v=h,b=i([]),m=i(o.dados.status),w=i(!1);i(null);const y=i(!1),_=i(!1),$=i(""),q=n=>{$.value=n,_.value=!0};H(()=>o.dados.status,n=>{m.value=n});const E=()=>{y.value=!1,I()},a=()=>{y.value=!1},g=()=>{_.value=!1,N()},f=()=>{_.value=!1},A=async()=>{try{const n=await V.put(`/api/cursto/cursto/contas-a-pagar/${o.dados.id}/status`,{status:m.value});l.success(n.data.message),v("atualiza")}catch(n){console.error(n),l.error("Erro ao atualizar o status da conta")}},I=async()=>{if(!o.dados||!o.dados.id){l.error("Erro: Dados da conta não encontrados.");return}try{const n=await V.post(`/api/cursto/contas-a-pagar/${o.dados.id}/pagar`);l.success(n.data.message),o.dados.status="pago",v("atualiza")}catch(n){console.error("Erro ao pagar a conta:",n),l.error("Erro ao pagar a conta")}},N=async n=>{if(!o.dados||!o.dados.id){l.error("Erro: Dados da conta não encontrados.");return}try{const s=await V.delete(`/api/cursto/contas-a-pagar/${o.dados.id}`);l.success("Conta excluída com sucesso"),v("voltar")}catch(s){console.error("Erro ao excluir a conta:",s)}},B=n=>{if(!n)return"";const s=n.split("-");return`${s[2]}/${s[1]}/${s[0]}`},U=()=>{if(o.dados.arquivo){const n=document.createElement("a");n.href=`/${o.dados.arquivo}`,n.download=o.dados.arquivo.split("/").pop(),n.target="_blank",n.click(),l.info("Arquivo baixado com sucesso")}else l.warning("Arquivo não encontrado"),console.error("Arquivo não encontrado")};return P(async()=>{try{const n=await V.get("/api/cursto/contas-a-pagar/status-options");b.value=n.data.data,b.value.includes(m.value)||b.value.push(m.value)}catch(n){console.error("Erro ao carregar opções de status:",n)}}),(n,s)=>(r(),c(S,null,[e("div",Ee,[w.value?C("",!0):(r(),c("div",Fe,[e("div",Se,[e("div",Ae,[e("div",Be,[e("p",ze,p(x.dados.nome),1),e("button",{class:"text-gray-500 hover:text-red-600",onClick:s[0]||(s[0]=t=>q("Excluir essa conta?"))},s[2]||(s[2]=[e("img",{src:"/storage/images/delete.svg",alt:"Excluir",class:"w-6 h-6"},null,-1)]))]),e("p",Le,p(x.dados.valor_formatado),1),s[4]||(s[4]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1)),e("div",Ie,[e("div",Ne,[e("div",Ue,[u(k,{text:"Data emitida"}),e("input",{type:"text",id:"emitida_em",value:B(x.dados.emitida_em),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,je),s[3]||(s[3]=e("div",{class:"mt-12"},null,-1)),u(k,{text:"Data de vencimento"}),e("input",{type:"text",id:"vencimento",name:"vencimento",value:B(x.dados.vencimento),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Me)])]),u(k,{text:"Informações adicionais"}),e("p",Pe,p(x.dados.descricao),1)]),e("div",Oe,[e("div",null,[D(e("select",{id:"status","onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),onChange:A,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5 focus:outline-none",style:{border:"2px solid #c1fab6","outline-color":"#c1fab6"}},[(r(!0),c(S,null,O(b.value,t=>(r(),c("option",{key:t,value:t},p(t.charAt(0).toUpperCase()+t.slice(1)),9,Re))),128))],544),[[j,m.value]])]),u(qe,{text:"Baixar boleto",class:"text-[#6db631] bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out",onClick:U})])])])]))]),u(M,{isVisible:y.value,motivo:$.value,onConfirm:E,onCancel:a},null,8,["isVisible","motivo"]),u(M,{isVisible:_.value,motivo:$.value,onConfirm:g,onCancel:f},null,8,["isVisible","motivo"])],64))}},Ke=L(Te,[["__scopeId","data-v-7ebfec33"]]),Qe={class:"search-container relative flex items-center w-full mb-4"},Ze=["onClick"],Ge={class:"text-lg font-medium text-gray-900"},He={class:"text-sm text-gray-600"},Je={class:"flex items-center gap-2"},We=["src","alt"],Xe={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(x,{emit:h}){const l=h,o=i([]),v=i("");P(async()=>{try{const a=await V.get("/api/cursto/listar-contas-a-pagar");o.value=a.data.data}catch(a){console.error("Erro ao carregar os dados:",a)}});const m=a=>{l("dado-selecionado",a)},w=J(()=>{const a=v.value.toLowerCase();return o.value.filter(g=>g.nome.toLowerCase().includes(a)||String(g.valor).includes(a))}),y=a=>{const g=a.split("-");return`${g[2]}/${g[1]}/${g[0]}`},_={pendente:"/storage/images/check_circle_laranja.svg",concluida:"/storage/images/check_circle_verde.svg",agendada:"/storage/images/agendada.svg",atrasado:"/storage/images/atrasada.svg"},$=a=>_[a]||"/storage/images/check_circle_laranja.svg",q={pendente:"bg-orange-100 text-orange-700",concluida:"bg-green-100 text-green-700",agendada:"bg-blue-100 text-blue-700",atrasada:"bg-red-100 text-red-700"},E=a=>q[a.toLowerCase()]||"bg-gray-100 text-gray-700";return(a,g)=>(r(),c("div",null,[g[2]||(g[2]=e("div",{class:"painel-title"},"Contas a pagar",-1)),g[3]||(g[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),e("div",Qe,[g[1]||(g[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":g[0]||(g[0]=f=>v.value=f),placeholder:"Buscar contas",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[F,v.value]])]),(r(!0),c(S,null,O(w.value,f=>(r(),c("div",{key:f.id,onClick:A=>m(f),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Ge,p(f.nome),1),e("p",He,p(f.valor_formatado)+" - Vence em "+p(y(f.vencimento)),1)]),e("div",Je,[e("span",{class:K(["px-2 py-1 text-xs font-semibold rounded-full capitalize",E(f.status)])},p(f.status),3),e("img",{src:$(f.status),alt:f.status,class:"w-8 h-8"},null,8,We)])],8,Ze))),128))]))}},Ye=L(Xe,[["__scopeId","data-v-4db94fe9"]]),et={key:0,class:"fixed bottom-6 right-6"},tt={key:1,class:"mt-3"},at={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},ot={key:0},ut={__name:"Index",setup(x){const h=i(0),l=i(null),o=i(!1),v=()=>{o.value=!o.value,o.value&&(l.value=null)},b=_=>{l.value=_},m=()=>{o.value=!1,h.value+=1,console.log("cancelarCadastro")},w=()=>{l.value=null,h.value+=1},y=()=>{h.value+=1};return(_,$)=>(r(),R(ee,null,{default:W(()=>[u(X(Y),{title:"Contas"}),o.value?C("",!0):(r(),c("div",et,[u(Q,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:v})])),o.value?(r(),c("div",tt,[u(we,{onVoltar:m,onAtualiza:y})])):C("",!0),o.value?C("",!0):(r(),c("div",at,[(r(),R(Ye,{key:h.value,ref:"listaDados",onDadoSelecionado:b})),l.value?(r(),c("div",ot,[u(Ke,{dados:l.value,onVoltar:w,onAtualiza:w},null,8,["dados"])])):C("",!0)]))]),_:1}))}};export{ut as default};
