import{l as z,d as v,y as B,k as A,o as n,e as u,a as e,b as m,j as k,s as E,F,g as N,t as c,h as b,B as K,v as D,n as Q,f as G,i as Z,c as S,w as H,u as J,Z as W}from"./app-B9waNGP4.js";import{L as X}from"./LayoutFranqueado-C1BX3lcj.js";import{_ as $}from"./LabelModel-BfRaSdFw.js";import{B as U}from"./ButtonPrimaryMedio-fo9cGNSY.js";import{B as Y}from"./ButtonCancelar-CFjs3E2s.js";import{C as ee}from"./ConfirmDialog-BCQ97PXV.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-DIr2ObGQ.js";const te={class:"mt-5"},ae={class:"grid grid-cols-2 gap-8"},oe={class:"bg-white rounded-lg p-12"},se={class:"flex gap-4"},re={class:"flex-1 mb-8"},ne=["value"],le={key:0,class:"text-red-500 text-sm"},ie={class:"flex-1"},de={key:0,class:"text-red-500 text-sm"},ue={key:0,class:"text-red-500 text-sm"},ce={class:"col-span-1 row-span-2 mt-12"},ve={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},pe={key:0,class:"text-red-500 text-sm"},ge={key:1,class:"text-red-500 text-sm"},me={class:"bg-white rounded-lg p-12"},fe={class:"mt-2"},xe={class:"mt-2"},_e={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},ye={key:0,class:"text-red-500 text-sm"},be={class:"form-buttons"},he={__name:"CadastroContas",emits:["voltar"],setup(C,{emit:w}){const x=z(),i=v(null),g=v(""),h=v(""),_=v(""),y=v(1),o=v(null),p=v(""),a=v(!1),r=v(""),l=v([]),s=v({}),R=w;B(async()=>{try{const f=await A.get("/api/categorias/lista");l.value=f.data}catch(f){console.error("Erro ao carregar categorias:",f)}});const I=async()=>{s.value={},o.value||(s.value.categoria="A categoria é obrigatória"),i.value||(s.value.valor="O valor é obrigatório"),h.value||(s.value.emitidaEm="A data emitida é obrigatória"),_.value||(s.value.vencimento="A data de vencimento é obrigatória"),g.value.length>200&&(s.value.descricao="A descrição deve ter no máximo 200 caracteres");const f=parseFloat(i.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(f)?s.value.valor="O valor informado não é válido":i.value=f,Object.keys(s.value).length===0)try{const t=new FormData;if(t.append("categoria_id",o.value),t.append("valor",i.value),t.append("emitida_em",h.value),t.append("vencimento",_.value),t.append("dias_lembrete",y.value),t.append("descricao",g.value),p.value){const q=document.querySelector('input[type="file"]');q.files.length>0&&t.append("arquivo",q.files[0])}const d=await A.post("/api/cursto/contas-a-pagar",t);x.success("Conta cadastrada com sucesso",d.data),console.log("Conta cadastrada com sucesso",d.data),L()}catch(t){x.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",t)}},j=f=>{r.value=f,a.value=!0},T=()=>{I(),a.value=!1},M=()=>{a.value=!1},O=f=>{x.info("Arquivo selecionado com sucesso");const t=f.target.files[0];t&&(p.value=t.name)},P=f=>{let t=f.replace(/\D/g,"");t||(t="0");const d=t.slice(0,-2)||"0",q=t.slice(-2);return`R$ ${Number(d).toLocaleString("pt-BR")},${q}`},L=()=>{o.value=null,i.value=null,h.value="",_.value="",y.value=1,g.value="",p.value="",R("voltar")};return(f,t)=>(n(),u(F,null,[t[13]||(t[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),t[14]||(t[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",te,[e("div",ae,[e("div",oe,[e("div",se,[e("div",re,[t[9]||(t[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),m($,{text:"Nome da Conta"}),k(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[8]||(t[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(n(!0),u(F,null,N(l.value,d=>(n(),u("option",{key:d.id,value:d.id},c(d.nome),9,ne))),128))],512),[[E,o.value]]),s.value.categoria?(n(),u("span",le,c(s.value.categoria),1)):b("",!0)]),e("div",ie,[m($,{text:"Lembrar - me"}),k(e("select",{id:"dias_lembrete","onUpdate:modelValue":t[1]||(t[1]=d=>y.value=d),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},t[10]||(t[10]=[K('<option value="1" data-v-e0ba62fa>1 dia antes</option><option value="3" data-v-e0ba62fa>3 dias antes</option><option value="5" data-v-e0ba62fa>5 dias antes</option><option value="15" data-v-e0ba62fa>15 dias antes</option><option value="30" data-v-e0ba62fa>30 dias antes</option>',5)]),512),[[E,y.value]]),s.value.diasLembrete?(n(),u("span",de,c(s.value.diasLembrete),1)):b("",!0)])]),m($,{text:"Valor"}),k(e("input",{id:"valor","onUpdate:modelValue":t[2]||(t[2]=d=>i.value=d),onInput:t[3]||(t[3]=d=>i.value=P(i.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[D,i.value]]),s.value.valor?(n(),u("span",ue,c(s.value.valor),1)):b("",!0),e("div",ce,[e("div",ve,[m($,{text:"Data emitida"}),k(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":t[4]||(t[4]=d=>h.value=d),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[D,h.value]]),s.value.emitidaEm?(n(),u("span",pe,c(s.value.emitidaEm),1)):b("",!0),t[11]||(t[11]=e("div",{class:"mt-12"},null,-1)),m($,{text:"Data de vencimento"}),k(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":t[5]||(t[5]=d=>_.value=d),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[D,_.value]]),s.value.vencimento?(n(),u("span",ge,c(s.value.vencimento),1)):b("",!0)])])]),e("div",me,[m($,{text:"Informações adicionais"}),k(e("textarea",{id:"descricao","onUpdate:modelValue":t[6]||(t[6]=d=>g.value=d),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[D,g.value]]),e("p",{class:Q(["text-right text-xs mt-1",{"text-gray-500":g.value.length<=200,"text-red-500":g.value.length>200}])},c(g.value.length)+"/200 caracteres ",3),e("div",fe,[m($,{text:"Enviar boleto/fatura"}),e("div",xe,[e("label",_e,[G(c(p.value||"Selecionar Arquivo")+" ",1),t[12]||(t[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:O},null,32),s.value.arquivo?(n(),u("span",ye,c(s.value.arquivo),1)):b("",!0)])]),e("div",be,[m(Y,{class:"w-full",text:"Cancelar",onClick:L}),m(U,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:t[7]||(t[7]=d=>j("Cadastrar um nova conta?"))})])])])]),m(ee,{isVisible:a.value,motivo:r.value,onConfirm:T,onCancel:M},null,8,["isVisible","motivo"])],64))}},Ce=V(he,[["__scopeId","data-v-e0ba62fa"]]),we={class:"elemento-fixo"},$e={key:0},ke={class:"mt-8"},qe={class:"flex justify-between w-full h-[24.32px] text-[#262a27] text-[42px] font-semibold font-['Figtree'] leading-[12px]"},De={class:"flex justify-between w-full h-[17.68px] text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},Fe={class:"w-[250px]"},Ae={class:"w-[250px] text-right font-semibold"},Ne={class:"min-w-full table-auto"},Ve=["onDblclick"],Le={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},Ee={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Se={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Be={key:0},Ue={key:1},Re={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},Ie={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(C,{emit:w}){const x=C,i=v(!1),g=v(null),h=o=>{g.value=o},_=o=>{const p=Array.isArray(o.valor_unitario)?o.valor_unitario.reduce((r,l)=>r+l,0):parseFloat(o.valor_unitario),a=Array.isArray(o.quantidade)?o.quantidade.reduce((r,l)=>r+l,0):parseFloat(o.quantidade);return isNaN(p)||isNaN(a)?0:p*a},y=o=>{const p=Array.isArray(o.valor_unitario)?o.valor_unitario.reduce((r,l)=>r+l,0):parseFloat(o.valor_unitario),a=Array.isArray(o.quantidade)?o.quantidade.reduce((r,l)=>r+l,0):parseFloat(o.quantidade);return isNaN(p)||isNaN(a)?0:p/a};return(o,p)=>(n(),u("div",we,[i.value?b("",!0):(n(),u("div",$e,[e("div",ke,[e("div",qe,[e("p",null,"# "+c(C.dados.id),1),p[0]||(p[0]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1))]),e("div",De,[e("div",Fe,c(C.dados.fornecedor_nome),1),e("div",Ae,c(C.dados.created_at),1)]),e("table",Ne,[p[1]||(p[1]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," TOTAL ")])],-1)),e("tbody",null,[(n(!0),u(F,null,N(x.dados.itens_id,(a,r)=>(n(),u("tr",{key:a.id,onDblclick:l=>h(r)},[e("td",Le,c(a.nome),1),e("td",Ee,[e("span",null,c(Array.isArray(a.quantidade)?a.quantidade.reduce((l,s)=>l+s,0):a.quantidade)+" "+c(a.unidadeDeMedida==="a_granel"?"KG":"UN"),1)]),e("td",Se,[a.unidadeDeMedida==="a_granel"?(n(),u("span",Be," R$ "+c(y(a).toFixed(2)),1)):(n(),u("span",Ue," R$ "+c(Array.isArray(a.valor_unitario)?(a.valor_unitario.reduce((l,s)=>l+s,0)/100).toFixed(2):(a.valor_unitario/100).toFixed(2)),1))]),e("td",Re,[e("span",null,c((_(a)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)])],40,Ve))),128))])])])]))]))}},je=V(Ie,[["__scopeId","data-v-8721d1b3"]]),Te=["onClick"],Me={class:"text-lg font-medium text-gray-900"},Oe={class:"text-sm text-gray-600"},Pe=["src","alt"],ze={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(C,{emit:w}){const x=w,i=v([]),g=v("");B(async()=>{try{const a=await A.get("/api/cursto/listar-contas-a-pagar");i.value=a.data.data}catch(a){console.error("Erro ao carregar os dados:",a)}});const _=a=>{x("dado-selecionado",a)},y=Z(()=>{const a=g.value.toLowerCase();return i.value.filter(r=>r.nome.toLowerCase().includes(a)||String(r.valor).includes(a))}),o=a=>{const r=a.split("-");return`${r[2]}/${r[1]}/${r[0]}`},p=a=>a==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(a,r)=>(n(),u("div",null,[r[0]||(r[0]=e("div",{class:"painel-title"},"Contas a pagar",-1)),r[1]||(r[1]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),(n(!0),u(F,null,N(y.value,l=>(n(),u("div",{key:l.id,onClick:s=>_(l),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Me,c(l.nome),1),e("p",Oe," R$ "+c(l.valor)+" - Vence em "+c(o(l.vencimento)),1)]),e("div",null,[e("img",{src:p(l.status),alt:l.status,class:"w-8 h-8"},null,8,Pe)])],8,Te))),128))]))}},Ke=V(ze,[["__scopeId","data-v-2134d6a4"]]),Qe={key:0,class:"fixed bottom-6 right-6"},Ge={key:1,class:"mt-3"},Ze={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},He={key:0},st={__name:"Index",setup(C){const w=v(0),x=v(null),i=v(!1),g=()=>{i.value=!i.value,i.value&&(x.value=null)},h=y=>{x.value=y},_=()=>{i.value=!1,w.value+=1,console.log("cancelarCadastro")};return(y,o)=>(n(),S(X,null,{default:H(()=>[m(J(W),{title:"Contas"}),i.value?b("",!0):(n(),u("div",Qe,[m(U,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:g})])),i.value?(n(),u("div",Ge,[m(Ce,{onVoltar:_})])):b("",!0),i.value?b("",!0):(n(),u("div",Ze,[(n(),S(Ke,{key:w.value,ref:"listaDados",onDadoSelecionado:h})),x.value?(n(),u("div",He,[m(je,{dados:x.value},null,8,["dados"])])):b("",!0)]))]),_:1}))}};export{st as default};
