import{K as w,J as _,z as b,m as f,o as c,e as d,a as e,t as g,c as k,w as y,n as $,u as L,k as P,i as I,N as A,d as F,F as p,g as h,b as v,Z as U,r as B}from"./app-a9DBlDxm.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=w("user",{state:()=>({user:null}),actions:{async fetchUserProfile(){if(!this.user)try{const s=await _.get("/api/profile");s.data.status==="success"?this.user=s.data.data:console.error("Erro ao carregar o perfil:",s.data.message)}catch(s){console.error("Erro ao buscar perfil:",s)}},clearUser(){this.user=null},async fetchUnitData(){try{return(await _.get("/api/unidade")).data}catch(s){throw console.error("Erro ao buscar dados da unidade:",s),s}}}}),C={setup(){const s=N(),a=async()=>{var t,n;const o=await s.fetchUnitData();(o==null?void 0:o.cidade)!==((n=(t=s.user)==null?void 0:t.unidade)==null?void 0:n.cidade)&&(s.user.unidade.cidade=o.cidade)};b(async()=>{s.user||await s.fetchUserProfile(),await a()});const r=f(()=>s.user),l=f(()=>{var o;return(o=s.user)==null?void 0:o.unidade}),u=f(()=>{var o,t;return((o=r.value)==null?void 0:o.profile_photo_url)||`https://ui-avatars.com/api/?name=${i((t=r.value)==null?void 0:t.name)}&color=7F9CF5&background=EBF4FF`});function i(o){return o?o.split(" ").map(S=>S.charAt(0).toUpperCase()).join(""):"NN"}return{user:r,profilePhoto:u,unidade:l}}},E={class:"navbar"},M={class:"navbar-content"},q={class:"navbar-left"},x={class:"navbar-logo"},D=["href"],T={class:"navbar-right"},V={class:"user-info"},z=["src"],G={class:"user-details"},j={class:"user-name"},J={class:"user-location"};function K(s,a,r,l,u,i){var o,t;return c(),d("div",E,[a[3]||(a[3]=e("div",{class:"navbar-background"},null,-1)),e("div",M,[e("div",q,[e("div",x,[a[1]||(a[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:s.route("painel")},a[0]||(a[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,D)])])]),e("div",T,[a[2]||(a[2]=e("div",{class:"notification"},[e("div",{class:"circle"},[e("img",{src:"/storage/images/icon_notification.svg",alt:"icone notificação"})]),e("div",{class:"inner-circle"})],-1)),e("div",V,[e("img",{src:l.profilePhoto,alt:"Avatar",class:"avatar"},null,8,z),e("div",G,[e("div",j,g((o=l.user)==null?void 0:o.name),1),e("div",J,g(((t=l.unidade)==null?void 0:t.cidade)||"Taiksu Franchising"),1)])])])])])}const Q=m(C,[["render",K],["__scopeId","data-v-bfee7273"]]),R={class:"icon"},W=["src"],Z={class:"label"},H={type:"submit",class:"menu-item"},O={class:"icon"},X=["src"],Y={class:"label"},ss={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean},setup(s){const a=s,r=()=>{a.isLogout&&A.post(route("logout"))};return(l,u)=>s.isLogout?(c(),d("form",{key:1,onSubmit:I(r,["prevent"])},[e("button",H,[e("div",O,[e("img",{src:s.icon,alt:"icon"},null,8,X)]),e("div",Y,g(s.label),1)])],32)):(c(),k(L(P),{key:0,class:$(["menu-item",{active:s.isActive}]),href:s.link},{default:y(()=>[e("div",R,[e("img",{src:s.icon,alt:"icon"},null,8,W)]),e("div",Z,g(s.label),1)]),_:1},8,["class","href"]))}},es=m(ss,[["__scopeId","data-v-6921308f"]]),as={class:"category-title"},os={__name:"Slidebar",setup(s){const a=F(null);b(()=>{const i=localStorage.getItem("sidebarScrollPosition");i&&a.value&&(a.value.scrollTop=i)});const r=()=>{a.value&&localStorage.setItem("sidebarScrollPosition",a.value.scrollTop)},l=i=>{const o=window.location.pathname,t=new URL(i,window.location.origin).pathname;return o===t||o.startsWith(t)},u=[{name:"",items:[{label:"Visão Geral",icon:"/storage/images/insert_chart.svg",link:"painel",isLogout:!1}]},{name:"Painel",items:[{label:"E-mail",icon:"/storage/images/email.svg",link:"email",isLogout:!1},{label:"Comunidade",icon:"/storage/images/diversity_4.svg",link:"comunidade",isLogout:!1},{label:"Mídias",icon:"/storage/images/perm_media.svg",link:"midias",isLogout:!1}]},{name:"Gestão da rede",items:[{label:"Megafone",icon:"/storage/images/campaign.svg",link:"megafone",isLogout:!1},{label:"Franqueados",icon:"/storage/images/person.svg",link:"franqueados",isLogout:!1},{label:"Unidades",icon:"/storage/images/storefront.svg",link:"unidades",isLogout:!1}]},{name:"Parâmetros da franquia",items:[{label:"Insumos",icon:"/storage/images/insumos.svg",link:"insumos",isLogout:!1},{label:"Inspetor",icon:"/storage/images/inspecionador.svg",link:"inspetor",isLogout:!1},{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}];return(i,o)=>(c(),d("div",{class:"sidebar",ref_key:"sidebar",ref:a,onScroll:r},[(c(),d(p,null,h(u,t=>e("div",{key:t.name,class:"menu-category"},[e("div",as,g(t.name),1),(c(!0),d(p,null,h(t.items,n=>(c(),k(es,{key:n.link,label:n.label,icon:n.icon,link:i.route(n.link),isActive:l(i.route(n.link)),isLogout:n.isLogout},null,8,["label","icon","link","isActive","isLogout"]))),128))])),64))],544))}},ts=m(os,[["__scopeId","data-v-8427dd2e"]]),is={class:"content"},ns={__name:"AppLayout",props:{title:String},setup(s){return(a,r)=>(c(),d("div",null,[v(L(U),{title:s.title},null,8,["title"]),v(Q),v(ts),e("main",is,[B(a.$slots,"default",{},void 0,!0)])]))}},cs=m(ns,[["__scopeId","data-v-5a51be22"]]);export{cs as A};
