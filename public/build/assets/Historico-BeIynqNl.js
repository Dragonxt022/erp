import{d,j as w,i as N,e as n,o as r,a as s,f as m,m as V,v as j,F as k,h as C,t as g,n as A,k as $,c as B,w as I,b as S,u as T,Z as U}from"./app-BCWFP67y.js";import{L as q}from"./LayoutFranqueado-tZYbcvFk.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"search-container relative flex items-center w-full mb-4 mt-4"},E=["onClick"],F={class:"text-lg font-medium text-gray-900"},G={class:"text-sm text-gray-600"},O=["src","alt"],Q={key:0,class:"text-center text-gray-500 mt-8"},R={key:1,class:"text-center text-gray-500 mt-8"},X={key:2,class:"flex justify-center mt-6 space-x-2"},Z=["disabled"],J=["onClick"],K=["disabled"],f=5,W={__name:"ListarContasApagarHistorico",props:{apiUrl:{type:String,required:!0},title:{type:String,default:"Histórico"},subtitle:{type:String,default:"Visualize suas contas"}},emits:["dado-selecionado"],setup(h,{emit:y}){const i=h,u=d([]),l=d(""),x=d(1),o=d({current_page:1,last_page:1,from:1,to:1,total:0}),D=w(()=>{const a=[],e=Math.max(1,o.value.current_page-Math.floor(f/2)),t=Math.min(o.value.last_page,e+f-1),v=Math.max(1,t-f+1);for(let _=v;_<=t;_++)a.push(_);return a}),p=async(a=1)=>{try{if(l.value){const e=await $.get(i.apiUrl);u.value=e.data.data,o.value={current_page:1,last_page:1,from:1,to:u.value.length,total:u.value.length}}else{const e=await $.get(`${i.apiUrl}?page=${a}`);u.value=e.data.data,o.value={current_page:e.data.current_page,last_page:e.data.last_page,from:e.data.from,to:e.data.to,total:e.data.total},x.value=e.data.current_page}}catch(e){console.error("Erro ao carregar os dados:",e)}},c=a=>{a>=1&&a<=o.value.last_page&&p(a)};N(()=>{p(x.value)});const H=()=>{l.value?p():c(1)},b=w(()=>{const a=l.value.toLowerCase();return u.value.filter(e=>e.nome.toLowerCase().includes(a)||String(e.valor).includes(a))}),L=a=>{if(!a)return"";const e=a.split("-");return`${e[2]}/${e[1]}/${e[0]}`},M=a=>a==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(a,e)=>(r(),n("div",null,[s("div",z,[e[3]||(e[3]=s("div",{class:"absolute left-3"},[s("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),V(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),placeholder:"Realizar uma busca...",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onInput:H},null,544),[[j,l.value]])]),(r(!0),n(k,null,C(b.value,t=>(r(),n("div",{key:t.id,onClick:v=>a.selecionarDados(t),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[s("div",null,[s("p",F,g(t.nome),1),s("p",G,g(t.valor_formatado)+" - Pago em "+g(L(t.vencimento)),1)]),s("div",null,[s("img",{src:M(t.status),alt:t.status,class:"w-8 h-8"},null,8,O)])],8,E))),128)),!u.value.length&&!l.value?(r(),n("div",Q," Nenhuma despesa encontrada. ")):m("",!0),!b.value.length&&l.value?(r(),n("div",R," Nenhum resultado para a busca. ")):m("",!0),o.value.last_page>1&&!l.value?(r(),n("div",X,[s("button",{onClick:e[1]||(e[1]=t=>c(o.value.current_page-1)),disabled:o.value.current_page===1,class:"px-4 py-2 bg-green-500 text-white rounded-lg disabled:opacity-50"}," Anterior ",8,Z),(r(!0),n(k,null,C(D.value,t=>(r(),n("button",{key:t,onClick:v=>c(t),class:A({"px-4 py-2 rounded-lg":!0,"bg-green-700 text-white":t===o.value.current_page,"bg-gray-200 text-gray-700 hover:bg-gray-300":t!==o.value.current_page})},g(t),11,J))),128)),s("button",{onClick:e[2]||(e[2]=t=>c(o.value.current_page+1)),disabled:o.value.current_page===o.value.last_page,class:"px-4 py-2 bg-green-500 text-white rounded-lg disabled:opacity-50"}," Próximo ",8,K)])):m("",!0)]))}},Y=P(W,[["__scopeId","data-v-86161212"]]),ee={class:"mt-5"},te={class:"grid grid-cols-2 grid-rows-1 gap-4"},ae={class:"bg-white rounded-lg p-2"},se={__name:"Historico",setup(h){return(y,i)=>(r(),B(q,null,{default:I(()=>[S(T(U),{title:"Painel"}),i[0]||(i[0]=s("div",{class:"painel-title"},"Histórico de despesas",-1)),i[1]||(i[1]=s("div",{class:"painel-subtitle"},[s("p",null,"Visualize despesas antigas da sua operação")],-1)),s("div",ee,[s("div",te,[s("div",ae,[S(Y,{"api-url":"/api/cursto/contas-a-pagar/historico",title:"Histórico Completo",subtitle:"Todas as despesas pagas.",onDadoSelecionado:y.handleContaSelecionada},null,8,["onDadoSelecionado"])])])])]),_:1}))}},ne=P(se,[["__scopeId","data-v-19068427"]]);export{ne as default};
