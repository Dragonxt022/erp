import{L}from"./LayoutFranqueado-YCBd5PsI.js";import{d as x,j as $,i as k,e as d,o as a,a as e,p as N,v as q,F as w,h as D,t as n,k as A,f as h,c as y,w as B,b as C,u as S,Z as E}from"./app-DtYnN9d5.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"search-container relative flex items-center w-full mb-4"},R=["onClick"],H={class:"w-[110.73px] h-[24.32px] text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},I={class:"text-[20px]"},M={class:"w-[400px] h-[17.68px] text-[#6d6d6d] text-[13px] font-medium font-['Figtree'] leading-[20px]"},T={__name:"ListadoHistoricoPedido",emits:["dado-selecionado"],setup(p,{emit:_}){const g=_,l=x([]),c=x("");$(async()=>{try{const r=await A.get("/api/historico/lista");l.value=Object.values(r.data)}catch(r){console.error("Erro ao carregar os dados:",r)}});const f=r=>{g("dado-selecionado",r)},v=k(()=>{const r=c.value.toLowerCase();return l.value.filter(t=>String(t.id).toLowerCase().includes(r)||t.fornecedor_nome.toLowerCase().includes(r))});return k(()=>v.value.slice().sort((r,t)=>t.id-r.id)),(r,t)=>(a(),d("div",null,[e("div",P,[t[1]||(t[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),placeholder:"Buscar de pedidos",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[q,c.value]])]),(a(!0),d(w,null,D(v.value,s=>(a(),d("div",{key:s.id,onClick:o=>f(s),class:"w-full h-[63px] p-3 mt-4 px-[30px] bg-white rounded-[10px] shadow-[0px_0px_1px_0px_rgba(142,142,142,0.08)] cursor-pointer"},[e("div",H,[e("p",I,"# "+n(s.id),1)]),e("div",M,n(s.fornecedor_nome),1)],8,R))),128))]))}},j=b(T,[["__scopeId","data-v-bb362d8a"]]),Q={class:"elemento-fixo"},U={key:0},V={class:"mt-8"},G={class:"flex justify-between w-full h-[24.32px] text-[#262a27] text-[42px] font-semibold font-['Figtree'] leading-[12px]"},K={class:"flex justify-between w-full h-[17.68px] text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},O={class:"w-[250px]"},z={class:"w-[250px] text-right font-semibold"},X={class:"min-w-full table-auto"},Z=["onDblclick"],J={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},W={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Y={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},ee={key:0},te={key:1},oe={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},se={__name:"DetalhesHistoricoPedidos",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(p,{emit:_}){const g=p,l=x(!1),c=x(null),m=t=>{c.value=t},f=t=>{const s=Array.isArray(t.valor_unitario)?t.valor_unitario.reduce((u,i)=>u+i,0):parseFloat(t.valor_unitario),o=Array.isArray(t.quantidade)?t.quantidade.reduce((u,i)=>u+i,0):parseFloat(t.quantidade);return isNaN(s)||isNaN(o)?0:s*o},v=t=>parseFloat(t.valor_unitario),r=(t,s)=>{const o=Array.isArray(t)?t.reduce((u,i)=>u+i,0):parseFloat(t)||0;return s==="a_granel"?Number(o).toLocaleString("pt-BR",{minimumFractionDigits:3,maximumFractionDigits:3}):Number(o).toLocaleString("pt-BR",{maximumFractionDigits:0})};return(t,s)=>(a(),d("div",Q,[l.value?h("",!0):(a(),d("div",U,[e("div",V,[e("div",G,[e("p",null,"# "+n(p.dados.id),1),s[0]||(s[0]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1))]),e("div",K,[e("div",O,n(p.dados.fornecedor_nome),1),e("div",z,n(p.dados.created_at),1)]),e("table",X,[s[1]||(s[1]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," TOTAL ")])],-1)),e("tbody",null,[(a(!0),d(w,null,D(g.dados.itens_id,(o,u)=>(a(),d("tr",{key:o.id,onDblclick:i=>m(u)},[e("td",J,n(o.nome),1),e("td",W,[e("span",null,n(r(o.quantidade,o.unidadeDeMedida))+" "+n(o.unidadeDeMedida==="a_granel"?"KG":"UN"),1)]),e("td",Y,[o.unidadeDeMedida==="a_granel"?(a(),d("span",ee," R$ "+n(v(o).toFixed(2)),1)):(a(),d("span",te," R$ "+n(Array.isArray(o.valor_unitario)?o.valor_unitario.reduce((i,F)=>i+F,0).toFixed(2):o.valor_unitario.toFixed(2)),1))]),e("td",oe,[e("span",null,n(f(o).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)])],40,Z))),128))])])])]))]))}},ae=b(se,[["__scopeId","data-v-b97f37f1"]]),re={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},ne={key:0},de={class:"flex flex-col gap-4"},ie={__name:"Index",setup(p){const _=x(null),g=x(0),l=x(!1),c=m=>{_.value=m};return(m,f)=>(a(),y(L,null,{default:B(()=>[C(S(E),{title:"Histórico de Pedidos"}),f[0]||(f[0]=e("a",{href:"https://forms.gle/8nkNhrqCG5UHXLAQ9",target:"_blank",class:"w-full rounded-xl"},[e("img",{src:"/storage/images/banner-xl.png",alt:"Banner Estoque",class:"w-full mb-5 h-auto rounded-xl shadow-xl hover:shadow-none transition-all duration-300"})],-1)),e("div",re,[l.value?h("",!0):(a(),d("div",ne,[(a(),y(j,{key:g.value,ref:"listaDados",onDadoSelecionado:c}))])),e("div",de,[l.value?h("",!0):(a(),d(w,{key:0},[_.value?(a(),y(ae,{key:0,dados:_.value},null,8,["dados"])):h("",!0)],64))])])]),_:1}))}},xe=b(ie,[["__scopeId","data-v-f72543f0"]]);export{xe as default};
