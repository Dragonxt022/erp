import{d as k,j as f,i as j,e as n,o as t,a as e,c as $,f as q,w as y,t as b,n as S,u as I,z as L,O as M,q as E,C as N,p as T,F as A,h as C,b as w,N as V,P as R,k as D,Z as U,r as z}from"./app-DLUXqG4H.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"navbar"},O={class:"navbar-content"},J={class:"navbar-left"},Q={class:"navbar-logo"},W=["href"],Z={class:"navbar-right"},K={key:0,class:"user-info"},X=["src"],Y={class:"user-details"},ee={class:"user-name"},se={class:"user-location"},ae={key:1,class:"user-info loading"},oe={__name:"Navbar",setup(r){const s=k(null),m=f(()=>{var a;return(a=s.value)==null?void 0:a.unidade}),c=f(()=>{var a,i;return((a=s.value)==null?void 0:a.profile_photo_url)||`https://ui-avatars.com/api/?name=${_((i=s.value)==null?void 0:i.name)}&color=7F9CF5&background=EBF4FF`}),_=a=>a?a.split(" ").map(o=>o.charAt(0).toUpperCase()).join(""):"*",g=async()=>{try{const a=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)throw new Error("Erro ao carregar perfil do usuário");const i=await a.json();s.value=i.data}catch(a){console.error("Erro ao buscar perfil:",a),s.value=null}};return j(()=>{g()}),(a,i)=>(t(),n("div",H,[i[3]||(i[3]=e("div",{class:"navbar-background"},null,-1)),e("div",O,[e("div",J,[e("div",Q,[i[1]||(i[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:a.route("franqueado.painel")},i[0]||(i[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,W)])])]),e("div",Z,[s.value?(t(),$(I(L),{key:0,href:a.route("franqueado.perfil"),class:S(["user-info",{loading:!s.value}])},{default:y(()=>{var o;return[s.value?(t(),n("div",K,[e("img",{src:c.value,alt:"Avatar",class:"avatar"},null,8,X),e("div",Y,[e("div",ee,b(s.value.name),1),e("div",se,b(((o=m.value)==null?void 0:o.cidade)||"Taiksu Franchising"),1)])])):(t(),n("div",ae,i[2]||(i[2]=[e("div",{class:"avatar-skeleton"},null,-1),e("div",{class:"user-details-skeleton"},[e("div",{class:"name-skeleton"}),e("div",{class:"location-skeleton"})],-1)])))]}),_:1},8,["href","class"])):q("",!0)])])]))}},ie=x(oe,[["__scopeId","data-v-8a82a90b"]]),te={class:"icon"},ne=["src"],re={class:"label"},le={type:"submit",class:"w-full h-full flex items-center"},ue={class:"icon"},ce=["src"],de={class:"label"},me={key:2,class:"submenu"},ve={class:"label"},fe={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]},requiredPermission:String},setup(r){const s=r,m=M("userPermissions",k({})),c=k(!1),_=f(()=>c.value),g=f(()=>!s.requiredPermission||m.value[s.requiredPermission]),a=f(()=>s.submenuItems.filter(u=>!u.requiredPermission||m.value[u.requiredPermission])),i=u=>{a.value.length>0&&(u.preventDefault(),o())},o=()=>{c.value=!c.value,l()},v=()=>{const u=localStorage.getItem(`submenu-${s.link}`);u!==null&&(c.value=JSON.parse(u))},l=()=>{localStorage.setItem(`submenu-${s.link}`,JSON.stringify(c.value))},d=f(()=>h.value||s.isActive?"submenu-active":""),F=u=>{const P=window.location.pathname,p=new URL(route(u),window.location.origin).pathname;return P===p},h=f(()=>a.value.some(u=>F(u.link))),B=()=>{s.isLogout&&V.post(route("logout"))};return v(),E(h,()=>{h.value||N(()=>{c.value=!1,l()})}),E(c,()=>{N(()=>l())}),(u,P)=>(t(),n("div",null,[!r.isLogout&&r.link&&g.value?(t(),$(I(L),{key:0,class:S(["menu-item",[d.value,{active:r.isActive||h.value}]]),href:r.link||"#",onClick:i},{default:y(()=>[e("div",te,[e("img",{src:r.icon,alt:"icon"},null,8,ne)]),e("div",re,b(r.label),1),a.value.length>0?(t(),n("div",{key:0,class:S(["right-icon",{"rotate-icon":_.value}])},P[0]||(P[0]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):q("",!0)]),_:1},8,["class","href"])):r.isLogout&&g.value?(t(),n("form",{key:1,onSubmit:T(B,["prevent"]),class:"menu-item"},[e("button",le,[e("div",ue,[e("img",{src:r.icon,alt:"icon"},null,8,ce)]),e("div",de,b(r.label),1)])],32)):q("",!0),a.value.length>0&&(c.value||h.value)?(t(),n("div",me,[(t(!0),n(A,null,C(a.value,(p,G)=>(t(),n("div",{key:G},[w(I(L),{class:S(["submenu-item",{active:F(p.link)}]),href:u.route(p.link)},{default:y(()=>[e("div",ve,b(p.label),1)]),_:2},1032,["href","class"])]))),128))])):q("",!0)]))}},ge=x(fe,[["__scopeId","data-v-6a984529"]]),be={key:0,class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},_e={__name:"Slidebar",setup(r){const s=k(null),m=k({}),c=async()=>{try{const o=await D.get("/api/navbar-profile");m.value=o.data.data.permissions||{}}catch(o){console.error("Erro ao carregar permissões:",o),m.value={}}};R("userPermissions",m);const _=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Gestão da loja",items:[{label:"Gestão de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,requiredPermission:"controle_estoque",submenuItems:[{label:"Inventário",link:"franqueado.inventario",requiredPermission:"controle_estoque"},{label:"Saida de estoque",link:"franqueado.controleEstoque",requiredPermission:"controle_saida_estoque"},{label:"Fornecedores",link:"franqueado.fornecedores",requiredPermission:"controle_estoque"},{label:"Novo Pedidos",link:"franqueado.pedidos",requiredPermission:"controle_estoque"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos",requiredPermission:"controle_estoque"}],isActive:!1},{label:"Gestão de resíduos",icon:"/storage/images/delete_branco.svg",link:"franqueado.supervisaoResidos",isLogout:!1,requiredPermission:"gestao_salmao",submenuItems:[{label:"Limpeza de salmão",link:"franqueado.limpesaSalmoes",requiredPermission:"gestao_salmao"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,requiredPermission:"gestao_equipe",submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto",requiredPermission:"gestao_equipe"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento",requiredPermission:"gestao_equipe"}],isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,requiredPermission:"fluxo_caixa",submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos",requiredPermission:"fluxo_caixa"},{label:"Canais de Vendas",link:"franqueado.canaisVendas",requiredPermission:"fluxo_caixa"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa",requiredPermission:"fluxo_caixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,requiredPermission:"contas_pagar",submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas",requiredPermission:"contas_pagar"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,requiredPermission:"dre",isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}],g=f(()=>_.map(o=>({...o,items:o.items.filter(v=>!v.requiredPermission||m.value[v.requiredPermission]||v.submenuItems&&v.submenuItems.some(l=>!l.requiredPermission||m.value[l.requiredPermission]))})).filter(o=>o.items.length>0));j(async()=>{await c();const o=localStorage.getItem("sidebarScrollPosition");o&&s.value&&(s.value.scrollTop=o)});const a=()=>{s.value&&localStorage.setItem("sidebarScrollPosition",s.value.scrollTop)},i=o=>{const v=window.location.pathname,l=new URL(o,window.location.origin).pathname;return v===l||v.startsWith(l)};return(o,v)=>(t(),n("div",null,[e("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:s,onScroll:a},[(t(!0),n(A,null,C(g.value,l=>(t(),n("div",{key:l.name,class:"menu-category mb-6"},[l.items.length>0?(t(),n("div",be,b(l.name),1)):q("",!0),(t(!0),n(A,null,C(l.items,d=>(t(),$(ge,{key:d.link||"no-link",label:d.label,icon:d.icon,link:d.link?o.route(d.link):null,submenuItems:d.submenuItems,isActive:d.link?i(o.route(d.link)):!1,isLogout:d.isLogout,requiredPermission:d.requiredPermission},null,8,["label","icon","link","submenuItems","isActive","isLogout","requiredPermission"]))),128))]))),128))],544)]))}},he=x(_e,[["__scopeId","data-v-35898b70"]]),pe={class:"content"},qe={__name:"LayoutFranqueado",props:{title:String},setup(r){return(s,m)=>(t(),n("div",null,[w(I(U),{title:r.title},null,8,["title"]),w(ie),w(he),e("main",pe,[z(s.$slots,"default",{},void 0,!0)])]))}},we=x(qe,[["__scopeId","data-v-d4397c97"]]);export{we as L};
