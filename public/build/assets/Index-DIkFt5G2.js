import{l as C,Q as k,d as l,i as F,y as B,o as i,c as I,w as j,b as p,u as V,Z as D,e as n,a as e,h as N,t as d,f as v,j as q,v as E,n as L,k as f}from"./app-c-UP1aGF.js";import{L as P}from"./LayoutFranqueado-DL7craf_.js";import{B as $}from"./ButtonPrimaryMedio-CnPzkEcK.js";import{d as m}from"./index-FNlCd-sY.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-YKICj1Gs.js";const M={key:0,class:"loading-overlay"},T={class:"mt-5"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"},R={key:0,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},U={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},z={class:"text-[#6db631]"},Q={key:1,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},S={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},Z={class:"text-[#6db631]"},G={class:"text-[#262a27] text-[50px] font-bold font-['Figtree'] leading-[69.98px] tracking-wide"},H={class:"w-[427px] h-[43px] flex justify-center items-center"},J={class:"px-4 py-2 flex justify-center items-center opacity-80"},K={class:"text-[#262a27] text-xl font-bold font-['Figtree'] leading-[25px] tracking-tight"},W={class:"w-full"},X={class:"fixed bottom-4 right-4"},Y={__name:"Index",setup(aa){var x;const r=C(),{errors:ea,auth:g}=k().props,c=l(((x=g.user)==null?void 0:x.name)||"Usuário"),s=l(""),o=l(!1),u=t=>{let a=t.replace(/\D/g,"");return a.length>2&&(a=a.replace(/(\d)(\d{2})$/,"$1,$2")),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,"."),a},b=t=>{let a=t.target.value;a=u(a),s.value=a},_=F(()=>u(s.value)),y=async()=>{o.value=!0;const t=parseFloat(s.value.replace(/\D/g,""));if(!s.value||t<=0){r.warning("Por favor, insira um valor válido para abrir o caixa."),o.value=!1;return}try{const a=await f.post("/api/caixas/abrir",{valor_inicial:t});r.success("Caixa aberto com sucesso!"),console.log(a.data),m.Inertia.visit(route("franqueado.fluxoCaixa"))}catch(a){console.error(a),r.error("Ocorreu um erro ao abrir o caixa.")}finally{o.value=!1}},w=async()=>{o.value=!0;try{const t=await f.get("/api/caixas/abertos");t.data&&t.data.aberto&&(r.info("O caixa já esta aberto."),m.Inertia.visit(route("franqueado.fluxoCaixa")))}catch(t){console.error("Erro ao verificar caixa aberto:",t)}finally{o.value=!1}};return B(()=>{w()}),(t,a)=>(i(),I(P,null,{default:j(()=>[p(V(D),{title:"Fluxo do Caixa "}),o.value?(i(),n("div",M,a[1]||(a[1]=[e("div",{class:"spinner"},null,-1)]))):N("",!0),a[8]||(a[8]=e("div",{class:"flex justify-between items-center mb-4"},[e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Abertura de caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Iniciar a operação de faturamento diário ")])])],-1)),e("div",T,[e("div",O,[s.value?(i(),n("div",Q,[e("div",S,[e("span",Z,d(c.value),1),a[3]||(a[3]=e("span",{class:"text-[#6d6d6d]"},", vamos abrir o caixa com",-1))]),e("div",G,d(_.value),1),a[4]||(a[4]=e("div",{class:"text-[#6d6d6d] text-[17px] font-semibold font-['Figtree'] leading-snug"}," de saldo em gaveta ",-1))])):(i(),n("div",R,[e("div",U,[e("span",z,d(c.value),1),a[2]||(a[2]=e("span",{class:"text-[#6d6d6d]"},[v(" , com quantos reais "),e("br"),v(" você vai abrir o caixa? ")],-1))])])),e("div",H,[a[5]||(a[5]=e("div",{class:"w-6 h-6"},[e("img",{src:"/storage/images/payments_bleck.svg",alt:""})],-1)),a[6]||(a[6]=e("div",{class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug ml-2"}," Valor em gaveta ",-1)),a[7]||(a[7]=e("div",{class:"flex-grow h-7"},null,-1)),e("div",J,[e("div",K,[e("div",W,[q(e("input",{"onUpdate:modelValue":a[0]||(a[0]=h=>s.value=h),onInput:b,type:"text",class:"w-full h-10 px-4 border border-gray-300 rounded-lg focus:outline-none focus:border-[#6db631]",placeholder:"R$ 0,00"},null,544),[[E,s.value]])])])])])]),e("div",X,[p($,{class:L([s.value&&s.value>0?"bg-[#6db631]":"bg-[#6d6d6d]","w-full max-w-[200px]"]),text:"Abrir caixa",iconPath:"/storage/images/arrow_left_alt.svg",disabled:!s.value||s.value<=0,onClick:y},null,8,["class","disabled"])])])]),_:1}))}},na=A(Y,[["__scopeId","data-v-9463e0aa"]]);export{na as default};
