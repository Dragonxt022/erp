import{l as R,d as l,y as M,k as q,o as i,e as d,a,b as n,j as m,s as B,F as D,g as j,t as u,h as p,B as O,v as h,n as P,f as T,c as z,w as Z,u as G,Z as H}from"./app-B_IC-dFD.js";import{L as J}from"./LayoutFranqueado-BgK6aJaP.js";import{_ as v}from"./LabelModel-SppCun-u.js";import{B as K}from"./ButtonPrimaryMedio-rH5KEqq0.js";import{B as Q}from"./ButtonCancelar-Bp-URyJN.js";import{C as W}from"./ConfirmDialog-BYPrIcUt.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-_XaA0sgt.js";const X={class:"mt-5"},Y={class:"grid grid-cols-2 gap-8"},ee={class:"bg-white rounded-lg p-12"},ae={class:"flex gap-4"},te={class:"flex-1 mb-8"},oe=["value"],se={key:0,class:"text-red-500 text-sm"},re={class:"flex-1"},ne={key:0,class:"text-red-500 text-sm"},le={key:0,class:"text-red-500 text-sm"},ie={class:"col-span-1 row-span-2 mt-12"},de={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ue={key:0,class:"text-red-500 text-sm"},ce={key:1,class:"text-red-500 text-sm"},ve={class:"bg-white rounded-lg p-12"},me={class:"mt-2"},pe={class:"mt-2"},ge={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},fe={key:0,class:"text-red-500 text-sm"},xe={class:"form-buttons"},be={__name:"CadastroContas",setup(E){const b=R(),s=l(null),c=l(""),g=l(""),f=l(""),_=l(1),x=l(null),y=l(""),C=l(!1),k=l(""),V=l([]),o=l({});M(async()=>{try{const r=await q.get("/api/categorias/lista");V.value=r.data}catch(r){console.error("Erro ao carregar categorias:",r)}});const $=async()=>{o.value={},x.value||(o.value.categoria="A categoria é obrigatória"),s.value||(o.value.valor="O valor é obrigatório"),g.value||(o.value.emitidaEm="A data emitida é obrigatória"),f.value||(o.value.vencimento="A data de vencimento é obrigatória"),c.value.length>200&&(o.value.descricao="A descrição deve ter no máximo 200 caracteres");const r=parseFloat(s.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(r)?o.value.valor="O valor informado não é válido":s.value=r,Object.keys(o.value).length===0)try{const e=new FormData;if(e.append("categoria_id",x.value),e.append("valor",s.value),e.append("emitida_em",g.value),e.append("vencimento",f.value),e.append("dias_lembrete",_.value),e.append("descricao",c.value),y.value){const w=document.querySelector('input[type="file"]');w.files.length>0&&e.append("arquivo",w.files[0])}const t=await q.post("/api/cursto/contas-a-pagar",e);b.success("Conta cadastrada com sucesso",t.data),console.log("Conta cadastrada com sucesso",t.data),F()}catch(e){b.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",e)}},L=r=>{k.value=r,C.value=!0},S=()=>{$(),C.value=!1},U=()=>{C.value=!1},I=r=>{b.info("Arquivo selecionado com sucesso");const e=r.target.files[0];e&&(y.value=e.name)},A=r=>{let e=r.replace(/\D/g,"");e||(e="0");const t=e.slice(0,-2)||"0",w=e.slice(-2);return`R$ ${Number(t).toLocaleString("pt-BR")},${w}`},F=()=>{x.value=null,s.value=null,g.value="",f.value="",_.value=1,c.value="",y.value=""};return(r,e)=>(i(),d(D,null,[a("div",X,[a("div",Y,[a("div",ee,[a("div",ae,[a("div",te,[e[9]||(e[9]=a("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),n(v,{text:"Nome da Conta"}),m(a("select",{id:"categoria","onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[e[8]||(e[8]=a("option",{value:"",selected:""},"Selecione uma categoria",-1)),(i(!0),d(D,null,j(V.value,t=>(i(),d("option",{key:t.id,value:t.id},u(t.nome),9,oe))),128))],512),[[B,x.value]]),o.value.categoria?(i(),d("span",se,u(o.value.categoria),1)):p("",!0)]),a("div",re,[n(v,{text:"Lembrar - me"}),m(a("select",{id:"dias_lembrete","onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},e[10]||(e[10]=[O('<option value="1" data-v-4ff2a940>1 dia antes</option><option value="3" data-v-4ff2a940>3 dias antes</option><option value="5" data-v-4ff2a940>5 dias antes</option><option value="15" data-v-4ff2a940>15 dias antes</option><option value="30" data-v-4ff2a940>30 dias antes</option>',5)]),512),[[B,_.value]]),o.value.diasLembrete?(i(),d("span",ne,u(o.value.diasLembrete),1)):p("",!0)])]),n(v,{text:"Valor"}),m(a("input",{id:"valor","onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),onInput:e[3]||(e[3]=t=>s.value=A(s.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[h,s.value]]),o.value.valor?(i(),d("span",le,u(o.value.valor),1)):p("",!0),a("div",ie,[a("div",de,[n(v,{text:"Data emitida"}),m(a("input",{type:"date",id:"emitida_em","onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[h,g.value]]),o.value.emitidaEm?(i(),d("span",ue,u(o.value.emitidaEm),1)):p("",!0),e[11]||(e[11]=a("div",{class:"mt-12"},null,-1)),n(v,{text:"Data de vencimento"}),m(a("input",{type:"date",id:"vencimento","onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[h,f.value]]),o.value.vencimento?(i(),d("span",ce,u(o.value.vencimento),1)):p("",!0)])])]),a("div",ve,[n(v,{text:"Informações adicionais"}),m(a("textarea",{id:"descricao","onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[h,c.value]]),a("p",{class:P(["text-right text-xs mt-1",{"text-gray-500":c.value.length<=200,"text-red-500":c.value.length>200}])},u(c.value.length)+"/200 caracteres ",3),a("div",me,[n(v,{text:"Enviar boleto/fatura"}),a("div",pe,[a("label",ge,[T(u(y.value||"Selecionar Arquivo")+" ",1),e[12]||(e[12]=a("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),a("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:I},null,32),o.value.arquivo?(i(),d("span",fe,u(o.value.arquivo),1)):p("",!0)])]),a("div",xe,[n(Q,{class:"w-full",text:"Cancelar",onClick:F}),n(K,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:e[7]||(e[7]=t=>L("Cadastrar um nova conta?"))})])])])]),n(W,{isVisible:C.value,motivo:k.value,onConfirm:S,onCancel:U},null,8,["isVisible","motivo"])],64))}},_e=N(be,[["__scopeId","data-v-4ff2a940"]]),ye={__name:"Index",setup(E){return(b,s)=>(i(),z(J,null,{default:Z(()=>[n(G(H),{title:"Painel"}),s[0]||(s[0]=a("div",{class:"painel-title"},"Cadastrar Contas",-1)),s[1]||(s[1]=a("div",{class:"painel-subtitle"},[a("p",null,"Cadastrar contas a pagar da sua operação")],-1)),n(_e)]),_:1}))}},De=N(ye,[["__scopeId","data-v-3a4ede04"]]);export{De as default};
