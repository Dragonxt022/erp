import{L}from"./LayoutFranqueado-Di9HsLxs.js";import{d,j as C,i as V,e as r,o as n,f as m,a,F as D,h as j,t as w,k as b,m as I,s as M,b as f,c as y,w as z,u as S,Z as E}from"./app-DAiSBrZd.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as N}from"./AvisoSistemaNovo-BSfdfrao.js";import{I as P}from"./InputModel-Qpnb5zOV.js";import{_ as $}from"./LabelModel-BgQkVMMP.js";import{D as U}from"./Deslizante-BghtIMQB.js";/* empty css                                                                   */const A={key:0,class:"loading-overlay"},B={class:"card-container"},F=["onClick"],q={class:"card-inner flex items-center justify-center"},O={class:"icon-container flex items-center justify-center"},Q=["src"],T={class:"text-container"},K={class:"city font-bold"},R={__name:"ListarCanaisVendas",emits:["dado-selecionado"],setup(x,{emit:u}){const _=u,i=d([]),p=d(""),t=d(!1),l=async()=>{t.value=!0;try{const s=await b.get("/api/canais-vendas/lista");i.value=Object.values(s.data)}catch(s){console.error("Erro ao carregar os dados:",s)}finally{t.value=!1}},c=s=>s?new URL(s,window.location.origin).href:"/storage/images/no_imagem.svg";C(l);const g=s=>{_("dado-selecionado",s)},h=V(()=>{const s=p.value.toLowerCase();return i.value.filter(e=>String(e.id).toLowerCase().includes(s)||e.fornecedor_nome.toLowerCase().includes(s))});return(s,e)=>(n(),r("div",null,[t.value?(n(),r("div",A,e[0]||(e[0]=[a("div",{class:"spinner"},null,-1)]))):m("",!0),e[2]||(e[2]=a("div",{class:"painel-title"},"Canais de venda",-1)),e[3]||(e[3]=a("div",{class:"painel-subtitle"},[a("p",null,"Plataformas de e-commerce da sua unidade")],-1)),a("div",B,[(n(!0),r(D,null,j(h.value,o=>(n(),r("div",{key:o.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:v=>g(o)},[a("div",q,[a("div",O,[a("img",{src:c(o.img_icon),alt:"Ícone",class:"w-[42px] h-[42px] object-contain"},null,8,Q)]),a("div",T,[a("div",K,w(o.nome),1)]),e[1]||(e[1]=a("div",{class:"action-icon"},null,-1))])],8,F))),128))])]))}},Z=k(R,[["__scopeId","data-v-4788c62b"]]),G={class:"elemento-fixo"},H={key:0},J={key:0,class:"loading-overlay"},W={class:"w-full h-[237px] p-12 bg-white rounded-[20px] flex-col justify-center items-center gap-10 inline-flex"},X={class:"self-stretch text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},Y={class:"w-full h-[63px] relative"},ee={class:"mt-8 w-full p-12 bg-white rounded-[20px] flex justify-between items-center gap-5"},ae={class:"flex flex-col w-2/3"},se={class:"text-sm font-semibold text-gray-700"},te={class:"w-1/2 flex justify-end"},oe={__name:"DetalhesCanaisVendas",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(x,{emit:u}){const _=I(),i=x,p=d(!1),t=d(0),l=d(!1),c=d(!1);let g=!1;const h=async()=>{c.value=!0;try{const e=await b.get(`/api/canais-vendas/verificar-pagamentos/${i.dados.id}`);e.status===200&&e.data?(console.log("Dados recebidos:",e.data),t.value=e.data.data.porcentagem||0,l.value=e.data.data.status===1):(e.status===404||!e.data)&&(console.info("Nenhum canal de vendas foi encontrado."),t.value=0,l.value=!1)}catch(e){console.error("Erro ao busca canais de venda:",e),t.value=0,l.value=!1}finally{c.value=!1}},s=async()=>{try{await new Promise(v=>setTimeout(v,2e3)),c.value=!0;const e={unidade_id:i.dados.id,canal_de_vendas_id:i.dados.id,porcentagem:t.value,status:l.value?1:0},o=await b.post("/api/canais-vendas/upsert",e);g||(g=!0,_.success("Método atualizado",{onClose:()=>{g=!1}}))}catch(e){console.error("Erro ao atualizar o método de pagamento:",e)}finally{c.value=!1}};return M(()=>i.dados.id,()=>{h()}),C(()=>{h()}),(e,o)=>(n(),r("div",G,[p.value?m("",!0):(n(),r("div",H,[c.value?(n(),r("div",J,o[2]||(o[2]=[a("div",{class:"spinner"},null,-1)]))):m("",!0),a("div",W,[a("div",X,w(x.dados.nome),1),a("div",Y,[f($,{class:"font-semibold text-gray-900",text:"Quanto você paga de taxa?"}),f(P,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=v=>t.value=v),placeholder:"5%",onInput:s},null,8,["modelValue"])])]),a("div",ee,[a("div",ae,[f($,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),a("span",se,w(l.value?"Ativado":"Desativado"),1)]),a("div",te,[f(U,{status:l.value,"onUpdate:status":o[1]||(o[1]=v=>l.value=v),onClick:s},null,8,["status"])])])]))]))}},ne=k(oe,[["__scopeId","data-v-6d653556"]]),ie={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},le={key:0},de={class:"flex flex-col gap-4"},re={__name:"Index",setup(x){const u=d(null),_=d(0),i=d(!1),p=t=>{u.value=t};return(t,l)=>(n(),y(L,null,{default:z(()=>[f(S(E),{title:"Métodos de pagamentos"}),a("div",ie,[i.value?m("",!0):(n(),r("div",le,[(n(),y(Z,{key:_.value,ref:"listaDados",onDadoSelecionado:p}))])),a("div",de,[i.value?m("",!0):(n(),r(D,{key:0},[u.value?(n(),y(ne,{key:0,dados:u.value},null,8,["dados"])):m("",!0)],64))])]),f(N)]),_:1}))}},xe=k(re,[["__scopeId","data-v-1dd555be"]]);export{xe as default};
