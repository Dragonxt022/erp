import{l as R,d as i,i as O,k as U,e as p,o as d,a as e,b as v,m as V,f as $,x as j,F as S,h as T,t as f,a0 as Q,v as q,n as Z,g as G,q as H,j as J,c as M,w as W,u as X,Z as Y}from"./app-DEOfEQ61.js";import{L as ee}from"./LayoutFranqueado-Dbq0Xqcq.js";import{_ as D}from"./LabelModel-BB95mPtQ.js";import{B as K}from"./ButtonPrimaryMedio-wyJTPjhU.js";import{B as te}from"./ButtonCancelar-zn6x3ejY.js";import{C as P}from"./ConfirmDialog-Cdp9UR7N.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"mt-5"},oe={class:"grid grid-cols-2 gap-8"},se={class:"bg-white rounded-lg p-12"},ne={class:"flex gap-4"},re={class:"flex-1 mb-8"},le=["value"],ie={key:0,class:"text-red-500 text-sm"},de={class:"flex-1"},ce={key:0,class:"text-red-500 text-sm"},ue={key:0,class:"text-red-500 text-sm"},ve={class:"col-span-1 row-span-2 mt-12"},pe={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ge={key:0,class:"text-red-500 text-sm"},me={key:1,class:"text-red-500 text-sm"},fe={class:"bg-white rounded-lg p-12"},xe={class:"mt-2"},be={class:"mt-2"},_e={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},ye={key:0,class:"text-red-500 text-sm"},he={class:"form-buttons"},Ce={__name:"CadastroContas",emits:["voltar"],setup(x,{emit:w}){const o=R(),a=i(null),g=i(""),b=i(""),k=i(""),h=i(1),_=i(null),C=i(""),c=i(!1),u=i(""),y=i([]),s=i({}),B=w;O(async()=>{try{const m=await U.get("/api/categorias/seleto-contas");y.value=m.data}catch(m){console.error("Erro ao carregar categorias:",m)}});const z=async()=>{s.value={},_.value||(s.value.categoria="A categoria é obrigatória"),a.value||(s.value.valor="O valor é obrigatório"),b.value||(s.value.emitidaEm="A data emitida é obrigatória"),k.value||(s.value.vencimento="A data de vencimento é obrigatória"),g.value.length>200&&(s.value.descricao="A descrição deve ter no máximo 200 caracteres");const m=parseFloat(a.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(m)?s.value.valor="O valor informado não é válido":a.value=m,Object.keys(s.value).length===0)try{const t=new FormData;if(t.append("categoria_id",_.value),t.append("valor",a.value),t.append("emitida_em",b.value),t.append("vencimento",k.value),t.append("dias_lembrete",h.value),t.append("descricao",g.value),C.value){const F=document.querySelector('input[type="file"]');F.files.length>0&&t.append("arquivo",F.files[0])}const l=await U.post("/api/cursto/contas-a-pagar",t);o.success("Conta cadastrada com sucesso",l.data),console.log("Conta cadastrada com sucesso",l.data),r()}catch(t){o.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",t)}},L=m=>{u.value=m,c.value=!0},N=()=>{z(),c.value=!1},E=()=>{c.value=!1},I=m=>{o.info("Arquivo selecionado com sucesso");const t=m.target.files[0];t&&(C.value=t.name)},n=m=>{let t=m.replace(/\D/g,"");t||(t="0");const l=t.slice(0,-2)||"0",F=t.slice(-2);return`R$ ${Number(l).toLocaleString("pt-BR")},${F}`},r=()=>{_.value=null,a.value=null,b.value="",k.value="",h.value=1,g.value="",C.value="",B("voltar")};return(m,t)=>(d(),p(S,null,[t[13]||(t[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),t[14]||(t[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",ae,[e("div",oe,[e("div",se,[e("div",ne,[e("div",re,[t[9]||(t[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),v(D,{text:"Nome da Conta"}),V(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[8]||(t[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(d(!0),p(S,null,T(y.value,l=>(d(),p("option",{key:l.id,value:l.id},f(l.nome),9,le))),128))],512),[[j,_.value]]),s.value.categoria?(d(),p("span",ie,f(s.value.categoria),1)):$("",!0)]),e("div",de,[v(D,{text:"Lembrar - me"}),V(e("select",{id:"dias_lembrete","onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},t[10]||(t[10]=[Q('<option value="1" data-v-a038958e>1 dia antes</option><option value="3" data-v-a038958e>3 dias antes</option><option value="5" data-v-a038958e>5 dias antes</option><option value="15" data-v-a038958e>15 dias antes</option><option value="30" data-v-a038958e>30 dias antes</option>',5)]),512),[[j,h.value]]),s.value.diasLembrete?(d(),p("span",ce,f(s.value.diasLembrete),1)):$("",!0)])]),v(D,{text:"Valor"}),V(e("input",{id:"valor","onUpdate:modelValue":t[2]||(t[2]=l=>a.value=l),onInput:t[3]||(t[3]=l=>a.value=n(a.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[q,a.value]]),s.value.valor?(d(),p("span",ue,f(s.value.valor),1)):$("",!0),e("div",ve,[e("div",pe,[v(D,{text:"Data emitida"}),V(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":t[4]||(t[4]=l=>b.value=l),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[q,b.value]]),s.value.emitidaEm?(d(),p("span",ge,f(s.value.emitidaEm),1)):$("",!0),t[11]||(t[11]=e("div",{class:"mt-12"},null,-1)),v(D,{text:"Data de vencimento"}),V(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":t[5]||(t[5]=l=>k.value=l),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[q,k.value]]),s.value.vencimento?(d(),p("span",me,f(s.value.vencimento),1)):$("",!0)])])]),e("div",fe,[v(D,{text:"Informações adicionais"}),V(e("textarea",{id:"descricao","onUpdate:modelValue":t[6]||(t[6]=l=>g.value=l),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[q,g.value]]),e("p",{class:Z(["text-right text-xs mt-1",{"text-gray-500":g.value.length<=200,"text-red-500":g.value.length>200}])},f(g.value.length)+"/200 caracteres ",3),e("div",xe,[v(D,{text:"Enviar boleto/fatura"}),e("div",be,[e("label",_e,[G(f(C.value||"Selecionar Arquivo")+" ",1),t[12]||(t[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:I},null,32),s.value.arquivo?(d(),p("span",ye,f(s.value.arquivo),1)):$("",!0)])]),e("div",he,[v(te,{class:"w-full",text:"Cancelar",onClick:r}),v(K,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:t[7]||(t[7]=l=>L("Cadastrar um nova conta?"))})])])])]),v(P,{isVisible:c.value,motivo:u.value,onConfirm:N,onCancel:E},null,8,["isVisible","motivo"])],64))}},we=A(Ce,[["__scopeId","data-v-a038958e"]]),$e=["type"],ke={class:"text-center text-[15px] font-semibold font-['Figtree'] leading-tight"},De=["src"],Ve={__name:"ButtonClaroMedio",props:{text:{type:String,required:!0,default:"Nome do Botão"},type:{type:String,default:"button"},iconPath:{type:String,required:!1}},emits:["click"],setup(x,{emit:w}){const o=w,a=()=>{o("click")};return(g,b)=>(d(),p("button",{type:x.type,onClick:a,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5"},[e("span",ke,f(x.text),1),x.iconPath?(d(),p("img",{key:0,src:x.iconPath,alt:"icon",class:"h-6 w-6"},null,8,De)):$("",!0)],8,$e))}},qe=A(Ve,[["__scopeId","data-v-3918f9aa"]]),Ee={class:"elemento-fixo"},Fe={key:0},Se={class:"mt-8"},Ae={class:"w-full h-[530px] bg-white rounded-[20px] p-7 relative"},Be={class:"flex justify-between items-center"},ze={class:"text-[25px] font-bold font-['Figtree'] leading-8 tracking-tight"},Le={class:"text-[#6db631] text-xl font-normal font-['Figtree'] leading-[25px] tracking-tight"},Ne={class:"col-span-1 row-span-2 mt-8"},Ie={class:"col-span-1 row-span-2 mt-8"},Ue={class:"text-[#262a27] text-[12px] font-bold leading-[48px] tracking-wide"},je=["value"],Pe=["value"],Me={class:"w-full h-[100px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500"},Re={class:"flex space-x-4 mt-5"},Oe={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["voltar","atualiza"],setup(x,{emit:w}){const o=R(),a=x,g=w,b=i(a.dados.status),k=i(!1);i(null);const h=i(!1),_=i(!1),C=i(""),c=n=>{C.value=n,_.value=!0};H(()=>a.dados.status,n=>{b.value=n});const u=()=>{h.value=!1,L()},y=()=>{h.value=!1},s=()=>{_.value=!1,N()},B=()=>{_.value=!1},z=async()=>{try{const n=await axios.put(`/api/cursto/cursto/contas-a-pagar/${a.dados.id}/status`,{status:b.value});o.success(n.data.message),g("atualiza")}catch(n){console.error(n),o.error("Erro ao atualizar o status da conta")}},L=async()=>{if(!a.dados||!a.dados.id){o.error("Erro: Dados da conta não encontrados.");return}try{const n=await axios.post(`/api/cursto/contas-a-pagar/${a.dados.id}/pagar`);o.success(n.data.message),a.dados.status="pago",g("atualiza")}catch(n){console.error("Erro ao pagar a conta:",n),o.error("Erro ao pagar a conta")}},N=async n=>{if(!a.dados||!a.dados.id){o.error("Erro: Dados da conta não encontrados.");return}try{const r=await axios.delete(`/api/cursto/contas-a-pagar/${a.dados.id}`);o.success("Conta excluída com sucesso"),g("voltar")}catch(r){console.error("Erro ao excluir a conta:",r)}},E=n=>{if(!n)return"";const r=n.split("-");return`${r[2]}/${r[1]}/${r[0]}`},I=()=>{if(a.dados.arquivo){const n=document.createElement("a");n.href=`/${a.dados.arquivo}`,n.download=a.dados.arquivo.split("/").pop(),n.target="_blank",n.click(),o.info("Arquivo baixado com sucesso")}else o.warning("Arquivo não encontrado"),console.error("Arquivo não encontrado")};return(n,r)=>(d(),p(S,null,[e("div",Ee,[k.value?$("",!0):(d(),p("div",Fe,[e("div",Se,[e("div",Ae,[e("div",Be,[e("p",ze,f(x.dados.nome),1),e("button",{class:"text-gray-500 hover:text-red-600",onClick:r[0]||(r[0]=m=>c("Excluir essa conta?"))},r[2]||(r[2]=[e("img",{src:"/storage/images/delete.svg",alt:"Excluir",class:"w-6 h-6"},null,-1)]))]),e("p",Le,f(x.dados.valor_formatado),1),r[5]||(r[5]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1)),e("div",Ne,[e("div",Ie,[e("div",Ue,[v(D,{text:"Data emitida"}),e("input",{type:"text",id:"emitida_em",value:E(x.dados.emitida_em),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,je),r[3]||(r[3]=e("div",{class:"mt-12"},null,-1)),v(D,{text:"Data de vencimento"}),e("input",{type:"text",id:"vencimento",name:"vencimento",value:E(x.dados.vencimento),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Pe)])]),v(D,{text:"Informações adicionais"}),e("p",Me,f(x.dados.descricao),1)]),e("div",Re,[e("div",null,[V(e("select",{id:"status","onUpdate:modelValue":r[1]||(r[1]=m=>b.value=m),onChange:z,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5"},r[4]||(r[4]=[e("option",{value:"pendente"},"Pendente",-1),e("option",{value:"pago"},"Pago",-1),e("option",{value:"atrasado"},"Atrasado",-1)]),544),[[j,b.value]])]),v(qe,{text:"Baixar boleto",class:"text-[#6db631] bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out",onClick:I})])])])]))]),v(P,{isVisible:h.value,motivo:C.value,onConfirm:u,onCancel:y},null,8,["isVisible","motivo"]),v(P,{isVisible:_.value,motivo:C.value,onConfirm:s,onCancel:B},null,8,["isVisible","motivo"])],64))}},Te=A(Oe,[["__scopeId","data-v-b8f454e3"]]),Ke={class:"search-container relative flex items-center w-full mb-4"},Qe=["onClick"],Ze={class:"text-lg font-medium text-gray-900"},Ge={class:"text-sm text-gray-600"},He=["src","alt"],Je={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(x,{emit:w}){const o=w,a=i([]),g=i("");O(async()=>{try{const c=await U.get("/api/cursto/listar-contas-a-pagar");a.value=c.data.data}catch(c){console.error("Erro ao carregar os dados:",c)}});const k=c=>{o("dado-selecionado",c)},h=J(()=>{const c=g.value.toLowerCase();return a.value.filter(u=>u.nome.toLowerCase().includes(c)||String(u.valor).includes(c))}),_=c=>{const u=c.split("-");return`${u[2]}/${u[1]}/${u[0]}`},C=c=>c==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(c,u)=>(d(),p("div",null,[u[2]||(u[2]=e("div",{class:"painel-title"},"Contas a pagar",-1)),u[3]||(u[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),e("div",Ke,[u[1]||(u[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),V(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=y=>g.value=y),placeholder:"Buscar contas",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[q,g.value]])]),(d(!0),p(S,null,T(h.value,y=>(d(),p("div",{key:y.id,onClick:s=>k(y),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Ze,f(y.nome),1),e("p",Ge,f(y.valor_formatado)+" - Vence em "+f(_(y.vencimento)),1)]),e("div",null,[e("img",{src:C(y.status),alt:y.status,class:"w-8 h-8"},null,8,He)])],8,Qe))),128))]))}},We=A(Je,[["__scopeId","data-v-772e3fb2"]]),Xe={key:0,class:"fixed bottom-6 right-6"},Ye={key:1,class:"mt-3"},et={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},tt={key:0},dt={__name:"Index",setup(x){const w=i(0),o=i(null),a=i(!1),g=()=>{a.value=!a.value,a.value&&(o.value=null)},b=C=>{o.value=C},k=()=>{a.value=!1,w.value+=1,console.log("cancelarCadastro")},h=()=>{o.value=null,w.value+=1},_=()=>{w.value+=1};return(C,c)=>(d(),M(ee,null,{default:W(()=>[v(X(Y),{title:"Contas"}),a.value?$("",!0):(d(),p("div",Xe,[v(K,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:g})])),a.value?(d(),p("div",Ye,[v(we,{onVoltar:k,onAtualiza:_})])):$("",!0),a.value?$("",!0):(d(),p("div",et,[(d(),M(We,{key:w.value,ref:"listaDados",onDadoSelecionado:b})),o.value?(d(),p("div",tt,[v(Te,{dados:o.value,onVoltar:h,onAtualiza:h},null,8,["dados"])])):$("",!0)]))]),_:1}))}};export{dt as default};
