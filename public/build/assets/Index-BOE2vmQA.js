import{d as n,i as A,o as c,e as g,a as e,t as r,h as M,F as V,g as S,n as R,y as U,c as B,w as N,b as E,u as Q,Z as T,f as h,j as C,v as k,k as z}from"./app-BP_x6jAW.js";import{L as H}from"./LayoutFranqueado-CVhaVWnI.js";import{d as q}from"./dayjs.min-DhR3Yi5C.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-3EKvHYkJ.js";const P={class:"relative"},W={key:0},Z={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},G={class:"items-center mb-3"},J={class:"font-semibold items-center"},X={class:"ml-[90px]"},ee={class:"grid grid-cols-7 gap-1 text-center text-sm"},te=["onClick"],se={__name:"CalendarSimples2",setup(I,{emit:Y}){const $=Y,x=n(!1),u=n(q()),i=n(q()),w=n(q()),y=n(!0),j=["D","S","T","Q","Q","S","S"],L=A(()=>{const l=[],f=u.value.startOf("month"),d=i.value.endOf("month");for(let s=0;s<f.day();s++)l.push({day:"",date:null});for(let s=1;s<=d.date();s++){const t=f.date(s);l.push({day:s,date:t})}return l}),v=l=>l&&(l.isSame(u.value)||l.isSame(i.value)),_=l=>!l||!u.value||!i.value?!1:l.isAfter(u.value,"day")&&l.isBefore(i.value,"day"),F=l=>{l&&(y.value?(u.value=l.startOf("day"),y.value=!1):(i.value=l.endOf("day"),y.value=!0))},o=()=>{m(),x.value=!1},D=()=>{x.value=!x.value},O=()=>{const l=u.value.format("DD-MM-YYYY"),f=i.value.format("DD-MM-YYYY");console.log("Data inicial:",l),console.log("Data final:",f),$("update-filters",{startDate:l,endDate:f}),x.value=!1},m=()=>{u.value=q(),i.value=q()};return(l,f)=>(c(),g("div",P,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:D},[e("span",null,[u.value&&i.value?(c(),g("span",W,r(u.value.format("DD/MM/YYYY"))+" - "+r(i.value.format("DD/MM/YYYY")),1)):M("",!0)])]),x.value?(c(),g("div",Z,[e("div",G,[e("span",J,[e("span",null,r(w.value.format("MMM")),1),e("span",X,r(w.value.format("YYYY")),1)])]),e("div",ee,[(c(),g(V,null,S(j,d=>e("div",{class:"font-semibold text-gray-600",key:d},r(d),1)),64)),(c(!0),g(V,null,S(L.value,(d,s)=>(c(),g("div",{key:s,onClick:t=>F(d.date),class:R(["p-2 rounded-full cursor-pointer",v(d.date)?"bg-[#6db631] text-white":_(d.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},r(d.day),11,te))),128))]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:m}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:o}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:O}," OK ")])])])):M("",!0)]))}},ae={class:"flex justify-between items-center mb-4"},oe={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},le={class:"flex items-center space-x-2"},ne={class:"text-gray-900 text-[17px] font-semibold"},re={class:"mt-5"},ie={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},de={class:"bg-white rounded-lg p-7"},ue={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ce={class:"bg-white rounded-lg p-7"},pe={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ge={class:"bg-white rounded-lg p-7"},ve={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},xe={class:"mt-8"},me={class:"bg-white rounded-lg shadow"},fe={class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},ye={key:0,class:"grid grid-cols-5 gap-4 py-2 px-6 bg-gray-50"},_e={class:"space-y-1"},be={class:"flex items-center text-gray-900 font-semibold"},he=["src"],we={class:"text-gray-900 font-semibold"},Fe={class:"text-gray-900 font-medium"},Ce={class:"text-gray-600 font-semibold"},ke={class:"text-gray-500 font-semibold"},qe={key:1,class:"text-center mt-4"},De={__name:"Index",setup(I){const Y=n("0,00"),$=n("0,00"),x=n("0,00"),u=n("0,00"),i=n("0,00"),w=n("0,00"),y=n([]),j=n(!1),L=n(null),v=n(null),_=n(!0),F=n(!1),o=n({operacao:"",quantidade:"",quando:"",item:"",responsavel:""}),D={Entrada:{icon:"/storage/images/arrow_back_verde.svg",label:"Entrada"},Retirada:{icon:"/storage/images/arrow_back_red.svg",label:"Retirada"},Ajuste:{icon:"/storage/images/icon_ajustes.svg",label:"Ajuste"}},O=A(()=>y.value.filter(s=>(o.value.operacao===""||s.operacao.toLowerCase().includes(o.value.operacao.toLowerCase()))&&(o.value.quantidade===""||String(s.quantidade).includes(o.value.quantidade))&&(o.value.item===""||s.item.toLowerCase().includes(o.value.item.toLowerCase()))&&(o.value.responsavel===""||s.responsavel.toLowerCase().includes(o.value.responsavel.toLowerCase()))&&(o.value.quando===""||s.data.toLowerCase().includes(o.value.quando.toLowerCase()))).sort((s,t)=>v.value?_.value?s[v.value]>t[v.value]?1:-1:s[v.value]<t[v.value]?1:-1:0)),m=s=>{v.value===s?_.value=!_.value:(v.value=s,_.value=!0)},l=()=>{F.value=!F.value},f=s=>{console.log("Filtros atualizados:",s),d(s.startDate,s.endDate)},d=async(s=null,t=null)=>{try{let a="/api/estoque/incial";const b=[];s&&b.push(`start_date=${s}`),t&&b.push(`end_date=${t}`),b.length>0&&(a+=`?${b.join("&")}`);const p=(await z.get(a)).data;p.saldo_estoque_inicial?(y.value=Array.isArray(p.historicoMovimentacoes)?p.historicoMovimentacoes:Object.values(p.historicoMovimentacoes),Y.value=p.start_date||"não informado",$.value=p.end_date||"não informado",x.value=p.saldo_estoque_inicial||"0,00",u.value=p.entradas_durante_periodo||"0,00",i.value=p.saldo_estoque_final||"0,00",w.value=p.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(a){console.error("Erro ao buscar dados analíticos:",a)}};return U(()=>{d()}),(s,t)=>(c(),B(H,null,{default:N(()=>[E(Q(T),{title:"Controle de estoque"}),e("div",ae,[t[11]||(t[11]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",oe,[e("div",le,[t[10]||(t[10]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",ne,[E(se,{onUpdateFilters:f})])])])]),e("div",re,[e("div",ie,[e("div",de,[t[12]||(t[12]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),e("div",ue," R$ "+r(x.value),1)]),e("div",ce,[t[13]||(t[13]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),e("div",pe," R$ "+r(i.value),1)]),e("div",ge,[t[14]||(t[14]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," CMV ",-1)),e("div",ve,r(w.value),1)])])]),e("div",xe,[e("div",{class:"flex items-center justify-between mb-4"},[t[16]||(t[16]=e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),e("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:l},t[15]||(t[15]=[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),e("div",me,[e("div",fe,[e("span",{onClick:t[0]||(t[0]=a=>m("operacao")),class:"px-5 cursor-pointer flex items-center gap-2"},t[17]||(t[17]=[h(" OPERAÇÃO "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[1]||(t[1]=a=>m("quantidade")),class:"flex items-center gap-2 cursor-pointer"},t[18]||(t[18]=[h(" QTD. "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[2]||(t[2]=a=>m("item")),class:"cursor-pointer flex items-center gap-2"},t[19]||(t[19]=[h(" Item "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),e("span",{onClick:t[3]||(t[3]=a=>m("quanto")),class:"cursor-pointer flex items-center gap-2"},t[20]||(t[20]=[h(" Quando "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[4]||(t[4]=a=>m("responsavel")),class:"cursor-pointer flex items-center gap-2"},t[21]||(t[21]=[h(" Responsável "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),F.value?(c(),g("div",ye,[C(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.operacao=a),type:"text",placeholder:"Filtrar por operação",class:"p-2 border border-gray-300 rounded"},null,512),[[k,o.value.operacao]]),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.quantidade=a),type:"text",placeholder:"Filtrar por qtd.",class:"p-2 border border-gray-300 rounded"},null,512),[[k,o.value.quantidade]]),C(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.item=a),type:"text",placeholder:"Filtrar por item",class:"p-2 border border-gray-300 rounded"},null,512),[[k,o.value.item]]),C(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>o.value.quando=a),type:"text",placeholder:"Filtrar por quando",class:"p-2 border border-gray-300 rounded"},null,512),[[k,o.value.quando]]),C(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.responsavel=a),type:"text",placeholder:"Filtrar por responsável",class:"p-2 border border-gray-300 rounded"},null,512),[[k,o.value.responsavel]])])):M("",!0),e("div",{ref_key:"scrollContainer",ref:L,class:"overflow-y-auto max-h-96 scroll-hidden"},[e("ul",_e,[(c(!0),g(V,null,S(O.value,(a,b)=>(c(),g("li",{key:b,class:"hover:bg-gray-200 grid grid-cols-5 gap-1 px-6 py-2 text-[16px]"},[e("span",be,[e("img",{src:D[a.operacao].icon,alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,he),h(" "+r(D[a.operacao].label),1)]),e("span",we,r(a.quantidade)+" "+r(a.unidade==="unidade"?"uni":"kg"),1),e("span",Fe,r(a.item),1),e("span",Ce,r(a.data),1),e("span",ke,r(a.responsavel),1)]))),128))])],512),j.value?(c(),g("div",qe,"Carregando...")):M("",!0)])])]),_:1}))}},Ve=K(De,[["__scopeId","data-v-fdcbad0b"]]);export{Ve as default};
