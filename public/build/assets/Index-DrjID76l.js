import{A as q}from"./LayoutFranqueadora-DmHJi77m.js";import{d as t,y as G,i as K,o,e as d,a as e,h as y,F as $,g as U,n as Q,t as C,k as F,l as j,p as B,b as w,j as I,s as X,v as Z,m as H,c as D,w as J,u as W,Z as Y}from"./app-B-GVeD9k.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as z}from"./LabelModel-CgYpF69i.js";import{D as ee}from"./Deslizante-CrMk0ydJ.js";import{B as oe}from"./ButtonEditeMedio-C3KX_VIq.js";import{B as te}from"./ButtonPrimaryMedio-BnJ4uEnW.js";import{B as se}from"./ButtonCancelar-EBtZoh67.js";import{C as ae}from"./ConfirmDialog-hZ6OT_Tv.js";import"./user-5UeRmjgV.js";const le={key:0,class:"loading-overlay"},ne={class:"card-container"},ie=["onClick"],re={class:"card-inner"},de={class:"icon-container"},ce={class:"icon-leaf"},ue=["src"],me={class:"text-container"},ve={class:"city"},pe={__name:"ListarMetodosPagamentos",emits:["dado-selecionado"],setup(b,{emit:g}){const f=g,u=t([]),k=t(""),c=t(!1),m=async()=>{c.value=!0;try{const n=await F.get("/api/admin-metodos-pagamentos/lista");u.value=Object.values(n.data)}catch(n){console.error("Erro ao carregar os dados:",n)}finally{c.value=!1}},v=n=>n?new URL(n,window.location.origin).href:"/storage/images/no_imagem.svg";G(m);const _=n=>{f("dado-selecionado",n)},x=K(()=>{const n=k.value.toLowerCase();return u.value.filter(s=>String(s.id).toLowerCase().includes(n)||s.fornecedor_nome.toLowerCase().includes(n))});return(n,s)=>(o(),d("div",null,[c.value?(o(),d("div",le,s[0]||(s[0]=[e("div",{class:"spinner"},null,-1)]))):y("",!0),s[3]||(s[3]=e("div",{class:"painel-title"},"Métodos de pagamento",-1)),s[4]||(s[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Gerencie suas formas de pagamento para o fluxo de caixa")],-1)),e("div",ne,[(o(!0),d($,null,U(x.value,a=>(o(),d("div",{key:a.id,class:Q(["card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",{"bg-gray-300":!a.status}]),onClick:r=>_(a)},[e("div",re,[e("div",de,[s[1]||(s[1]=e("div",{class:"icon-bg"},null,-1)),e("div",ce,[e("img",{src:v(a.img_icon),alt:"Ícone"},null,8,ue)])]),e("div",me,[e("div",ve,C(a.nome),1)]),s[2]||(s[2]=e("div",{class:"action-icon"},null,-1))])],10,ie))),128))])]))}},fe=M(pe,[["__scopeId","data-v-43ad4f7e"]]),ge={key:0,class:"loading-overlay"},_e={class:"mt-5"},xe={class:"bg-white rounded-lg p-12"},he={class:"flex gap-8 mb-8"},ye={class:"flex flex-col items-center"},be={class:"relative group"},we=["src"],ke={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},$e={class:"flex flex-col flex-1"},Ce=["value"],De={key:0,class:"text-red-500 text-sm"},Me={class:"form-buttons"},ze={__name:"EditarMetodoPagamento",props:{metodo:{type:Object,default:null}},emits:["voltar"],setup(b,{emit:g}){const f=b,u=j(),k=g,c=t(f.metodo.id),m=t(f.metodo.nome),v=t(f.metodo.tipo),_=t(f.metodo.img_icon||""),x=t(null),n=t(""),s=t(null),a=t(!1),r=t(!1),h=t({}),L=["credito","debito","especie","cabal","alelo","pix","ticket","drex","pagamento_online","vr_alimentacao"],E=l=>l?new URL(l,window.location.origin).href:"/storage/images/no_imagem.svg",V=async()=>{if(h.value={},m.value||(h.value.nome="O nome é obrigatório"),v.value||(h.value.selectedTipo="O tipo é obrigatório"),!_.value&&!x.value&&(h.value.selectedFile="O ícone é obrigatório"),Object.keys(h.value).length===0)try{a.value=!0;const l=new FormData;l.append("id",c.value),l.append("nome",m.value),l.append("tipo",v.value),x.value&&l.append("profile_photo",x.value);const i=await F.post("/api/admin-metodos-pagamentos/atualizar",l,{headers:{"Content-Type":"multipart/form-data"}});u.success("Método de pagamento atualizado com sucesso!"),P()}catch(l){u.error("Erro ao atualizar método de pagamento"),console.error("Erro ao atualizar método de pagamento:",l)}finally{a.value=!1}},A=l=>{n.value=l,r.value=!0},O=()=>{V(),r.value=!1},S=()=>{r.value=!1},T=()=>{var l;(l=s.value)==null||l.click()},R=()=>{_.value="",x.value=null,u.info("Imagem removida.")},N=l=>{const i=l.target.files[0];if(i){x.value=i;const p=new FileReader;p.onload=()=>{_.value=p.result,u.success("Imagem carregada com sucesso!")},p.readAsDataURL(i)}},P=()=>{m.value="",L.value="",_.value="",x.value=null,h.value={},k("voltar")};return(l,i)=>(o(),d($,null,[a.value?(o(),d("div",ge,i[4]||(i[4]=[e("div",{class:"spinner"},null,-1)]))):y("",!0),e("div",_e,[e("div",xe,[e("div",he,[e("div",ye,[e("div",be,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden",onClick:T},[_.value?(o(),d($,{key:0},[e("img",{src:E(_.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,we),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:i[0]||(i[0]=B(()=>{},["stop"]))},[e("button",{onClick:B(R,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(o(),d("img",ke))]),e("input",{type:"file",ref_key:"fileInput",ref:s,accept:"image/*",class:"hidden",onChange:N},null,544)])]),e("div",$e,[w(z,{text:"Tipo",class:"mb-2"}),I(e("select",{"onUpdate:modelValue":i[1]||(i[1]=p=>v.value=p),class:"w-72 h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[i[5]||(i[5]=e("option",{value:"",disabled:"",selected:""},"Selecione um tipo",-1)),(o(),d($,null,U(L,p=>e("option",{key:p,value:p,class:"text-base font-semibold"},C(p),9,Ce)),64))],512),[[X,v.value]])])]),w(z,{text:"Nome do método"}),I(e("input",{id:"nome","onUpdate:modelValue":i[2]||(i[2]=p=>m.value=p),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"nome do método"},null,512),[[Z,m.value]]),h.value.nome?(o(),d("span",De,C(h.value.nome),1)):y("",!0),e("div",Me,[w(se,{class:"w-full",text:"Cancelar",onClick:P}),w(te,{text:"Atualizar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:i[3]||(i[3]=p=>A("Atualizar método de pagamento?"))})])])]),w(ae,{isVisible:r.value,motivo:n.value,onConfirm:O,onCancel:S},null,8,["isVisible","motivo"])],64))}},Fe=M(ze,[["__scopeId","data-v-2d6a1871"]]),Le={class:"elemento-fixo"},Pe={key:0},Be={key:0,class:"loading-overlay"},Ie={class:"w-full h-[100px] p-8 bg-white rounded-[20px] flex flex-col justify-center items-center gap-6"},Ue={class:"flex items-center gap-4"},je=["src"],Ee={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},Ve={class:"mt-4 w-full p-8 bg-white rounded-[20px] flex justify-between items-center gap-5"},Ae={class:"flex flex-col w-2/3"},Oe={class:"text-sm font-semibold text-gray-700"},Se={class:"w-1/2 flex justify-end"},Te={key:1,class:"mt-4"},Re={__name:"DetalhesMetodosPagamento",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(b,{emit:g}){const f=j(),u=b,k=g,c=t(!1),m=t(!1),v=t(!!u.dados.status);H(()=>u.dados.status,a=>{v.value=!!a});const _=()=>{c.value=!1,k("atualizar")},x=()=>{c.value=!c.value},n=a=>a?new URL(a,window.location.origin).href:"/storage/images/no_imagem.svg",s=async a=>{try{m.value=!0;const r={default_payment_method_id:u.dados.id,status:a?1:0};await F.post("/api/admin-metodos-pagamentos/alternar-status",r),v.value=a,f.success("Método atualizado"),k("atualizar")}catch(r){console.error("Erro ao atualizar o método de pagamento:",r)}finally{m.value=!1}};return(a,r)=>(o(),d("div",Le,[c.value?y("",!0):(o(),d("div",Pe,[m.value?(o(),d("div",Be,r[1]||(r[1]=[e("div",{class:"spinner"},null,-1)]))):y("",!0),r[2]||(r[2]=e("div",{class:"mt-[80px]"},null,-1)),e("div",Ie,[e("div",Ue,[e("img",{src:n(b.dados.img_icon),alt:"Ícone",class:"w-[50px] h-[50px]"},null,8,je),e("div",Ee,C(b.dados.nome),1)])]),e("div",Ve,[e("div",Ae,[w(z,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),e("span",Oe,C(v.value?"Ativado":"Desativado"),1)]),e("div",Se,[w(ee,{status:v.value,"onUpdate:status":r[0]||(r[0]=h=>v.value=h),onClick:s},null,8,["status"])])])])),b.dados.id&&!c.value?(o(),d("div",Te,[w(oe,{text:"Editar método","icon-path":"/storage/images/border_color.svg",onClick:x,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):y("",!0),c.value?(o(),D(Fe,{key:2,metodo:b.dados,isVisible:c.value,onVoltar:_},null,8,["metodo","isVisible"])):y("",!0)]))}},Ne=M(Re,[["__scopeId","data-v-88ae894e"]]),qe={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},Ge={key:0},Ke={class:"flex flex-col gap-4"},Qe={__name:"Index",setup(b){const g=t(null),f=t(0),u=t(!1),k=m=>{g.value=m},c=()=>{f.value+=1,g.value=null};return(m,v)=>(o(),D(q,null,{default:J(()=>[w(W(Y),{title:"Métodos de pagamentos"}),e("div",qe,[u.value?y("",!0):(o(),d("div",Ge,[(o(),D(fe,{key:f.value,ref:"listaDados",onDadoSelecionado:k}))])),e("div",Ke,[u.value?y("",!0):(o(),d($,{key:0},[g.value?(o(),D(Ne,{key:0,dados:g.value,onAtualizar:c},null,8,["dados"])):y("",!0)],64))])])]),_:1}))}},ao=M(Qe,[["__scopeId","data-v-11247bc4"]]);export{ao as default};
