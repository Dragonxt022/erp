import{P as dt,d as w,i as ft,o as T,e as H,a as n,t as M,h as st,F as nt,g as rt,n as K,j as it,z as lt,y as ht,R as mt,c as vt,w as gt,b as ut,u as pt,Z as xt,f as $t,k as yt}from"./app-D2PmQaG_.js";import{L as _t}from"./LayoutFranqueado-DG30u0Xg.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-BDypmgHj.js";var G={exports:{}},Mt=G.exports,ct;function Dt(){return ct||(ct=1,function(X,q){(function(_,x){X.exports=x()})(Mt,function(){var _=1e3,x=6e4,Y=36e5,j="millisecond",S="second",F="minute",d="hour",k="day",E="week",l="month",h="quarter",m="year",I="date",z="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var s=["th","st","nd","rd"],t=a%100;return"["+a+(s[(t-20)%10]||s[t]||s[0])+"]"}},O=function(a,s,t){var r=String(a);return!r||r.length>=s?a:""+Array(s+1-r.length).join(t)+a},J={s:O,z:function(a){var s=-a.utcOffset(),t=Math.abs(s),r=Math.floor(t/60),e=t%60;return(s<=0?"+":"-")+O(r,2,"0")+":"+O(e,2,"0")},m:function a(s,t){if(s.date()<t.date())return-a(t,s);var r=12*(t.year()-s.year())+(t.month()-s.month()),e=s.clone().add(r,l),o=t-e<0,i=s.clone().add(r+(o?-1:1),l);return+(-(r+(t-e)/(o?e-i:i-e))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:l,y:m,w:E,d:k,D:I,h:d,m:F,s:S,ms:j,Q:h}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},R="en",A={};A[R]=b;var at="$isDayjsObject",tt=function(a){return a instanceof Z||!(!a||!a[at])},Q=function a(s,t,r){var e;if(!s)return R;if(typeof s=="string"){var o=s.toLowerCase();A[o]&&(e=o),t&&(A[o]=t,e=o);var i=s.split("-");if(!e&&i.length>1)return a(i[0])}else{var c=s.name;A[c]=s,e=c}return!r&&e&&(R=e),e||!r&&R},g=function(a,s){if(tt(a))return a.clone();var t=typeof s=="object"?s:{};return t.date=a,t.args=arguments,new Z(t)},u=J;u.l=Q,u.i=tt,u.w=function(a,s){return g(a,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var Z=function(){function a(t){this.$L=Q(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[at]=!0}var s=a.prototype;return s.parse=function(t){this.$d=function(r){var e=r.date,o=r.utc;if(e===null)return new Date(NaN);if(u.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(v);if(i){var c=i[2]-1||0,f=(i[7]||"0").substring(0,3);return o?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,f)}}return new Date(e)}(t),this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return u},s.isValid=function(){return this.$d.toString()!==z},s.isSame=function(t,r){var e=g(t);return this.startOf(r)<=e&&e<=this.endOf(r)},s.isAfter=function(t,r){return g(t)<this.startOf(r)},s.isBefore=function(t,r){return this.endOf(r)<g(t)},s.$g=function(t,r,e){return u.u(t)?this[r]:this.set(e,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,r){var e=this,o=!!u.u(r)||r,i=u.p(t),c=function(V,D){var L=u.w(e.$u?Date.UTC(e.$y,D,V):new Date(e.$y,D,V),e);return o?L:L.endOf(k)},f=function(V,D){return u.w(e.toDate()[V].apply(e.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(D)),e)},p=this.$W,y=this.$M,C=this.$D,W="set"+(this.$u?"UTC":"");switch(i){case m:return o?c(1,0):c(31,11);case l:return o?c(1,y):c(0,y+1);case E:var N=this.$locale().weekStart||0,U=(p<N?p+7:p)-N;return c(o?C-U:C+(6-U),y);case k:case I:return f(W+"Hours",0);case d:return f(W+"Minutes",1);case F:return f(W+"Seconds",2);case S:return f(W+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,r){var e,o=u.p(t),i="set"+(this.$u?"UTC":""),c=(e={},e[k]=i+"Date",e[I]=i+"Date",e[l]=i+"Month",e[m]=i+"FullYear",e[d]=i+"Hours",e[F]=i+"Minutes",e[S]=i+"Seconds",e[j]=i+"Milliseconds",e)[o],f=o===k?this.$D+(r-this.$W):r;if(o===l||o===m){var p=this.clone().set(I,1);p.$d[c](f),p.init(),this.$d=p.set(I,Math.min(this.$D,p.daysInMonth())).$d}else c&&this.$d[c](f);return this.init(),this},s.set=function(t,r){return this.clone().$set(t,r)},s.get=function(t){return this[u.p(t)]()},s.add=function(t,r){var e,o=this;t=Number(t);var i=u.p(r),c=function(y){var C=g(o);return u.w(C.date(C.date()+Math.round(y*t)),o)};if(i===l)return this.set(l,this.$M+t);if(i===m)return this.set(m,this.$y+t);if(i===k)return c(1);if(i===E)return c(7);var f=(e={},e[F]=x,e[d]=Y,e[S]=_,e)[i]||1,p=this.$d.getTime()+t*f;return u.w(p,this)},s.subtract=function(t,r){return this.add(-1*t,r)},s.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||z;var o=t||"YYYY-MM-DDTHH:mm:ssZ",i=u.z(this),c=this.$H,f=this.$m,p=this.$M,y=e.weekdays,C=e.months,W=e.meridiem,N=function(D,L,B,P){return D&&(D[L]||D(r,o))||B[L].slice(0,P)},U=function(D){return u.s(c%12||12,D,"0")},V=W||function(D,L,B){var P=D<12?"AM":"PM";return B?P.toLowerCase():P};return o.replace($,function(D,L){return L||function(B){switch(B){case"YY":return String(r.$y).slice(-2);case"YYYY":return u.s(r.$y,4,"0");case"M":return p+1;case"MM":return u.s(p+1,2,"0");case"MMM":return N(e.monthsShort,p,C,3);case"MMMM":return N(C,p);case"D":return r.$D;case"DD":return u.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return N(e.weekdaysMin,r.$W,y,2);case"ddd":return N(e.weekdaysShort,r.$W,y,3);case"dddd":return y[r.$W];case"H":return String(c);case"HH":return u.s(c,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return V(c,f,!0);case"A":return V(c,f,!1);case"m":return String(f);case"mm":return u.s(f,2,"0");case"s":return String(r.$s);case"ss":return u.s(r.$s,2,"0");case"SSS":return u.s(r.$ms,3,"0");case"Z":return i}return null}(D)||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,r,e){var o,i=this,c=u.p(r),f=g(t),p=(f.utcOffset()-this.utcOffset())*x,y=this-f,C=function(){return u.m(i,f)};switch(c){case m:o=C()/12;break;case l:o=C();break;case h:o=C()/3;break;case E:o=(y-p)/6048e5;break;case k:o=(y-p)/864e5;break;case d:o=y/Y;break;case F:o=y/x;break;case S:o=y/_;break;default:o=y}return e?o:u.a(o)},s.daysInMonth=function(){return this.endOf(l).$D},s.$locale=function(){return A[this.$L]},s.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),o=Q(t,r,!0);return o&&(e.$L=o),e},s.clone=function(){return u.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},a}(),ot=Z.prototype;return g.prototype=ot,[["$ms",j],["$s",S],["$m",F],["$H",d],["$W",k],["$M",l],["$y",m],["$D",I]].forEach(function(a){ot[a[1]]=function(s){return this.$g(s,a[0],a[1])}}),g.extend=function(a,s){return a.$i||(a(s,Z,g),a.$i=!0),g},g.locale=Q,g.isDayjs=tt,g.unix=function(a){return g(1e3*a)},g.en=A[R],g.Ls=A,g.p={},g})}(G)),G.exports}var wt=Dt();const et=dt(wt),St={class:"relative"},kt={key:0},Ot={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},Yt={class:"flex justify-between items-center mb-3"},Ct={class:"font-semibold flex items-center"},Ft={class:"ml-[90px]"},jt={class:"grid grid-cols-7 gap-1 text-center text-sm"},It=["onClick"],Tt={class:"mt-5"},Et={class:"flex items-center space-x-4"},Ht={class:"flex items-center"},Lt={class:"flex items-center"},qt={__name:"CalendarFilter",setup(X){const q=w(!1),_=w(et().startOf("month")),x=w(et().endOf("month")),Y=w(et()),j=w(!0),S=["D","S","T","Q","Q","S","S"],F=ft(()=>{const v=[],$=_.value.startOf("month"),b=x.value.endOf("month");for(let O=0;O<$.day();O++)v.push({day:"",date:null});for(let O=1;O<=b.date();O++){const J=$.date(O);v.push({day:O,date:J})}return v}),d=w(""),k=()=>{Y.value=Y.value.subtract(1,"month")},E=()=>{Y.value=Y.value.add(1,"month")},l=v=>v&&(v.isSame(_.value)||v.isSame(x.value)),h=v=>!v||!_.value||!x.value?!1:v.isAfter(_.value,"day")&&v.isBefore(x.value,"day"),m=v=>{v&&(j.value?(_.value=v.startOf("day"),j.value=!1):(x.value=v.endOf("day"),j.value=!0))},I=()=>{q.value=!q.value},z=()=>{console.log("Data inicial:",_.value.format("DD-MM-YYYY")),console.log("Data final:",x.value.format("DD-MM-YYYY")),console.log("Categoria:",d.value),q.value=!1};return(v,$)=>(T(),H("div",St,[n("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:I},[n("span",null,[_.value&&x.value?(T(),H("span",kt,M(_.value.format("DD/MM/YYYY"))+" - "+M(x.value.format("DD/MM/YYYY")),1)):st("",!0)])]),q.value?(T(),H("div",Ot,[n("div",Yt,[n("button",{onClick:k,class:"p-2 rounded hover:bg-gray-300"}," < "),n("span",Ct,[n("span",null,M(Y.value.format("MMM")),1),n("span",Ft,M(Y.value.format("YYYY")),1)]),n("button",{onClick:E,class:"p-2 rounded hover:bg-gray-300"}," > ")]),n("div",jt,[(T(),H(nt,null,rt(S,b=>n("div",{class:"font-semibold text-gray-600",key:b},M(b),1)),64)),(T(!0),H(nt,null,rt(F.value,(b,O)=>(T(),H("div",{key:O,onClick:J=>m(b.date),class:K(["p-2 rounded-full cursor-pointer",l(b.date)?"bg-[#6db631] text-white":h(b.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},M(b.day),11,It))),128))]),n("div",Tt,[n("div",Et,[n("div",Ht,[it(n("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":$[0]||($[0]=b=>d.value=b),class:K(["mr-2",{"text-[#6db631]":d.value==="almoco","border-[#6db631]":d.value==="almoco"}])},null,2),[[lt,d.value]]),$[2]||($[2]=n("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),n("div",Lt,[it(n("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":$[1]||($[1]=b=>d.value=b),class:K(["mr-2",{"text-[#6db631]":d.value==="janta","border-[#6db631]":d.value==="janta"}])},null,2),[[lt,d.value]]),$[3]||($[3]=n("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),n("div",{class:"w-full mt-4 flex justify-between items-center"},[$[5]||($[5]=n("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight"}," Limpar ",-1)),n("div",{class:"flex gap-2"},[$[4]||($[4]=n("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight"}," Cancelar ",-1)),n("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:z}," OK ")])])])):st("",!0)]))}},At={class:"flex justify-between items-center mb-4"},Nt={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Vt={class:"flex items-center space-x-2"},Wt={class:"text-gray-900 text-[17px] font-semibold"},Rt={class:"mt-5"},Ut={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Bt={class:"bg-white rounded-lg p-7"},zt={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Jt={class:"bg-white rounded-lg p-7"},Qt={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Zt={class:"bg-white rounded-lg p-7"},Pt={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Kt={class:"mt-8"},Gt={class:"bg-white rounded-lg shadow"},Xt={class:"space-y-2"},te={class:"flex items-center text-gray-900 font-semibold"},ee=["src"],se={class:"text-center text-gray-900 font-semibold"},ne={class:"text-left text-gray-900 font-medium"},re={class:"text-center text-gray-600 font-semibold"},ae={class:"text-center text-gray-500 font-semibold"},oe={key:0,class:"text-center mt-4"},ie={__name:"Index",setup(X){const q=w("0.00"),_=w("0.00"),x=w("0.00"),Y=w([]),j=w(1),S=w(!1),F=w(!0),d=w(null),k=async()=>{if(!(S.value||!F.value)){S.value=!0;try{const{data:l}=await yt.get(`/api/estoque/incial?page=${j.value}`);_.value=l.valorInsumos,x.value=l.itensNoEstoque,Y.value.push(...l.historicoMovimentacoes.data),l.historicoMovimentacoes.current_page>=l.historicoMovimentacoes.last_page?F.value=!1:j.value++}catch(l){console.error("Erro ao carregar movimentações:",l)}finally{S.value=!1}}},E=()=>{const l=d.value;l.scrollTop+l.clientHeight>=l.scrollHeight-10&&k()};return ht(()=>{k(),d.value.addEventListener("scroll",E)}),mt(()=>{d.value&&d.value.removeEventListener("scroll",E)}),(l,h)=>(T(),vt(_t,null,{default:gt(()=>[ut(pt(xt),{title:"Controle de estoque"}),n("div",At,[h[1]||(h[1]=n("div",null,[n("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),n("div",{class:"painel-subtitle"},[n("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),n("div",Nt,[n("div",Vt,[h[0]||(h[0]=n("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),n("span",Wt,[ut(qt,{categories:l.categories,onSearch:l.handleSearch},null,8,["categories","onSearch"])])])])]),n("div",Rt,[n("div",Ut,[n("div",Bt,[h[2]||(h[2]=n("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),n("div",zt," R$ "+M(q.value),1)]),n("div",Jt,[h[3]||(h[3]=n("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),n("div",Qt," R$ "+M(_.value),1)]),n("div",Zt,[h[4]||(h[4]=n("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Itens no estoque ",-1)),n("div",Pt,M(x.value),1)])])]),n("div",Kt,[h[6]||(h[6]=n("div",{class:"flex items-center justify-between mb-4"},[n("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),n("div",{class:"flex items-center space-x-2"},[n("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"}),n("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ")])],-1)),n("div",Gt,[h[5]||(h[5]=n("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[n("span",{class:"text-left px-5"},"OPERAÇÃO"),n("span",{class:"text-center"},"QTD."),n("span",{class:"text-left"},"Item"),n("span",{class:"text-center"},"Quando"),n("span",{class:"text-center"},"Responsável")],-1)),n("div",{ref_key:"scrollContainer",ref:d,class:"overflow-y-auto max-h-96 scroll-hidden"},[n("ul",Xt,[(T(!0),H(nt,null,rt(Y.value,(m,I)=>(T(),H("li",{key:I,class:K({"hover:bg-gray-200":!0,"grid grid-cols-5 gap-2 px-6 py-3 text-[16px]":!0})},[n("span",te,[n("img",{src:m.operacao==="Entrada"?"/storage/images/arrow_back_verde.svg":"/storage/images/arrow_back_red.svg",alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,ee),$t(" "+M(m.operacao==="Entrada"?"Entrada":"Retirada"),1)]),n("span",se,M(m.quantidade)+" "+M(m.unidade==="unidade"?"uni":"kg"),1),n("span",ne,M(m.item),1),n("span",re,M(m.data),1),n("span",ae,M(m.responsavel),1)]))),128))])],512),S.value?(T(),H("div",oe,"Carregando...")):st("",!0)])])]),_:1}))}},fe=bt(ie,[["__scopeId","data-v-b46133d5"]]);export{fe as default};
