import{e as c,o as t,a as e,t as _,i as B,j as f,O as V,d as S,q as $,C,c as E,f as k,w as F,n as x,u as I,z as N,p as R,F as L,h as y,b as P,N as U,P as j,k as D,Z as T,r as z}from"./app-lPgd_fOa.js";import{u as H}from"./user-tR-GOyJg.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={setup(){const a=H();B(async()=>{a.user||await a.fetchUserProfile()});const s=f(()=>a.user),d=f(()=>{var n;return(n=a.user)==null?void 0:n.unidade}),i=f(()=>{var n,r;return((n=s.value)==null?void 0:n.profile_photo_url)||`https://ui-avatars.com/api/?name=${b((r=s.value)==null?void 0:r.name)}&color=7F9CF5&background=EBF4FF`});function b(n){return n?n.split(" ").map(o=>o.charAt(0).toUpperCase()).join(""):"*"}return{user:s,profilePhoto:i,unidade:d}}},J={class:"navbar"},Q={class:"navbar-content"},W={class:"navbar-left"},Z={class:"navbar-logo"},K=["href"],X={class:"navbar-right"},Y={class:"user-info"},ee=["src"],se={class:"user-details"},ae={class:"user-name"},oe={class:"user-location"};function ie(a,s,d,i,b,n){var r,g;return t(),c("div",J,[s[2]||(s[2]=e("div",{class:"navbar-background"},null,-1)),e("div",Q,[e("div",W,[e("div",Z,[s[1]||(s[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:a.route("franqueado.painel")},s[0]||(s[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,K)])])]),e("div",X,[e("div",Y,[e("img",{src:i.profilePhoto,alt:"Avatar",class:"avatar"},null,8,ee),e("div",se,[e("div",ae,_((r=i.user)==null?void 0:r.name),1),e("div",oe,_(((g=i.unidade)==null?void 0:g.cidade)||"Taiksu Franchising"),1)])])])])])}const te=w(O,[["render",ie],["__scopeId","data-v-4555e6c1"]]),ne={class:"icon"},re=["src"],le={class:"label"},ue={type:"submit",class:"w-full h-full flex items-center"},ce={class:"icon"},de=["src"],me={class:"label"},ve={key:2,class:"submenu"},fe={class:"label"},ge={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]},requiredPermission:String},setup(a){const s=a,d=V("userPermissions",S({})),i=S(!1),b=f(()=>i.value),n=f(()=>!s.requiredPermission||d.value[s.requiredPermission]),r=f(()=>s.submenuItems.filter(u=>!u.requiredPermission||d.value[u.requiredPermission])),g=u=>{r.value.length>0&&(u.preventDefault(),o())},o=()=>{i.value=!i.value,l()},v=()=>{const u=localStorage.getItem(`submenu-${s.link}`);u!==null&&(i.value=JSON.parse(u))},l=()=>{localStorage.setItem(`submenu-${s.link}`,JSON.stringify(i.value))},m=f(()=>h.value||s.isActive?"submenu-active":""),A=u=>{const p=window.location.pathname,q=new URL(route(u),window.location.origin).pathname;return p===q},h=f(()=>r.value.some(u=>A(u.link))),G=()=>{s.isLogout&&U.post(route("logout"))};return v(),$(h,()=>{h.value||C(()=>{i.value=!1,l()})}),$(i,()=>{C(()=>l())}),(u,p)=>(t(),c("div",null,[!a.isLogout&&a.link&&n.value?(t(),E(I(N),{key:0,class:x(["menu-item",[m.value,{active:a.isActive||h.value}]]),href:a.link||"#",onClick:g},{default:F(()=>[e("div",ne,[e("img",{src:a.icon,alt:"icon"},null,8,re)]),e("div",le,_(a.label),1),r.value.length>0?(t(),c("div",{key:0,class:x(["right-icon",{"rotate-icon":b.value}])},p[0]||(p[0]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):k("",!0)]),_:1},8,["class","href"])):a.isLogout&&n.value?(t(),c("form",{key:1,onSubmit:R(G,["prevent"]),class:"menu-item"},[e("button",ue,[e("div",ce,[e("img",{src:a.icon,alt:"icon"},null,8,de)]),e("div",me,_(a.label),1)])],32)):k("",!0),r.value.length>0&&(i.value||h.value)?(t(),c("div",ve,[(t(!0),c(L,null,y(r.value,(q,M)=>(t(),c("div",{key:M},[P(I(N),{class:x(["submenu-item",{active:A(q.link)}]),href:u.route(q.link)},{default:F(()=>[e("div",fe,_(q.label),1)]),_:2},1032,["href","class"])]))),128))])):k("",!0)]))}},be=w(ge,[["__scopeId","data-v-6a984529"]]),_e={key:0,class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},he={__name:"Slidebar",setup(a){const s=S(null),d=S({}),i=async()=>{try{const o=await D.get("/api/navbar-profile");d.value=o.data.data.permissions||{}}catch(o){console.error("Erro ao carregar permissões:",o),d.value={}}};j("userPermissions",d);const b=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Gestão da loja",items:[{label:"Gestão de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,requiredPermission:"controle_estoque",submenuItems:[{label:"Inventário",link:"franqueado.inventario",requiredPermission:"controle_estoque"},{label:"Saida de estoque",link:"franqueado.controleEstoque",requiredPermission:"controle_saida_estoque"},{label:"Fornecedores",link:"franqueado.fornecedores",requiredPermission:"controle_estoque"},{label:"Novo Pedidos",link:"franqueado.pedidos",requiredPermission:"controle_estoque"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos",requiredPermission:"controle_estoque"}],isActive:!1},{label:"Gestão de resíduos",icon:"/storage/images/delete_branco.svg",link:"franqueado.supervisaoResidos",isLogout:!1,requiredPermission:"gestao_salmao",submenuItems:[{label:"Limpeza de salmão",link:"franqueado.limpesaSalmoes",requiredPermission:"gestao_salmao"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,requiredPermission:"gestao_equipe",submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto",requiredPermission:"gestao_equipe"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento",requiredPermission:"gestao_equipe"}],isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,requiredPermission:"fluxo_caixa",submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos",requiredPermission:"fluxo_caixa"},{label:"Canais de Vendas",link:"franqueado.canaisVendas",requiredPermission:"fluxo_caixa"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa",requiredPermission:"fluxo_caixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,requiredPermission:"contas_pagar",submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas",requiredPermission:"contas_pagar"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,requiredPermission:"dre",isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}],n=f(()=>b.map(o=>({...o,items:o.items.filter(v=>!v.requiredPermission||d.value[v.requiredPermission]||v.submenuItems&&v.submenuItems.some(l=>!l.requiredPermission||d.value[l.requiredPermission]))})).filter(o=>o.items.length>0));B(async()=>{await i();const o=localStorage.getItem("sidebarScrollPosition");o&&s.value&&(s.value.scrollTop=o)});const r=()=>{s.value&&localStorage.setItem("sidebarScrollPosition",s.value.scrollTop)},g=o=>{const v=window.location.pathname,l=new URL(o,window.location.origin).pathname;return v===l||v.startsWith(l)};return(o,v)=>(t(),c("div",null,[e("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:s,onScroll:r},[(t(!0),c(L,null,y(n.value,l=>(t(),c("div",{key:l.name,class:"menu-category mb-6"},[l.items.length>0?(t(),c("div",_e,_(l.name),1)):k("",!0),(t(!0),c(L,null,y(l.items,m=>(t(),E(be,{key:m.link||"no-link",label:m.label,icon:m.icon,link:m.link?o.route(m.link):null,submenuItems:m.submenuItems,isActive:m.link?g(o.route(m.link)):!1,isLogout:m.isLogout,requiredPermission:m.requiredPermission},null,8,["label","icon","link","submenuItems","isActive","isLogout","requiredPermission"]))),128))]))),128))],544)]))}},qe=w(he,[["__scopeId","data-v-35898b70"]]),pe={class:"content"},ke={__name:"LayoutFranqueado",props:{title:String},setup(a){return(s,d)=>(t(),c("div",null,[P(I(T),{title:a.title},null,8,["title"]),P(te),P(qe),e("main",pe,[z(s.$slots,"default",{},void 0,!0)])]))}},Ie=w(ke,[["__scopeId","data-v-d4397c97"]]);export{Ie as L};
