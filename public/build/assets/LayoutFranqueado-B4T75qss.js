import{y as M,i as f,o as u,e as c,a as e,t as b,d as _,m as A,D as x,c as T,w as P,n as w,h as $,p as C,u as I,A as F,F as q,g as L,b as p,N as U,Z as D,r as G}from"./app-DCJSLaH4.js";import{u as R}from"./user-CLpy_9Gk.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={setup(){const s=R();M(async()=>{s.user||await s.fetchUserProfile()});const a=f(()=>s.user),o=f(()=>{var t;return(t=s.user)==null?void 0:t.unidade}),r=f(()=>{var t,n;return((t=a.value)==null?void 0:t.profile_photo_url)||`https://ui-avatars.com/api/?name=${d((n=a.value)==null?void 0:n.name)}&color=7F9CF5&background=EBF4FF`});function d(t){return t?t.split(" ").map(i=>i.charAt(0).toUpperCase()).join(""):"*"}return{user:a,profilePhoto:r,unidade:o}}},j={class:"navbar"},J={class:"navbar-content"},O={class:"navbar-left"},z={class:"navbar-logo"},Q=["href"],W={class:"navbar-right"},Z={class:"user-info"},K=["src"],X={class:"user-details"},Y={class:"user-name"},ee={class:"user-location"};function se(s,a,o,r,d,t){var n,l;return u(),c("div",j,[a[2]||(a[2]=e("div",{class:"navbar-background"},null,-1)),e("div",J,[e("div",O,[e("div",z,[a[1]||(a[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:s.route("franqueado.painel")},a[0]||(a[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,Q)])])]),e("div",W,[e("div",Z,[e("img",{src:r.profilePhoto,alt:"Avatar",class:"avatar"},null,8,K),e("div",X,[e("div",Y,b((n=r.user)==null?void 0:n.name),1),e("div",ee,b(((l=r.unidade)==null?void 0:l.cidade)||"Taiksu Franchising"),1)])])])])])}const ae=S(H,[["render",se],["__scopeId","data-v-4555e6c1"]]),te={class:"icon"},oe=["src"],ne={class:"label"},le={type:"submit",class:"w-full h-full flex items-center"},ie={class:"icon"},ue=["src"],re={class:"label"},ce={class:"label"},de={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]}},setup(s){const a=s,o=_(!1),r=_(null),d=_(null),t=f(()=>o.value),n=()=>{d.value&&(clearTimeout(d.value),d.value=null),r.value=setTimeout(()=>{o.value=!0},500)},l=()=>{r.value&&(clearTimeout(r.value),r.value=null),d.value=setTimeout(()=>{o.value=!1,k()},200)},i=()=>{const m=localStorage.getItem(`submenu-${a.link}`);m!==null&&(o.value=JSON.parse(m))},k=()=>{localStorage.setItem(`submenu-${a.link}`,JSON.stringify(o.value))},N=()=>{o.value=!o.value,k()},B=f(()=>h.value||a.isActive?"submenu-active":""),y=m=>{const v=window.location.pathname,g=new URL(route(m),window.location.origin).pathname;return v===g},h=f(()=>a.submenuItems.some(m=>y(m.link))),V=()=>{a.isLogout&&U.post(route("logout"))};return i(),A(h,()=>{h.value||x(()=>{o.value=!1,k()})}),A(o,m=>{x(()=>{k()})}),(m,v)=>(u(),c("div",null,[!s.isLogout&&s.link?(u(),T(I(F),{key:0,class:w(["menu-item",[B.value,{active:s.isActive||h.value}]]),href:s.link||"#",onClick:v[0]||(v[0]=C(g=>s.link&&N,["prevent"])),onMouseenter:n,onMouseleave:l},{default:P(()=>[e("div",te,[e("img",{src:s.icon,alt:"icon"},null,8,oe)]),e("div",ne,b(s.label),1),s.submenuItems&&s.submenuItems.length>0?(u(),c("div",{key:0,class:w(["right-icon",{"rotate-icon":t.value}])},v[1]||(v[1]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):$("",!0)]),_:1},8,["class","href"])):(u(),c("form",{key:1,onSubmit:C(V,["prevent"]),class:"menu-item"},[e("button",le,[e("div",ie,[e("img",{src:s.icon,alt:"icon"},null,8,ue)]),e("div",re,b(s.label),1)])],32)),s.submenuItems&&s.submenuItems.length>0&&(o.value||h.value)?(u(),c("div",{key:2,class:"submenu",onMouseenter:n,onMouseleave:l},[(u(!0),c(q,null,L(s.submenuItems,(g,E)=>(u(),c("div",{key:E},[p(I(F),{class:w(["submenu-item",{active:y(g.link)}]),href:m.route(g.link)},{default:P(()=>[e("div",ce,b(g.label),1)]),_:2},1032,["href","class"])]))),128))],32)):$("",!0)]))}},me=S(de,[["__scopeId","data-v-857340e4"]]),ve={class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},ge={__name:"Slidebar",setup(s){const a=_(null),o=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1}]},{name:"Gestão da loja",items:[{label:"Controle de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,submenuItems:[{label:"Inventário",icon:"/storage/images/add_product.svg",link:"franqueado.inventario"},{label:"Fornecedores",link:"franqueado.fornecedores"},{label:"Novo Pedidos",link:"franqueado.pedidos"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos"},{label:"Canais de Vendas",link:"franqueado.canaisVendas"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas"}],isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}];M(()=>{const t=localStorage.getItem("sidebarScrollPosition");t&&a.value&&(a.value.scrollTop=t)});const r=()=>{a.value&&localStorage.setItem("sidebarScrollPosition",a.value.scrollTop)},d=t=>{const n=window.location.pathname,l=new URL(t,window.location.origin).pathname;return n===l||n.startsWith(l)};return(t,n)=>(u(),c("div",null,[e("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:a,onScroll:r},[(u(),c(q,null,L(o,l=>e("div",{key:l.name,class:"menu-category mb-6"},[e("div",ve,b(l.name),1),(u(!0),c(q,null,L(l.items,i=>(u(),T(me,{key:i.link||"no-link",label:i.label,icon:i.icon,link:i.link?t.route(i.link):null,submenuItems:i.submenuItems,isActive:i.link?d(t.route(i.link)):!1,isLogout:i.isLogout},null,8,["label","icon","link","submenuItems","isActive","isLogout"]))),128))])),64))],544)]))}},fe=S(ge,[["__scopeId","data-v-e924efc9"]]),be={class:"content"},he={__name:"LayoutFranqueado",props:{title:String},setup(s){return(a,o)=>(u(),c("div",null,[p(I(D),{title:s.title},null,8,["title"]),p(ae),p(fe),e("main",be,[G(a.$slots,"default",{},void 0,!0)])]))}},we=S(he,[["__scopeId","data-v-d4397c97"]]);export{we as L};
