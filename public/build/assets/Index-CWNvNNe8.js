import{m as k,Q as F,d as n,i as I,j as B,c as j,o as l,w as D,b as d,e as c,f as V,a,u as N,Z as $,t as u,g as f,p as A,v as P,n as q,k as m}from"./app-BXAXZzIC.js";import{L}from"./LayoutFranqueado-BexKhhzF.js";import{B as E}from"./ButtonPrimaryMedio-jJzoAAnR.js";import{A as M}from"./AvisoSistemaNovo-CnBqcDRd.js";import{d as g}from"./index-9ZvZlL1D.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={key:0,class:"loading-overlay"},O={class:"mt-5"},S={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"},U={key:0,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},z={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},Q={class:"text-[#6db631]"},Z={key:1,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},G={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},H={class:"text-[#6db631]"},J={class:"text-[#262a27] text-[50px] font-bold font-['Figtree'] leading-[69.98px] tracking-wide"},K={class:"w-[427px] h-[43px] flex justify-center items-center"},W={class:"px-4 py-2 flex justify-center items-center opacity-80"},X={class:"text-[#262a27] text-xl font-bold font-['Figtree'] leading-[25px] tracking-tight"},Y={class:"w-full"},ee={class:"fixed bottom-4 right-4"},ae={__name:"Index",setup(te){var p;const i=k(),{errors:se,auth:b}=F().props,x=n(((p=b.user)==null?void 0:p.name)||"Usuário"),s=n(""),o=n(!1),v=t=>{let e=t.replace(/\D/g,"");return e.length>2&&(e=e.replace(/(\d)(\d{2})$/,"$1,$2")),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,"."),e},_=t=>{let e=t.target.value;e=v(e),s.value=e},y=t=>t/100,w=I(()=>v(s.value)),h=async()=>{o.value=!0;const t=parseInt(s.value.replace(/\D/g,""),10)||0,e=y(t);if(!t||e<=0){i.warning("Por favor, insira um valor válido para abrir o caixa."),o.value=!1;return}try{const r=await m.post("/api/caixas/abrir",{valor_inicial:e});i.success(`Caixa aberto com sucesso! Valor inicial: R$ ${e.toFixed(2)}`),console.log(r.data),g.Inertia.visit(route("franqueado.fluxoCaixa"))}catch(r){console.error(r),i.error("Ocorreu um erro ao abrir o caixa.")}finally{o.value=!1}},C=async()=>{o.value=!0;try{const t=await m.get("/api/caixas/abertos");t.data&&t.data.aberto&&(i.info("O caixa já esta aberto."),g.Inertia.visit(route("franqueado.fluxoCaixa")))}catch(t){console.error("Erro ao verificar caixa aberto:",t)}finally{o.value=!1}};return B(()=>{C()}),(t,e)=>(l(),j(L,null,{default:D(()=>[d(N($),{title:"Fluxo do Caixa "}),o.value?(l(),c("div",T,e[1]||(e[1]=[a("div",{class:"spinner"},null,-1)]))):V("",!0),e[8]||(e[8]=a("div",{class:"flex justify-between items-center mb-4"},[a("div",null,[a("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Abertura de caixa "),a("div",{class:"painel-subtitle"},[a("p",{class:"text-sm sm:text-base md:text-lg"}," Iniciar a operação de faturamento diário ")])])],-1)),a("div",O,[a("div",S,[s.value?(l(),c("div",Z,[a("div",G,[a("span",H,u(x.value),1),e[3]||(e[3]=a("span",{class:"text-[#6d6d6d]"},", vamos abrir o caixa com",-1))]),a("div",J,u(w.value),1),e[4]||(e[4]=a("div",{class:"text-[#6d6d6d] text-[17px] font-semibold font-['Figtree'] leading-snug"}," de saldo em gaveta ",-1))])):(l(),c("div",U,[a("div",z,[a("span",Q,u(x.value),1),e[2]||(e[2]=a("span",{class:"text-[#6d6d6d]"},[f(" , com quantos reais "),a("br"),f(" você vai abrir o caixa? ")],-1))])])),a("div",K,[e[5]||(e[5]=a("div",{class:"w-6 h-6"},[a("img",{src:"/storage/images/payments_bleck.svg",alt:""})],-1)),e[6]||(e[6]=a("div",{class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug ml-2"}," Valor em gaveta ",-1)),e[7]||(e[7]=a("div",{class:"flex-grow h-7"},null,-1)),a("div",W,[a("div",X,[a("div",Y,[A(a("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),onInput:_,type:"text",class:"w-full h-10 px-4 border border-gray-300 rounded-lg focus:outline-none focus:border-[#6db631]",placeholder:"R$ 0,00"},null,544),[[P,s.value]])])])])])]),a("div",ee,[d(E,{class:q([s.value&&s.value>0?"bg-[#6db631]":"bg-[#6d6d6d]","w-full max-w-[200px]"]),text:"Abrir caixa",iconPath:"/storage/images/arrow_left_alt.svg",disabled:!s.value||s.value<=0,onClick:h},null,8,["class","disabled"])])]),d(M)]),_:1}))}},ce=R(ae,[["__scopeId","data-v-fd3b70ef"]]);export{ce as default};
