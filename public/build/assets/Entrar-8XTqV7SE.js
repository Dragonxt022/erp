import{T as w,o as i,e as d,b as r,u as a,Z as v,a as s,t as h,h as k,p as x,j as p,v as m,w as u,f as $,n as y,A as _,F as B}from"./app-By-kSlsE.js";import{B as C}from"./ButtonPrimary-Bf0zCDVd.js";import{_ as c}from"./InputError-CpJHJRHt.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login-container"},S={class:"login-box"},V={class:"login-box-inner"},A={key:0,class:"mb-4 font-medium text-sm text-green-600"},F={class:"input-container"},I={class:"input-container"},N={__name:"Entrar",props:{canResetPassword:Boolean,status:String},setup(l){const o=w({cpf:"",password:"",remember:!0}),f=async()=>{o.transform(t=>({...t,remember:o.remember?"on":""})),o.post(route("entrar.painel"),{onFinish:()=>{o.reset("password"),g()}})},g=async()=>{try{const t=await axios.get("/get-token",{withCredentials:!0});if(t.data.status==="success"){const e=t.data.token;localStorage.setItem("auth_token",e),axios.defaults.headers.common.Authorization=`Bearer ${e}`,console.log("Token obtido com sucesso!")}else console.error("Erro ao obter o token:",t.data)}catch(t){console.error("Erro na requisição para obter o token:",t)}},b=t=>{let e=t.target.value.replace(/\D/g,"");e.length>11&&(e=e.slice(0,11)),e.length>9?e=e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length>6?e=e.replace(/(\d{3})(\d{3})(\d{3})/,"$1.$2.$3"):e.length>3&&(e=e.replace(/(\d{3})(\d{3})/,"$1.$2")),t.target.value=e,o.cpf=e};return(t,e)=>(i(),d(B,null,[r(a(v),{title:"Acessar"}),s("div",T,[e[7]||(e[7]=s("img",{class:"background-img",src:"/storage/images/mulher_login.png",alt:"Imagem de fundo representando uma mulher usando um computador"},null,-1)),e[8]||(e[8]=s("img",{class:"logo-img",src:"/storage/images/logo_tipo.png",alt:"Logo do Taiksu"},null,-1)),s("div",S,[s("div",V,[e[6]||(e[6]=s("div",{class:"title-container"},[s("div",{class:"title"},"Entrar no Taiksu"),s("div",{class:"subtitle"},"Acompanhe seu negócio em tempo real")],-1)),l.status?(i(),d("div",A,h(l.status),1)):k("",!0),s("form",{onSubmit:x(f,["prevent"])},[s("div",F,[e[2]||(e[2]=s("label",{for:"cpf"},"CPF",-1)),p(s("input",{id:"cpf","onUpdate:modelValue":e[0]||(e[0]=n=>a(o).cpf=n),onInput:b,class:"input",type:"text",placeholder:"123.456.789-90",autocomplete:"off","aria-label":"CPF"},null,544),[[m,a(o).cpf]]),r(c,{class:"mt-2",message:a(o).errors.cpf},null,8,["message"])]),s("div",I,[e[3]||(e[3]=s("label",{for:"password"},"Senha",-1)),p(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>a(o).password=n),class:"input",type:"password",placeholder:"●●●●●●●●●●●●",autocomplete:"off","aria-label":"Senha"},null,512),[[m,a(o).password]]),r(c,{class:"mt-2",message:a(o).errors.password},null,8,["message"])]),r(C,{class:y({"opacity-25":a(o).processing}),disabled:a(o).processing},{default:u(()=>e[4]||(e[4]=[$(" Acessar ")])),_:1},8,["class","disabled"]),r(a(_),{href:t.route("password.request"),class:"cursor-pointer"},{default:u(()=>e[5]||(e[5]=[s("p",{class:"forgot-password"},"Esqueci minha senha",-1)])),_:1},8,["href"])],32)])])])],64))}},z=E(N,[["__scopeId","data-v-ade3a651"]]);export{z as default};
