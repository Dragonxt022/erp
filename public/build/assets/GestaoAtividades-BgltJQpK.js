import{l as Z,d as s,e as l,o,f as D,a as e,t as E,b as n,F,h as S,j as ae,i as H,m as J,v as te,k as L,p as z,n as K,x as Y,q as se,c as P,w as W,u as oe,Z as le,s as ie}from"./app-DJ-haiWO.js";import{A as re}from"./LayoutFranqueadora-DVPV_mct.js";import{B as G}from"./ButtonPrimaryMedio-DnwgmW3g.js";import{B as ne}from"./ButtonEditeMedio-CcgX-tul.js";import{C as de}from"./ConfirmDialog-Bb4uSVb3.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as U}from"./InputModel-MvmS2S56.js";import{_ as j}from"./LabelModel-BSY1UZMn.js";import{B as ee}from"./ButtonCancelar-BfLr76dE.js";const ce={key:0},ue={class:"w-full h-[180px] bg-white rounded-[20px] p-12 mb-4"},pe={class:"flex items-center"},ve={class:"w-1/1 flex justify-center"},me=["src"],fe={class:"w-2/3 pl-5"},ge={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},he={class:"w-1/1"},xe={class:"w-full h-[280px] bg-white rounded-[20px] px-12 pt-5 relative overflow-hidden"},_e={class:"max-h-[220px] overflow-y-auto pr-2 scrollbar-hide"},ye={class:"list-decimal list-inside space-y-2 mt-4 text-gray-800 text-[15px] font-['Figtree']"},be={key:1,class:"mt-4"},we={__name:"DetalhesGestaoOperacional",props:{informacoes:{type:Object,required:!0}},emits:["editar","cancelar"],setup(C,{emit:w}){const r=Z(),x=C,$=w,f=s(!1),p=s("");s("");const h=b=>{p.value=b,f.value=!0},d=s(!1),v=()=>{_(),f.value=!1},m=()=>{f.value=!1},_=async()=>{try{d.value=!0;const b=await axios.delete(`/api/atividades/${x.informacoes.id}`);r.success("setor excluído com sucesso!"),d.value=!1,$("cancelar")}catch(b){console.error("Erro ao excluir setor:",b),r.error("Erro ao excluir setor."),d.value=!1}},i=b=>b?`/storage/${b}`:"/storage/images/no-imagem.jpg",g=s(!1),k=s(!1),I=()=>{$("editar",x.informacoes),k.value=!k.value,g.value=!1};return(b,V)=>(o(),l(F,null,[k.value?D("",!0):(o(),l("div",ce,[e("div",ue,[e("div",pe,[e("div",ve,[e("img",{src:i(C.informacoes.profile_photo),alt:"Imagem",class:"w-20 h-20 p-2 rounded-md shadow-lg"},null,8,me)]),e("div",fe,[e("div",ge,E(C.informacoes.name||"N/A"),1)]),e("div",he,[n(de,{isVisible:f.value,motivo:p.value,onConfirm:v,onCancel:m},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-[110px] right-[70px] cursor-pointer",onClick:V[0]||(V[0]=A=>h("Excluir Atividade"))},V[1]||(V[1]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-6 h-6"},null,-1)]))])])]),V[2]||(V[2]=e("div",{class:"text-gray-700 text-[15px] font-semibold font-['Figtree'] mt-2 mb-2"}," Etapas da atividade ",-1)),e("div",xe,[e("div",_e,[e("ul",ye,[(o(!0),l(F,null,S(C.informacoes.etapas,(A,B)=>(o(),l("li",{key:A.id,class:"items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},E(A.descricao),1))),128))])])])])),C.informacoes.id&&!k.value?(o(),l("div",be,[n(ne,{text:"Editar informacoes","icon-path":"/storage/images/border_color.svg",onClick:I,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):D("",!0)],64))}},ke=M(we,[["__scopeId","data-v-d1175a28"]]),Ce={class:"search-container relative flex items-center w-full mb-4"},$e={class:"card-container"},Ee=["onClick"],Fe={class:"card-inner"},Ve={class:"icon-container"},Ie=["src"],Ae={class:"text-container"},je={class:"city"},De={class:"owner text-gray-500 text-sm"},Ue={__name:"ListarGestaoAtividade",emits:["selecionado"],setup(C,{emit:w}){const r=s([]),x=s(""),$=w,f=async()=>{try{const d=await L.get("/api/atividades");r.value=d.data.data}catch(d){console.error("Erro ao carregar operacionais:",d)}},p=d=>{$("selecionado",d),console.log("Selecionado:",d)},h=ae(()=>r.value.filter(d=>d.name.toLowerCase().includes(x.value.toLowerCase())));return H(f),(d,v)=>(o(),l("div",null,[v[2]||(v[2]=e("div",{class:"painel-title"},"Gestão de atividades",-1)),v[3]||(v[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Visualize as atividades dos processos da franquia")],-1)),e("div",Ce,[v[1]||(v[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),J(e("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=m=>x.value=m),placeholder:"Buscar uma atividade",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[te,x.value]])]),e("div",$e,[(o(!0),l(F,null,S(h.value,m=>(o(),l("div",{key:m.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:_=>p(m)},[e("div",Fe,[e("div",Ve,[e("img",{src:m.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,Ie)]),e("div",Ae,[e("div",je,E(m.name),1),e("div",De,E(m.etapas.length)+" Etapas",1)])])],8,Ee))),128))])]))}},Se=M(Ue,[["__scopeId","data-v-d08b3d79"]]),Be={key:0,class:"sidebar-container"},Le={key:0,class:"loading-overlay"},Ge={key:"listagem",class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},Me={class:"w-full h-full bg-white rounded-[20px] p-12"},qe={class:"flex justify-center mb-6 relative group"},Pe=["src"],ze={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Te={class:"w-full h-full bg-white rounded-[20px] p-12"},Oe={class:"mt-4 space-y-2"},Ne=["onClick"],Re={class:"w-full h-full bg-white rounded-[20px] p-12"},Xe={class:"flex-1"},Qe=["value"],Ze={class:"relative"},He={class:"absolute bottom-6 right-6 flex space-x-4 z-10"},Je={__name:"CadastroGestaoAtividade",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(C,{emit:w}){const r=Z(),x=w,$=s(!1),f=s(""),p=s(""),h=s(null),d=s(null),v=s([]),m=s(null),_=s([]),i=s(""),g=s(""),k=s(""),I=s(!1);H(async()=>{try{const y=await L.get("/api/admin-operacionais");v.value=y.data.data}catch{r.error("Erro ao carregar setores operacionais.")}});const b=()=>{if(_.value.length>=5){r.warning("Você só pode adicionar no máximo 5 etapas.");return}i.value.trim()!==""&&(_.value.push({descricao:i.value}),i.value="")},V=y=>{_.value.splice(y,1)},A=()=>{B(),x("cancelar")},B=()=>{f.value="",k.value=""},T=()=>f.value?!0:(r.error("Por favor, preencha todos os campos obrigatórios."),k.value="Por favor, preencha todos os campos obrigatórios.",!1),O=async()=>{var y,t;if(T())try{I.value=!0;const a=new FormData;a.append("name",f.value),a.append("setor_id",m.value),a.append("tempo_estimated",parseInt(g.value)),_.value.forEach((u,Q)=>{a.append(`etapas[${Q}][descricao]`,u.descricao)}),h.value&&a.append("profile_photo",h.value);const c=await L.post("/api/atividades",a,{headers:{"Content-Type":"multipart/form-data"}});r.success("setor cadastrada com sucesso!"),A()}catch(a){r.error("Erro ao cadastrar setor."),k.value=((t=(y=a.response)==null?void 0:y.data)==null?void 0:t.message)||"Erro ao cadastrar setor."}finally{I.value=!1}},N=()=>{var y;(y=d.value)==null||y.click()},R=()=>{p.value="",h.value=null,r.info("Imagem removida.")},X=y=>{const t=y.target.files[0];if(t){h.value=t;const a=new FileReader;a.onload=()=>{p.value=a.result,r.success("Imagem carregada com sucesso!")},a.readAsDataURL(t)}};return(y,t)=>(o(),l(F,null,[C.isVisible?(o(),l("div",Be,[I.value?(o(),l("div",Le,t[5]||(t[5]=[e("div",{class:"spinner"},null,-1)]))):D("",!0),t[9]||(t[9]=e("div",{class:"painel-title"},"Cadastrar nova atividade",-1)),t[10]||(t[10]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastre atividades para os processos da franquia")],-1)),$.value?D("",!0):(o(),l("div",Ge,[e("div",Me,[e("div",qe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:N},[p.value?(o(),l(F,{key:0},[e("img",{src:p.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Pe),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:t[0]||(t[0]=z(()=>{},["stop"]))},[e("button",{onClick:z(R,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(o(),l("img",ze))]),e("input",{type:"file",ref_key:"fileInput",ref:d,accept:"image/*",class:"hidden",onChange:X},null,544)]),n(j,{text:"Nome da atividade"}),n(U,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),placeholder:"Limpar camarão"},null,8,["modelValue"])]),e("div",Te,[n(j,{text:"Etapas da atividade"}),n(U,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a),placeholder:"Descreva a etapa aqui..."},null,8,["modelValue"]),e("p",{class:K(["text-right text-xs mt-1",{"text-gray-500":i.value.length<=42,"text-red-500":i.value.length>42}])},E(i.value.length)+"/42 caracteres ",3),e("ul",Oe,[(o(!0),l(F,null,S(_.value,(a,c)=>(o(),l("li",{key:c,class:"flex justify-between items-center bg-gray-100 p-3 rounded"},[e("span",null,E(c+1)+". "+E(a.descricao),1),e("button",{onClick:u=>V(c),class:"text-red-600 font-bold hover:text-red-800"},t[6]||(t[6]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-4 h-4"},null,-1)]),8,Ne)]))),128))]),n(G,{onClick:b,text:"Adicionar nova etapa",class:"w-full mt-3"})]),e("div",Re,[e("div",Xe,[n(j,{text:"Setor"}),J(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>m.value=a),class:"w-full py-2 bg-[#F3F8F3] border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[7]||(t[7]=e("option",{disabled:"",value:""},"Selecione um setor",-1)),(o(!0),l(F,null,S(v.value,a=>(o(),l("option",{key:a.id,value:a.id},E(a.name),9,Qe))),128))],512),[[Y,m.value]])]),n(j,{text:"Tempo estimado em minutos"}),e("div",Ze,[n(U,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=a=>g.value=a),placeholder:"0"},null,8,["modelValue"]),t[8]||(t[8]=e("span",{class:"absolute right-[130px] top-1/2 transform -translate-y-1/2 text-gray-500"},"minutos",-1))])])]))])):D("",!0),e("div",He,[n(ee,{text:"Cancelar",onClick:A}),n(G,{onClick:O,text:"Cadastrar atividade"})])],64))}},Ke=M(Je,[["__scopeId","data-v-a88c80b0"]]),We={key:0,class:"sidebar-container"},Ye={key:0,class:"loading-overlay"},ea={key:"listagem",class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},aa={class:"w-full h-full bg-white rounded-[20px] p-12"},ta={class:"flex justify-center mb-6 relative group"},sa=["src"],oa={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},la={class:"w-full h-full bg-white rounded-[20px] p-12"},ia={class:"mt-4 space-y-2"},ra=["onClick"],na={class:"w-full h-full bg-white rounded-[20px] p-12"},da={class:"flex-1"},ca=["value"],ua={class:"relative"},pa={class:"absolute bottom-6 right-6 flex space-x-4 z-10"},va={__name:"EditarGestaoAtividade",props:{informacoes:Object,isVisible:Boolean},emits:["cancelar"],setup(C,{emit:w}){const r=Z(),x=C,$=w,f=s(!1),p=s(""),h=s(""),d=s(null),v=s(null),m=s([]),_=s(null),i=s([]),g=s(""),k=s(""),I=s(""),b=s(!1);se(()=>x.informacoes,t=>{t&&(p.value=t.name||"",_.value=t.setor_id||null,k.value=t.tempo_estimated||"",i.value=t.etapas||[],h.value=t.profile_photo_url||"")},{immediate:!0}),H(async()=>{try{const t=await L.get("/api/admin-operacionais");m.value=t.data.data}catch{r.error("Erro ao carregar setores operacionais.")}});const V=()=>{if(i.value.length>=5){r.warning("Você só pode adicionar no máximo 5 etapas.");return}g.value.trim()!==""&&(i.value.push({descricao:g.value}),g.value="")},A=t=>{i.value.splice(t,1)},B=()=>{T(),$("cancelar")},T=()=>{p.value="",I.value=""},O=()=>p.value?!0:(r.error("Por favor, preencha todos os campos obrigatórios."),I.value="Por favor, preencha todos os campos obrigatórios.",!1),N=async()=>{var t,a,c;if(O())try{b.value=!0;const u=new FormData;u.append("_method","PUT"),u.append("name",p.value),u.append("setor_id",_.value||""),u.append("tempo_estimated",parseInt(k.value)||0),i.value.forEach(q=>{u.append("etapas[][descricao]",q.descricao)}),d.value&&u.append("profile_photo",d.value);for(let q of u.entries())console.log(q[0]+": "+q[1]);const Q=await L.post(`/api/atividades/${x.informacoes.id}`,u,{headers:{"Content-Type":"multipart/form-data"}});r.success("Atividade atualizada com sucesso!"),B()}catch(u){console.error("Erro ao atualizar atividade:",((t=u.response)==null?void 0:t.data)||u.message),r.error("Erro ao atualizar atividade: "+(((c=(a=u.response)==null?void 0:a.data)==null?void 0:c.message)||u.message))}finally{b.value=!1}},R=()=>{var t;(t=v.value)==null||t.click()},X=()=>{h.value="",d.value=null,r.info("Imagem removida.")},y=t=>{const a=t.target.files[0];if(a){d.value=a;const c=new FileReader;c.onload=()=>{h.value=c.result,r.success("Imagem carregada com sucesso!")},c.readAsDataURL(a)}};return(t,a)=>(o(),l(F,null,[C.isVisible?(o(),l("div",We,[b.value?(o(),l("div",Ye,a[5]||(a[5]=[e("div",{class:"spinner"},null,-1)]))):D("",!0),a[9]||(a[9]=e("div",{class:"painel-title"},"Editar atividade",-1)),a[10]||(a[10]=e("div",{class:"painel-subtitle"},[e("p",null,"Edite atividade para os processos da franquia")],-1)),f.value?D("",!0):(o(),l("div",ea,[e("div",aa,[e("div",ta,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:R},[h.value?(o(),l(F,{key:0},[e("img",{src:h.value,alt:"Imagem selecionada",class:"w-full h-full p-2 object-cover"},null,8,sa),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:a[0]||(a[0]=z(()=>{},["stop"]))},[e("button",{onClick:z(X,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(o(),l("img",oa))]),e("input",{type:"file",ref_key:"fileInput",ref:v,accept:"image/*",class:"hidden",onChange:y},null,544)]),n(j,{text:"Nome da atividade"}),n(U,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=c=>p.value=c),placeholder:"Limpar camarão"},null,8,["modelValue"])]),e("div",la,[n(j,{text:"Etapas da atividade"}),n(U,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=c=>g.value=c),placeholder:"Descreva a etapa aqui..."},null,8,["modelValue"]),e("p",{class:K(["text-right text-xs mt-1",{"text-gray-500":g.value.length<=42,"text-red-500":g.value.length>42}])},E(g.value.length)+"/42 caracteres ",3),e("ul",ia,[(o(!0),l(F,null,S(i.value,(c,u)=>(o(),l("li",{key:u,class:"flex justify-between items-center bg-gray-100 p-3 rounded"},[e("span",null,E(u+1)+". "+E(c.descricao),1),e("button",{onClick:Q=>A(u),class:"text-red-600 font-bold hover:text-red-800"},a[6]||(a[6]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-4 h-4"},null,-1)]),8,ra)]))),128))]),n(G,{onClick:V,text:"Adicionar nova etapa",class:"w-full mt-3"})]),e("div",na,[e("div",da,[n(j,{text:"Setor"}),J(e("select",{"onUpdate:modelValue":a[3]||(a[3]=c=>_.value=c),class:"w-full py-2 bg-[#F3F8F3] border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[a[7]||(a[7]=e("option",{disabled:"",value:""},"Selecione um setor",-1)),(o(!0),l(F,null,S(m.value,c=>(o(),l("option",{key:c.id,value:c.id},E(c.name),9,ca))),128))],512),[[Y,_.value]])]),n(j,{text:"Tempo estimado em minutos"}),e("div",ua,[n(U,{modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=c=>k.value=c),placeholder:"0"},null,8,["modelValue"]),a[8]||(a[8]=e("span",{class:"absolute right-[130px] top-1/2 transform -translate-y-1/2 text-gray-500"},"minutos",-1))])])]))])):D("",!0),e("div",pa,[n(ee,{text:"Cancelar",onClick:B}),n(G,{onClick:N,text:"Atualizar atividade"})])],64))}},ma=M(va,[["__scopeId","data-v-37cb5846"]]),fa={key:"listagem",class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},ga={class:"flex flex-col gap-4"},ha={key:1,class:"text-gray-500 text-center mt-12"},xa={class:"absolute bottom-4 right-4"},_a={__name:"GestaoAtividades",setup(C){const w=s(null),r=s(!1),x=s(!1),$=s(null),f=()=>{var i;(i=$.value)==null||i.fetch()},p=()=>{f()},h=i=>{console.log("editar informacoes"),console.log(i),w.value=i,x.value=!0,r.value=!1},d=()=>{console.log("cancelar"),window.location.reload()},v=()=>{var i;(i=$.value)==null||i.fetch()},m=()=>{r.value=!r.value},_=i=>{w.value=i};return(i,g)=>(o(),P(re,null,{default:W(()=>[n(oe(le),{title:"Gestão de Atividades"}),n(ie,{name:"fade",mode:"out-in"},{default:W(()=>[x.value?(o(),P(ma,{isVisible:!0,informacoes:w.value,onDadosinformacoes:v,onCancelar:d,key:"editar"},null,8,["informacoes"])):r.value?(o(),P(Ke,{key:"cadastro",isVisible:r.value,onCadastrar:p,onCancelar:d},null,8,["isVisible"])):(o(),l("div",fa,[e("div",null,[n(Se,{key:"listar",ref_key:"listar",ref:$,onCadastrar:f,onSelecionado:_},null,512)]),e("div",ga,[w.value?(o(),P(ke,{key:0,onEditar:h,onCancelar:d,informacoes:w.value},null,8,["informacoes"])):(o(),l("div",ha,g[0]||(g[0]=[e("p",{class:"text-lg"},"Selecione uma atividade para ver os detalhes.",-1),e("p",{class:"text-sm"},'Clique em "Cadastrar nova atividade" para adicionar uma nova.',-1)]))),e("div",xa,[n(G,{text:"Cadastrar nova atividade",iconPath:"/storage/images/arrow_left_alt.svg",onClick:m,class:K({hidden:x.value})},null,8,["class"])])])]))]),_:1})]),_:1}))}},Ia=M(_a,[["__scopeId","data-v-41376e8e"]]);export{Ia as default};
