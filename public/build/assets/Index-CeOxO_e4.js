import{A as q}from"./LayoutFranqueadora-B1a822Gr.js";import{d as s,y as G,i as K,o as t,e as d,a as e,h,F as $,g as I,n as Q,t as C,k as F,l as U,p as B,b as w,j as E,s as X,v as Z,m as H,c as M,w as J,u as W,Z as Y}from"./app-BlvFXlFB.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as z}from"./LabelModel-CqyH8Kw4.js";import{D as ee}from"./Deslizante-CXAeKtn1.js";import{B as oe}from"./ButtonEditeMedio-3oVc0ckQ.js";import{B as te}from"./ButtonPrimaryMedio-DWGe63ZA.js";import{B as se}from"./ButtonCancelar-DnGEp8ir.js";import{C as ae}from"./ConfirmDialog--THpWBYJ.js";import"./user-B-Q6fLL4.js";const le={key:0,class:"loading-overlay"},ne={class:"card-container"},ie=["onClick"],re={class:"card-inner"},de={class:"icon-container"},ce={class:"icon-leaf"},ue=["src"],me={class:"text-container"},ve={class:"city"},pe={__name:"ListarMetodosPagamentos",emits:["dado-selecionado"],setup(b,{emit:g}){const f=g,u=s([]),k=s(""),c=s(!1),m=async()=>{c.value=!0;try{const i=await F.get("/api/admin-metodos-pagamentos/lista");u.value=Object.values(i.data)}catch(i){console.error("Erro ao carregar os dados:",i)}finally{c.value=!1}},v=i=>i?new URL(i,window.location.origin).href:"/storage/images/no_imagem.svg";G(m);const _=i=>{f("dado-selecionado",i)},x=K(()=>{const i=k.value.toLowerCase();return u.value.filter(a=>String(a.id).toLowerCase().includes(i)||a.fornecedor_nome.toLowerCase().includes(i))});return(i,a)=>(t(),d("div",null,[c.value?(t(),d("div",le,a[0]||(a[0]=[e("div",{class:"spinner"},null,-1)]))):h("",!0),a[3]||(a[3]=e("div",{class:"painel-title"},"Métodos de pagamento",-1)),a[4]||(a[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Gerencie suas formas de pagamento para o fluxo de caixa")],-1)),e("div",ne,[(t(!0),d($,null,I(x.value,l=>(t(),d("div",{key:l.id,class:Q(["card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",{"bg-gray-300":!l.status}]),onClick:r=>_(l)},[e("div",re,[e("div",de,[a[1]||(a[1]=e("div",{class:"icon-bg"},null,-1)),e("div",ce,[e("img",{src:v(l.img_icon),alt:"Ícone"},null,8,ue)])]),e("div",me,[e("div",ve,C(l.nome),1)]),a[2]||(a[2]=e("div",{class:"action-icon"},null,-1))])],10,ie))),128))])]))}},fe=D(pe,[["__scopeId","data-v-43ad4f7e"]]),ge={key:0,class:"loading-overlay"},_e={class:"mt-5"},xe={class:"bg-white rounded-lg p-12"},ye={class:"flex gap-8 mb-8"},he={class:"flex flex-col items-center"},be={class:"relative group"},we=["src"],ke={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},$e={class:"flex flex-col flex-1"},Ce=["value"],Me={key:0,class:"text-red-500 text-sm"},De={class:"form-buttons"},ze={__name:"EditarMetodoPagamento",props:{metodo:{type:Object,default:null}},emits:["voltar"],setup(b,{emit:g}){const f=b,u=U(),k=g,c=s(f.metodo.id),m=s(f.metodo.nome),v=s(f.metodo.tipo),_=s(f.metodo.img_icon||""),x=s(null),i=s(""),a=s(null),l=s(!1),r=s(!1),y=s({}),P=["credito","debito","especie","cabal","alelo","pix","ticket","drex","pagamento_online","vr_alimentacao"],j=n=>n?new URL(n,window.location.origin).href:"/storage/images/no_imagem.svg",V=async()=>{if(y.value={},m.value||(y.value.nome="O nome é obrigatório"),v.value||(y.value.selectedTipo="O tipo é obrigatório"),!_.value&&!x.value&&(y.value.selectedFile="O ícone é obrigatório"),Object.keys(y.value).length===0)try{l.value=!0;const n=new FormData;n.append("id",c.value),n.append("nome",m.value),n.append("tipo",v.value),x.value&&n.append("profile_photo",x.value);const o=await F.post("/api/admin-metodos-pagamentos/atualizar",n,{headers:{"Content-Type":"multipart/form-data"}});u.success("Método de pagamento atualizado com sucesso!"),L()}catch(n){u.error("Erro ao atualizar método de pagamento"),console.error("Erro ao atualizar método de pagamento:",n)}finally{l.value=!1}},A=n=>{i.value=n,r.value=!0},O=()=>{V(),r.value=!1},S=()=>{r.value=!1},T=()=>{var n;(n=a.value)==null||n.click()},R=()=>{_.value="",x.value=null,u.info("Imagem removida.")},N=n=>{const o=n.target.files[0];if(o){x.value=o;const p=new FileReader;p.onload=()=>{_.value=p.result,u.success("Imagem carregada com sucesso!")},p.readAsDataURL(o)}},L=()=>{m.value="",P.value="",_.value="",x.value=null,y.value={},k("voltar")};return(n,o)=>(t(),d($,null,[o[6]||(o[6]=e("div",{class:"painel-title"},"Editar Método Pagamento",-1)),o[7]||(o[7]=e("div",{class:"painel-subtitle"},[e("p",null,"Atualize as informações do método de pagamento")],-1)),l.value?(t(),d("div",ge,o[4]||(o[4]=[e("div",{class:"spinner"},null,-1)]))):h("",!0),e("div",_e,[e("div",xe,[e("div",ye,[e("div",he,[e("div",be,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden",onClick:T},[_.value?(t(),d($,{key:0},[e("img",{src:j(_.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,we),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:o[0]||(o[0]=B(()=>{},["stop"]))},[e("button",{onClick:B(R,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),d("img",ke))]),e("input",{type:"file",ref_key:"fileInput",ref:a,accept:"image/*",class:"hidden",onChange:N},null,544)])]),e("div",$e,[w(z,{text:"Tipo",class:"mb-2"}),E(e("select",{"onUpdate:modelValue":o[1]||(o[1]=p=>v.value=p),class:"w-72 h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[o[5]||(o[5]=e("option",{value:"",disabled:"",selected:""},"Selecione um tipo",-1)),(t(),d($,null,I(P,p=>e("option",{key:p,value:p,class:"text-base font-semibold"},C(p),9,Ce)),64))],512),[[X,v.value]])])]),w(z,{text:"Nome do método"}),E(e("input",{id:"nome","onUpdate:modelValue":o[2]||(o[2]=p=>m.value=p),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"nome do método"},null,512),[[Z,m.value]]),y.value.nome?(t(),d("span",Me,C(y.value.nome),1)):h("",!0),e("div",De,[w(se,{class:"w-full",text:"Cancelar",onClick:L}),w(te,{text:"Atualizar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:o[3]||(o[3]=p=>A("Atualizar método de pagamento?"))})])])]),w(ae,{isVisible:r.value,motivo:i.value,onConfirm:O,onCancel:S},null,8,["isVisible","motivo"])],64))}},Fe=D(ze,[["__scopeId","data-v-3070dc72"]]),Pe={class:"elemento-fixo"},Le={key:0},Be={key:0,class:"loading-overlay"},Ee={class:"w-full h-[100px] p-8 bg-white rounded-[20px] flex flex-col justify-center items-center gap-6"},Ie={class:"flex items-center gap-4"},Ue=["src"],je={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},Ve={class:"mt-4 w-full p-8 bg-white rounded-[20px] flex justify-between items-center gap-5"},Ae={class:"flex flex-col w-2/3"},Oe={class:"text-sm font-semibold text-gray-700"},Se={class:"w-1/2 flex justify-end"},Te={key:1,class:"mt-4"},Re={__name:"DetalhesMetodosPagamento",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(b,{emit:g}){const f=U(),u=b,k=g,c=s(!1),m=s(!1),v=s(!!u.dados.status);H(()=>u.dados.status,l=>{v.value=!!l});const _=()=>{c.value=!1,k("atualizar")},x=()=>{c.value=!c.value},i=l=>l?new URL(l,window.location.origin).href:"/storage/images/no_imagem.svg",a=async l=>{try{m.value=!0;const r={default_payment_method_id:u.dados.id,status:l?1:0};await F.post("/api/admin-metodos-pagamentos/alternar-status",r),v.value=l,f.success("Método atualizado"),k("atualizar")}catch(r){console.error("Erro ao atualizar o método de pagamento:",r)}finally{m.value=!1}};return(l,r)=>(t(),d("div",Pe,[c.value?h("",!0):(t(),d("div",Le,[m.value?(t(),d("div",Be,r[1]||(r[1]=[e("div",{class:"spinner"},null,-1)]))):h("",!0),r[2]||(r[2]=e("div",{class:"mt-[80px]"},null,-1)),e("div",Ee,[e("div",Ie,[e("img",{src:i(b.dados.img_icon),alt:"Ícone",class:"w-[50px] h-[50px]"},null,8,Ue),e("div",je,C(b.dados.nome),1)])]),e("div",Ve,[e("div",Ae,[w(z,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),e("span",Oe,C(v.value?"Ativado":"Desativado"),1)]),e("div",Se,[w(ee,{status:v.value,"onUpdate:status":r[0]||(r[0]=y=>v.value=y),onClick:a},null,8,["status"])])])])),b.dados.id&&!c.value?(t(),d("div",Te,[w(oe,{text:"Editar método","icon-path":"/storage/images/border_color.svg",onClick:x,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):h("",!0),c.value?(t(),M(Fe,{key:2,metodo:b.dados,isVisible:c.value,onVoltar:_},null,8,["metodo","isVisible"])):h("",!0)]))}},Ne=D(Re,[["__scopeId","data-v-88ae894e"]]),qe={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},Ge={key:0},Ke={class:"flex flex-col gap-4"},Qe={__name:"Index",setup(b){const g=s(null),f=s(0),u=s(!1),k=m=>{g.value=m},c=()=>{f.value+=1,g.value=null};return(m,v)=>(t(),M(q,null,{default:J(()=>[w(W(Y),{title:"Métodos de pagamentos"}),e("div",qe,[u.value?h("",!0):(t(),d("div",Ge,[(t(),M(fe,{key:f.value,ref:"listaDados",onDadoSelecionado:k}))])),e("div",Ke,[u.value?h("",!0):(t(),d($,{key:0},[g.value?(t(),M(Ne,{key:0,dados:g.value,onAtualizar:c},null,8,["dados"])):h("",!0)],64))])])]),_:1}))}},ao=D(Qe,[["__scopeId","data-v-11247bc4"]]);export{ao as default};
