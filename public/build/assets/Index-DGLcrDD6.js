import{l as U,d,y as R,k as L,o as n,e as c,a as e,b as r,j as q,s as N,F as S,g as z,t as g,h,B as J,v as V,n as O,f as T,L as W,w as K,i as X,c as j,u as Y,Z as ee}from"./app-BAEE8LPv.js";import{L as te}from"./LayoutFranqueado-DSv5MCz2.js";import{_ as $}from"./LabelModel-DGfvQhZD.js";import{B as Q}from"./ButtonPrimaryMedio-DpkQeMmo.js";import{B as ae}from"./ButtonCancelar-BLfMySMr.js";import{C as Z}from"./ConfirmDialog-Dr2jKFO4.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-ClQ_0cBf.js";const oe={class:"mt-5"},se={class:"grid grid-cols-2 gap-8"},ne={class:"bg-white rounded-lg p-12"},re={class:"flex gap-4"},le={class:"flex-1 mb-8"},ie=["value"],de={key:0,class:"text-red-500 text-sm"},ce={class:"flex-1"},ue={key:0,class:"text-red-500 text-sm"},ve={key:0,class:"text-red-500 text-sm"},ge={class:"col-span-1 row-span-2 mt-12"},me={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},pe={key:0,class:"text-red-500 text-sm"},fe={key:1,class:"text-red-500 text-sm"},xe={class:"bg-white rounded-lg p-12"},_e={class:"mt-2"},be={class:"mt-2"},ye={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},he={key:0,class:"text-red-500 text-sm"},Ce={class:"form-buttons"},we={__name:"CadastroContas",emits:["voltar"],setup(p,{emit:k}){const u=U(),a=d(null),m=d(""),f=d(""),_=d(""),C=d(1),w=d(null),D=d(""),l=d(!1),v=d(""),b=d([]),o=d({}),E=k;R(async()=>{try{const x=await L.get("/api/categorias/lista");b.value=x.data}catch(x){console.error("Erro ao carregar categorias:",x)}});const i=async()=>{o.value={},w.value||(o.value.categoria="A categoria é obrigatória"),a.value||(o.value.valor="O valor é obrigatório"),f.value||(o.value.emitidaEm="A data emitida é obrigatória"),_.value||(o.value.vencimento="A data de vencimento é obrigatória"),m.value.length>200&&(o.value.descricao="A descrição deve ter no máximo 200 caracteres");const x=parseFloat(a.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(x)?o.value.valor="O valor informado não é válido":a.value=x,Object.keys(o.value).length===0)try{const t=new FormData;if(t.append("categoria_id",w.value),t.append("valor",a.value),t.append("emitida_em",f.value),t.append("vencimento",_.value),t.append("dias_lembrete",C.value),t.append("descricao",m.value),D.value){const F=document.querySelector('input[type="file"]');F.files.length>0&&t.append("arquivo",F.files[0])}const s=await L.post("/api/cursto/contas-a-pagar",t);u.success("Conta cadastrada com sucesso",s.data),console.log("Conta cadastrada com sucesso",s.data),I()}catch(t){u.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",t)}},y=x=>{v.value=x,l.value=!0},A=()=>{i(),l.value=!1},P=()=>{l.value=!1},G=x=>{u.info("Arquivo selecionado com sucesso");const t=x.target.files[0];t&&(D.value=t.name)},H=x=>{let t=x.replace(/\D/g,"");t||(t="0");const s=t.slice(0,-2)||"0",F=t.slice(-2);return`R$ ${Number(s).toLocaleString("pt-BR")},${F}`},I=()=>{w.value=null,a.value=null,f.value="",_.value="",C.value=1,m.value="",D.value="",E("voltar")};return(x,t)=>(n(),c(S,null,[t[13]||(t[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),t[14]||(t[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",oe,[e("div",se,[e("div",ne,[e("div",re,[e("div",le,[t[9]||(t[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),r($,{text:"Nome da Conta"}),q(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[8]||(t[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(n(!0),c(S,null,z(b.value,s=>(n(),c("option",{key:s.id,value:s.id},g(s.nome),9,ie))),128))],512),[[N,w.value]]),o.value.categoria?(n(),c("span",de,g(o.value.categoria),1)):h("",!0)]),e("div",ce,[r($,{text:"Lembrar - me"}),q(e("select",{id:"dias_lembrete","onUpdate:modelValue":t[1]||(t[1]=s=>C.value=s),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},t[10]||(t[10]=[J('<option value="1" data-v-e0ba62fa>1 dia antes</option><option value="3" data-v-e0ba62fa>3 dias antes</option><option value="5" data-v-e0ba62fa>5 dias antes</option><option value="15" data-v-e0ba62fa>15 dias antes</option><option value="30" data-v-e0ba62fa>30 dias antes</option>',5)]),512),[[N,C.value]]),o.value.diasLembrete?(n(),c("span",ue,g(o.value.diasLembrete),1)):h("",!0)])]),r($,{text:"Valor"}),q(e("input",{id:"valor","onUpdate:modelValue":t[2]||(t[2]=s=>a.value=s),onInput:t[3]||(t[3]=s=>a.value=H(a.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[V,a.value]]),o.value.valor?(n(),c("span",ve,g(o.value.valor),1)):h("",!0),e("div",ge,[e("div",me,[r($,{text:"Data emitida"}),q(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":t[4]||(t[4]=s=>f.value=s),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[V,f.value]]),o.value.emitidaEm?(n(),c("span",pe,g(o.value.emitidaEm),1)):h("",!0),t[11]||(t[11]=e("div",{class:"mt-12"},null,-1)),r($,{text:"Data de vencimento"}),q(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[V,_.value]]),o.value.vencimento?(n(),c("span",fe,g(o.value.vencimento),1)):h("",!0)])])]),e("div",xe,[r($,{text:"Informações adicionais"}),q(e("textarea",{id:"descricao","onUpdate:modelValue":t[6]||(t[6]=s=>m.value=s),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[V,m.value]]),e("p",{class:O(["text-right text-xs mt-1",{"text-gray-500":m.value.length<=200,"text-red-500":m.value.length>200}])},g(m.value.length)+"/200 caracteres ",3),e("div",_e,[r($,{text:"Enviar boleto/fatura"}),e("div",be,[e("label",ye,[T(g(D.value||"Selecionar Arquivo")+" ",1),t[12]||(t[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:G},null,32),o.value.arquivo?(n(),c("span",he,g(o.value.arquivo),1)):h("",!0)])]),e("div",Ce,[r(ae,{class:"w-full",text:"Cancelar",onClick:I}),r(Q,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:t[7]||(t[7]=s=>y("Cadastrar um nova conta?"))})])])])]),r(Z,{isVisible:l.value,motivo:v.value,onConfirm:A,onCancel:P},null,8,["isVisible","motivo"])],64))}},$e=B(we,[["__scopeId","data-v-e0ba62fa"]]),ke=["type"],De={class:"text-center text-[15px] font-semibold font-['Figtree'] leading-tight"},qe=["src"],Fe={__name:"ButtonClaroMedio",props:{text:{type:String,required:!0,default:"Nome do Botão"},type:{type:String,default:"button"},iconPath:{type:String,required:!1}},emits:["click"],setup(p,{emit:k}){const u=k,a=()=>{u("click")};return(m,f)=>(n(),c("button",{type:p.type,onClick:a,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5"},[e("span",De,g(p.text),1),p.iconPath?(n(),c("img",{key:0,src:p.iconPath,alt:"icon",class:"h-6 w-6"},null,8,qe)):h("",!0)],8,ke))}},M=B(Fe,[["__scopeId","data-v-3918f9aa"]]),Ve={class:"elemento-fixo"},Se={key:0},Be={class:"mt-8"},Ee={class:"w-full h-[530px] bg-white rounded-[20px] p-7 relative"},Ae={class:"text-[25px] font-bold font-['Figtree'] leading-8 tracking-tight"},Le={class:"col-span-1 row-span-2 mt-8"},Pe={class:"col-span-1 row-span-2 mt-8"},Ie={class:"text-[#262a27] text-[12px] font-bold leading-[48px] tracking-wide"},Ne=["value"],je=["value"],Me={class:"w-full h-[100px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500"},Ue={class:"flex space-x-4 mt-5"},Re={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(p,{emit:k}){const u=U(),a=p,m=d(!1);d(null);const f=d(!1),_=d(""),C=i=>{_.value=i,f.value=!0},w=i=>i==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg",D=i=>i==="pendente"?"text-[#FF9500] w-full bg-[#f4faf4] hover:bg-[#ffdeb1] transition duration-200 ease-in-out":"text-[#6db631] w-full bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out ",l=()=>{f.value=!1,b()},v=()=>{f.value=!1},b=async()=>{if(!a.dados||!a.dados.id){u.error("Erro: Dados da conta não encontrados.");return}try{const i=await axios.post(`/api/cursto/contas-a-pagar/${a.dados.id}/pagar`);u.success(i.data.message),a.dados.status="pago"}catch(i){console.error("Erro ao pagar a conta:",i),u.error("Erro ao pagar a conta")}},o=i=>{if(!i)return"";const y=i.split("-");return`${y[2]}/${y[1]}/${y[0]}`},E=()=>{if(a.dados.arquivo){const i=document.createElement("a");i.href=`/${a.dados.arquivo}`,i.download=a.dados.arquivo.split("/").pop(),i.target="_blank",i.click(),u.info("Arquivo baixado com sucesso")}else u.warning("Arquivo não encontrado"),console.error("Arquivo não encontrado")};return(i,y)=>{const A=W("P");return n(),c(S,null,[e("div",Ve,[m.value?h("",!0):(n(),c("div",Se,[e("div",Be,[e("div",Ee,[e("p",Ae,g(p.dados.nome),1),r(A,{class:"text-[#6db631] text-xl font-normal font-['Figtree'] leading-[25px] tracking-tight"},{default:K(()=>[T(g(p.dados.valor_formatado),1)]),_:1}),y[2]||(y[2]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1)),e("div",Le,[e("div",Pe,[e("div",Ie,[r($,{text:"Data emitida"}),e("input",{type:"text",id:"emitida_em",value:o(p.dados.emitida_em),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Ne),y[1]||(y[1]=e("div",{class:"mt-12"},null,-1)),r($,{text:"Data de vencimento"}),e("input",{type:"text",id:"vencimento",name:"vencimento",value:o(p.dados.vencimento),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,je)])]),r($,{text:"Informações adicionais"}),e("p",Me,g(p.dados.descricao),1)]),e("div",Ue,[r(M,{text:a.dados.status==="pendente"?"Pagar":"Pago",class:O(D(a.dados.status)),onClick:y[0]||(y[0]=P=>C("Marca como paga essa conta?")),iconPath:w(a.dados.status),disabled:a.dados.status==="pago"},null,8,["text","class","iconPath","disabled"]),r(M,{text:"Baixar boleto",class:"text-[#6db631] w-full bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out",onClick:E})])])])]))]),r(Z,{isVisible:f.value,motivo:_.value,onConfirm:l,onCancel:v},null,8,["isVisible","motivo"])],64)}}},ze=B(Re,[["__scopeId","data-v-94ddb889"]]),Oe=["onClick"],Te={class:"text-lg font-medium text-gray-900"},Ke={class:"text-sm text-gray-600"},Qe=["src","alt"],Ze={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(p,{emit:k}){const u=k,a=d([]),m=d("");R(async()=>{try{const l=await L.get("/api/cursto/listar-contas-a-pagar");a.value=l.data.data}catch(l){console.error("Erro ao carregar os dados:",l)}});const _=l=>{u("dado-selecionado",l)},C=X(()=>{const l=m.value.toLowerCase();return a.value.filter(v=>v.nome.toLowerCase().includes(l)||String(v.valor).includes(l))}),w=l=>{const v=l.split("-");return`${v[2]}/${v[1]}/${v[0]}`},D=l=>l==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(l,v)=>(n(),c("div",null,[v[0]||(v[0]=e("div",{class:"painel-title"},"Contas a pagar",-1)),v[1]||(v[1]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),(n(!0),c(S,null,z(C.value,b=>(n(),c("div",{key:b.id,onClick:o=>_(b),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Te,g(b.nome),1),e("p",Ke,g(b.valor_formatado)+" - Vence em "+g(w(b.vencimento)),1)]),e("div",null,[e("img",{src:D(b.status),alt:b.status,class:"w-8 h-8"},null,8,Qe)])],8,Oe))),128))]))}},Ge=B(Ze,[["__scopeId","data-v-3b35b1ce"]]),He={key:0,class:"fixed bottom-6 right-6"},Je={key:1,class:"mt-3"},We={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},Xe={key:0},lt={__name:"Index",setup(p){const k=d(0),u=d(null),a=d(!1),m=()=>{a.value=!a.value,a.value&&(u.value=null)},f=C=>{u.value=C},_=()=>{a.value=!1,k.value+=1,console.log("cancelarCadastro")};return(C,w)=>(n(),j(te,null,{default:K(()=>[r(Y(ee),{title:"Contas"}),a.value?h("",!0):(n(),c("div",He,[r(Q,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:m})])),a.value?(n(),c("div",Je,[r($e,{onVoltar:_})])):h("",!0),a.value?h("",!0):(n(),c("div",We,[(n(),j(Ge,{key:k.value,ref:"listaDados",onDadoSelecionado:f})),u.value?(n(),c("div",Xe,[r(ze,{dados:u.value},null,8,["dados"])])):h("",!0)]))]),_:1}))}};export{lt as default};
