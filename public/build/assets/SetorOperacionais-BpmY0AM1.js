import{A as M}from"./LayoutFranqueadora-BwFTGlaO.js";import{l as N,d as t,e as f,o as c,f as _,c as w,a as e,t as C,b as g,m as E,v as S,n as V,F as y,j,i as q,h as A,k as P,w as U,u as I,Z as T}from"./app-D8B-quTi.js";import{B as F}from"./ButtonPrimaryMedio-DvxW02fI.js";import{B as z}from"./ButtonEditeMedio-CJlwWiLn.js";import{E as Q,C as Z}from"./CadastroSetorOpeperacional-DNXDE6ZD.js";import{C as G}from"./ConfirmDialog-DRSw55jS.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputModel-CB03lLOF.js";import"./LabelModel-B0qadcnX.js";import"./ButtonCancelar-P4jo61Dz.js";const J={key:0},K={class:"w-full h-[180px] bg-white rounded-[20px] p-12 mb-4"},R={class:"flex items-center"},W={class:"w-1/1 flex justify-center"},X=["src"],Y={class:"w-2/3 pl-5"},ee={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},oe={class:"w-1/1"},se={class:"w-full h-[280px] bg-white rounded-[20px] p-12"},ae={key:1,class:"mt-4"},te={__name:"DetalhesSetorOperacao",props:{informacoes:{type:Object,required:!0}},setup(v){const r=N(),i=v,n=t(!1),h=t(""),o=t(""),x=l=>{h.value=l,n.value=!0},d=t(!1),s=()=>{u(),n.value=!1},a=()=>{n.value=!1},u=async()=>{try{d.value=!0;const l=await axios.delete(`/api/admin-operacionais/${i.informacoes.id}`);r.success("setor excluído com sucesso!"),d.value=!1}catch(l){console.error("Erro ao excluir setor:",l),r.error("Erro ao excluir setor."),d.value=!1}},b=l=>l?`/storage/${l}`:"/storage/images/default_profile.png",k=t(!1),p=t(!1),O=()=>{t.dadosinformacoes.fetchinformacoes()},D=()=>{p.value=!p.value,k.value=!1},B=()=>{p.value=!1,k.value=!0},L=async()=>{if(o.value.length===0||o.value.length>255){r.error("A mensagem deve ter entre 1 e 255 caracteres.");return}try{await axios.post("/api/notificacoes/setor",{mensagem:o.value,setor_id:i.informacoes.id}),r.success("Comunicado enviado com sucesso!"),o.value=""}catch(l){console.error("Erro ao enviar comunicado:",l),r.error("Erro ao enviar comunicado.")}};return(l,m)=>(c(),f(y,null,[p.value?_("",!0):(c(),f("div",J,[e("div",K,[e("div",R,[e("div",W,[e("img",{src:b(v.informacoes.profile_photo),alt:"Imagem",class:"w-20 h-20 p-2 rounded-md shadow-lg"},null,8,X)]),e("div",Y,[e("div",ee,C(v.informacoes.name||"N/A"),1)]),e("div",oe,[g(G,{isVisible:n.value,motivo:h.value,onConfirm:s,onCancel:a},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-[110px] right-[70px] cursor-pointer",onClick:m[0]||(m[0]=$=>x("excluir setor operacional"))},m[2]||(m[2]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-6 h-6"},null,-1)]))])])]),e("div",se,[m[3]||(m[3]=e("div",{class:"flex items-center gap-2 mb-[10px]"},[e("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"},[e("img",{src:"/storage/images/campaign_bleck.svg",alt:"icone"})]),e("div",{class:"text-gray-700 text-[15px] font-semibold font-['Figtree']"}," Emitir comunicado ")],-1)),E(e("textarea",{class:"w-full h-[100px] bg-[#F8F8F8] rounded-lg p-4 text-gray-700 text-[15px] font-['Figtree'] focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Digite sua mensagem aqui......",rows:"4","onUpdate:modelValue":m[1]||(m[1]=$=>o.value=$)},null,512),[[S,o.value]]),e("p",{class:V(["text-right text-xs mt-1",{"text-gray-500":o.value.length<=255,"text-red-500":o.value.length>255}])},C(o.value.length)+"/255 caracteres ",3),g(F,{text:"Enviar comunicado",class:"w-full mt-2",onClick:L})])])),v.informacoes.id&&!p.value?(c(),f("div",ae,[g(z,{text:"Editar informacoes","icon-path":"/storage/images/border_color.svg",onClick:D,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):_("",!0),p.value?(c(),w(Q,{key:2,ref:"dadosinformacoes",isVisible:p.value,informacoes:v.informacoes,onDadosinformacoes:O,onCancelar:B},null,8,["isVisible","informacoes"])):_("",!0)],64))}},re={class:"search-container relative flex items-center w-full mb-4"},ie={class:"card-container"},ne=["onClick"],le={class:"card-inner"},ce={class:"icon-container"},de=["src"],ue={class:"text-container"},me={class:"city"},fe={__name:"ListarSetorOperacional",emits:["selecionado"],setup(v,{emit:r}){const i=t([]),n=t(""),h=r,o=async()=>{try{const s=await P.get("/api/admin-operacionais");i.value=s.data.data}catch(s){console.error("Erro ao carregar operacionais:",s)}},x=s=>{h("selecionado",s),console.log("Selecionado:",s)},d=j(()=>i.value.filter(s=>s.name.toLowerCase().includes(n.value.toLowerCase())));return q(o),(s,a)=>(c(),f("div",null,[a[3]||(a[3]=e("div",{class:"painel-title"},"Setores Operacionais",-1)),a[4]||(a[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Segmente os setores das operações da rede")],-1)),e("div",re,[a[1]||(a[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),E(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),placeholder:"Pesquisar",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[S,n.value]])]),e("div",ie,[(c(!0),f(y,null,A(d.value,u=>(c(),f("div",{key:u.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:b=>x(u)},[e("div",le,[e("div",ce,[e("img",{src:u.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,de)]),e("div",ue,[e("div",me,C(u.name),1),a[2]||(a[2]=e("div",{class:"owner text-gray-500 text-sm"},"Nenhum colaborador",-1))])])],8,ne))),128))])]))}},ve=H(fe,[["__scopeId","data-v-0f48e479"]]),pe={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},ge={class:"flex flex-col gap-4"},he={class:"absolute bottom-4 right-4"},xe={key:1,class:"mt-4"},Fe={__name:"SetorOperacionais",setup(v){const r=t(null),i=t(!1),n=()=>{i.value=!i.value},h=()=>{o(),i.value=!1},o=()=>{t.listar.fetch()},x=d=>{r.value=d};return(d,s)=>(c(),w(M,null,{default:U(()=>[g(I(T),{title:"Setores Operacionais"}),e("div",pe,[e("div",null,[g(ve,{ref:"listar",onCadastrar:o,onSelecionado:x},null,512)]),e("div",ge,[i.value?(c(),f("div",xe,[g(Z,{isVisible:i.value,onCadastrar:h,onCancelar:n},null,8,["isVisible"])])):(c(),f(y,{key:0},[r.value?(c(),w(te,{key:0,informacoes:r.value},null,8,["informacoes"])):_("",!0),e("div",he,[g(F,{text:"Cadastrar novo setor",iconPath:"/storage/images/arrow_left_alt.svg",onClick:n,class:V({hidden:d.isEditMode})},null,8,["class"])])],64))])])]),_:1}))}};export{Fe as default};
