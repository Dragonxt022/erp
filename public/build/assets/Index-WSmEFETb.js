import{d as r,i as I,o as u,e as v,a as e,t as n,h as F,F as D,g as Y,n as w,j as $,z as j,y as q,P as R,c as V,w as B,b as O,u as L,Z as N,f as A,k as Q}from"./app-CLF3Ajie.js";import{L as T}from"./LayoutFranqueado-C1_OybaX.js";import{d as M}from"./dayjs.min-9zI8AYI3.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-ChZNVR2t.js";const H={class:"relative"},P={key:0},U={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},J={class:"flex justify-between items-center mb-3"},K={class:"font-semibold flex items-center"},W={class:"ml-[90px]"},Z={class:"grid grid-cols-7 gap-1 text-center text-sm"},G=["onClick"],X={class:"mt-5"},ee={class:"flex items-center space-x-4"},te={class:"flex items-center"},se={class:"flex items-center"},ae={__name:"CalendarFilter",setup(S){const g=r(!1),d=r(M().startOf("month")),c=r(M().endOf("month")),x=r(M()),f=r(!0),_=["D","S","T","Q","Q","S","S"],h=I(()=>{const a=[],l=d.value.startOf("month"),i=c.value.endOf("month");for(let p=0;p<l.day();p++)a.push({day:"",date:null});for(let p=1;p<=i.date();p++){const C=l.date(p);a.push({day:p,date:C})}return a}),o=r(""),b=()=>{x.value=x.value.subtract(1,"month")},y=()=>{x.value=x.value.add(1,"month")},t=a=>a&&(a.isSame(d.value)||a.isSame(c.value)),s=a=>!a||!d.value||!c.value?!1:a.isAfter(d.value,"day")&&a.isBefore(c.value,"day"),m=a=>{a&&(f.value?(d.value=a.startOf("day"),f.value=!1):(c.value=a.endOf("day"),f.value=!0))},k=()=>{g.value=!g.value},E=()=>{console.log("Data inicial:",d.value.format("DD-MM-YYYY")),console.log("Data final:",c.value.format("DD-MM-YYYY")),console.log("Categoria:",o.value),g.value=!1};return(a,l)=>(u(),v("div",H,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:k},[e("span",null,[d.value&&c.value?(u(),v("span",P,n(d.value.format("DD/MM/YYYY"))+" - "+n(c.value.format("DD/MM/YYYY")),1)):F("",!0)])]),g.value?(u(),v("div",U,[e("div",J,[e("button",{onClick:b,class:"p-2 rounded hover:bg-gray-300"}," < "),e("span",K,[e("span",null,n(x.value.format("MMM")),1),e("span",W,n(x.value.format("YYYY")),1)]),e("button",{onClick:y,class:"p-2 rounded hover:bg-gray-300"}," > ")]),e("div",Z,[(u(),v(D,null,Y(_,i=>e("div",{class:"font-semibold text-gray-600",key:i},n(i),1)),64)),(u(!0),v(D,null,Y(h.value,(i,p)=>(u(),v("div",{key:p,onClick:C=>m(i.date),class:w(["p-2 rounded-full cursor-pointer",t(i.date)?"bg-[#6db631] text-white":s(i.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},n(i.day),11,G))),128))]),e("div",X,[e("div",ee,[e("div",te,[$(e("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":l[0]||(l[0]=i=>o.value=i),class:w(["mr-2",{"text-[#6db631]":o.value==="almoco","border-[#6db631]":o.value==="almoco"}])},null,2),[[j,o.value]]),l[2]||(l[2]=e("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),e("div",se,[$(e("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":l[1]||(l[1]=i=>o.value=i),class:w(["mr-2",{"text-[#6db631]":o.value==="janta","border-[#6db631]":o.value==="janta"}])},null,2),[[j,o.value]]),l[3]||(l[3]=e("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[l[5]||(l[5]=e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight"}," Limpar ",-1)),e("div",{class:"flex gap-2"},[l[4]||(l[4]=e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight"}," Cancelar ",-1)),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:E}," OK ")])])])):F("",!0)]))}},oe={class:"flex justify-between items-center mb-4"},le={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},ne={class:"flex items-center space-x-2"},re={class:"text-gray-900 text-[17px] font-semibold"},ie={class:"mt-5"},de={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},ce={class:"bg-white rounded-lg p-7"},ue={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},xe={class:"bg-white rounded-lg p-7"},me={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},pe={class:"bg-white rounded-lg p-7"},ve={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ge={class:"mt-8"},fe={class:"bg-white rounded-lg shadow"},_e={class:"space-y-2"},he={class:"flex items-center text-gray-900 font-semibold"},be=["src"],ye={class:"text-center text-gray-900 font-semibold"},we={class:"text-left text-gray-900 font-medium"},ke={class:"text-center text-gray-600 font-semibold"},Me={class:"text-center text-gray-500 font-semibold"},Fe={key:0,class:"text-center mt-4"},De={__name:"Index",setup(S){const g=r("0.00"),d=r("0.00"),c=r("0.00"),x=r([]),f=r(1),_=r(!1),h=r(!0),o=r(null),b=async()=>{if(!(_.value||!h.value)){_.value=!0;try{const{data:t}=await Q.get(`/api/estoque/incial?page=${f.value}`);d.value=t.valorInsumos,c.value=t.itensNoEstoque,x.value.push(...t.historicoMovimentacoes.data),t.historicoMovimentacoes.current_page>=t.historicoMovimentacoes.last_page?h.value=!1:f.value++}catch(t){console.error("Erro ao carregar movimentações:",t)}finally{_.value=!1}}},y=()=>{const t=o.value;t.scrollTop+t.clientHeight>=t.scrollHeight-10&&b()};return q(()=>{b(),o.value.addEventListener("scroll",y)}),R(()=>{o.value&&o.value.removeEventListener("scroll",y)}),(t,s)=>(u(),V(T,null,{default:B(()=>[O(L(N),{title:"Controle de estoque"}),e("div",oe,[s[1]||(s[1]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",le,[e("div",ne,[s[0]||(s[0]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",re,[O(ae,{categories:t.categories,onSearch:t.handleSearch},null,8,["categories","onSearch"])])])])]),e("div",ie,[e("div",de,[e("div",ce,[s[2]||(s[2]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),e("div",ue," R$ "+n(g.value),1)]),e("div",xe,[s[3]||(s[3]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),e("div",me," R$ "+n(d.value),1)]),e("div",pe,[s[4]||(s[4]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Itens no estoque ",-1)),e("div",ve,n(c.value),1)])])]),e("div",ge,[s[6]||(s[6]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),e("div",{class:"flex items-center space-x-2"},[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"}),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ")])],-1)),e("div",fe,[s[5]||(s[5]=e("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[e("span",{class:"text-left px-5"},"OPERAÇÃO"),e("span",{class:"text-center"},"QTD."),e("span",{class:"text-left"},"Item"),e("span",{class:"text-center"},"Quando"),e("span",{class:"text-center"},"Responsável")],-1)),e("div",{ref_key:"scrollContainer",ref:o,class:"overflow-y-auto max-h-96 scroll-hidden"},[e("ul",_e,[(u(!0),v(D,null,Y(x.value,(m,k)=>(u(),v("li",{key:k,class:w({"hover:bg-gray-200":!0,"grid grid-cols-5 gap-2 px-6 py-3 text-[16px]":!0})},[e("span",he,[e("img",{src:m.operacao==="Entrada"?"/storage/images/arrow_back_verde.svg":"/storage/images/arrow_back_red.svg",alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,be),A(" "+n(m.operacao==="Entrada"?"Entrada":"Retirada"),1)]),e("span",ye,n(m.quantidade)+" "+n(m.unidade==="unidade"?"uni":"kg"),1),e("span",we,n(m.item),1),e("span",ke,n(m.data),1),e("span",Me,n(m.responsavel),1)]))),128))])],512),_.value?(u(),v("div",Fe,"Carregando...")):F("",!0)])])]),_:1}))}},Se=z(De,[["__scopeId","data-v-b46133d5"]]);export{Se as default};
