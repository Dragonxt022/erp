import{l as C,Q as k,d as l,i as F,y as B,o as i,c as I,w as j,b as p,u as V,Z as D,e as n,a,h as N,t as d,f as v,j as q,v as E,n as L,k as f}from"./app-BGEKxoeK.js";import{L as P}from"./LayoutFranqueado-D-bDTZLq.js";import{B as $}from"./ButtonPrimaryMedio-CgNJ7N2j.js";import{d as m}from"./index-BWHY883T.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-O64GqxFH.js";const M={key:0,class:"loading-overlay"},T={class:"mt-5"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"},R={key:0,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},U={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},z={class:"text-[#6db631]"},Q={key:1,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},S={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},Z={class:"text-[#6db631]"},G={class:"text-[#262a27] text-[50px] font-bold font-['Figtree'] leading-[69.98px] tracking-wide"},H={class:"w-[427px] h-[43px] flex justify-center items-center"},J={class:"px-4 py-2 flex justify-center items-center opacity-80"},K={class:"text-[#262a27] text-xl font-bold font-['Figtree'] leading-[25px] tracking-tight"},W={class:"w-full"},X={class:"fixed bottom-4 right-4"},Y={__name:"Index",setup(tt){var x;const r=C(),{errors:at,auth:g}=k().props,c=l(((x=g.user)==null?void 0:x.name)||"Usuário"),s=l(""),o=l(!1),u=e=>{let t=e.replace(/\D/g,"");return t.length>2&&(t=t.replace(/(\d)(\d{2})$/,"$1,$2")),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,"."),t},b=e=>{let t=e.target.value;t=u(t),s.value=t},_=F(()=>u(s.value)),y=async()=>{o.value=!0;const e=parseFloat(s.value.replace(/\D/g,""));if(!s.value||e<=0){r.warning("Por favor, insira um valor válido para abrir o caixa."),o.value=!1;return}try{const t=await f.post("/api/caixas/abrir",{valor_inicial:e});r.success("Caixa aberto com sucesso!"),console.log(t.data),m.Inertia.visit(route("franqueado.fluxoCaixa"))}catch(t){console.error(t),r.error("Ocorreu um erro ao abrir o caixa.")}finally{o.value=!1}},w=async()=>{o.value=!0;try{const e=await f.get("/api/caixas/abertos");e.data&&e.data.aberto&&(r.info("O caixa já esta aberto."),m.Inertia.visit(route("franqueado.fluxoCaixa")))}catch(e){console.error("Erro ao verificar caixa aberto:",e)}finally{o.value=!1}};return B(()=>{w()}),(e,t)=>(i(),I(P,null,{default:j(()=>[p(V(D),{title:"Fluxo do Caixa "}),o.value?(i(),n("div",M,t[1]||(t[1]=[a("div",{class:"spinner"},null,-1)]))):N("",!0),t[8]||(t[8]=a("div",{class:"flex justify-between items-center mb-4"},[a("div",null,[a("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Abertura de caixa "),a("div",{class:"painel-subtitle"},[a("p",{class:"text-sm sm:text-base md:text-lg"}," Iniciar a operação de faturamento diário ")])])],-1)),a("div",T,[a("div",O,[s.value?(i(),n("div",Q,[a("div",S,[a("span",Z,d(c.value),1),t[3]||(t[3]=a("span",{class:"text-[#6d6d6d]"},", vamos abrir o caixa com",-1))]),a("div",G,d(_.value),1),t[4]||(t[4]=a("div",{class:"text-[#6d6d6d] text-[17px] font-semibold font-['Figtree'] leading-snug"}," de saldo em gaveta ",-1))])):(i(),n("div",R,[a("div",U,[a("span",z,d(c.value),1),t[2]||(t[2]=a("span",{class:"text-[#6d6d6d]"},[v(" , com quantos reais "),a("br"),v(" você vai abrir o caixa? ")],-1))])])),a("div",H,[t[5]||(t[5]=a("div",{class:"w-6 h-6"},[a("img",{src:"/storage/images/payments_bleck.svg",alt:""})],-1)),t[6]||(t[6]=a("div",{class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug ml-2"}," Valor em gaveta ",-1)),t[7]||(t[7]=a("div",{class:"flex-grow h-7"},null,-1)),a("div",J,[a("div",K,[a("div",W,[q(a("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>s.value=h),onInput:b,type:"text",class:"w-full h-10 px-4 border border-gray-300 rounded-lg focus:outline-none focus:border-[#6db631]",placeholder:"R$ 0,00"},null,544),[[E,s.value]])])])])])]),a("div",X,[p($,{class:L([s.value?"bg-[#6db631]":"bg-[#6d6d6d]","w-full max-w-[200px]"]),text:"Abrir caixa",iconPath:"/storage/images/arrow_left_alt.svg",onClick:y},null,8,["class"])])])]),_:1}))}},nt=A(Y,[["__scopeId","data-v-9c1c2a5c"]]);export{nt as default};
