import{d as o,j as v,i as V,c as B,o as d,w as M,b as R,a,u as N,Z as O,e as _,F as Z,h as Q,t as u}from"./app-BBDN-jzy.js";import{d as T}from"./index-DqnHd9nf.js";import{C as x,r as W}from"./chart-CX66tr7T.js";import{L as z}from"./LayoutFranqueado-MsoK8sHh.js";import"./dayjs.min-CGm5tRO5.js";import"./pt-br-BlmfhYw_.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"mt-5 w-full h-screen"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"md:row-span-1"},U={class:"bg-white rounded-lg border border-gray-200 p-5 h-full w-full"},X={class:"compromissos-container flex flex-col gap-2 overflow-hidden"},Y={class:"flex flex-col"},aa={class:"text-[14px] font-medium text-gray-900"},ta={class:"text-sm text-gray-600"},ea=["src","alt"],sa={class:"hidden bg-white rounded-lg p-4 col-span-1 md:col-span-3"},oa={class:"w-full h-[20px]"},ra={__name:"Index",setup(na){x.register(...W);const p=o(null),i=o(null),m=o([]),g=o([]),c=o([]),b=o("0,00"),y=o("0,00"),w=o("0,00"),k=o("0,00"),C=o("0,00"),F=o("0,00"),A=o("0,00"),j=o(0),D=o("0,00");o(!1);const E=()=>{T.Inertia.replace(route("franqueado.contasApagar"))},I=async(t=null,e=null)=>{try{let s="/api/painel-analitycos/calcular-cmv";const n=[];t&&n.push(`start_date=${t}`),e&&n.push(`end_date=${e}`),n.length>0&&(s+=`?${n.join("&")}`);const r=(await axios.get(s)).data;r.saldo_estoque_inicial?(b.value=r.start_date||"não informado",y.value=r.end_date||"não informado",w.value=r.saldo_estoque_inicial||"0,00",k.value=r.entradas_durante_periodo||"0,00",C.value=r.saldo_estoque_final||"0,00",F.value=r.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(s){console.error("Erro ao buscar dados analíticos:",s)}},q=async(t=null,e=null)=>{try{let s="/api/painel-analitycos/calcular-fluxo-caixa";const n=[];t&&n.push(`start_date=${t}`),e&&n.push(`end_date=${e}`),n.length>0&&(s+=`?${n.join("&")}`);const r=(await axios.get(s)).data;A.value=r.total_caixas||"0,00",j.value=r.quantidade_pedidos||0,D.value=r.ticket_medio||"0,00"}catch(s){console.error("Erro ao buscar dados analíticos:",s)}};v(()=>{I(),q(),f(),S(),h()});const f=async()=>{try{const t=await axios.get("/api/cursto/listar-contas-a-pagar");c.value=t.data.data}catch(t){console.error("Erro ao carregar os dados:",t)}};v(f),V(()=>{const t=searchQuery.value.toLowerCase();return c.value.filter(e=>e.nome.toLowerCase().includes(t)||String(e.valor).includes(t))});const $=t=>{const e=t.split("-");return`${e[2]}/${e[1]}/${e[0]}`},L={pendente:"/storage/images/check_circle_laranja.svg",pago:"/storage/images/check_circle_verde.svg",agendada:"/storage/images/agendada.svg",atrasado:"/storage/images/atrasada.svg"},P=t=>L[t]||"/storage/images/check_circle_laranja.svg",S=async()=>{try{const e=(await axios.get("/api/painel-analitycos/faturamento-por-dia-mes")).data,s=new Date().getMonth()+1,n=Object.values(e.faturamento).filter(l=>(parseInt(l.dia)<=new Date().getDate()?s:s-1)===s).sort((l,r)=>l.dia-r.dia);Array.isArray(n)?(g.value=n.map(l=>l.dia),m.value=n.map(l=>parseFloat(l.total)),h()):console.error("Erro: Os dados recebidos não estão no formato esperado.",e)}catch(t){console.error("Erro ao buscar dados:",t)}},h=()=>{i.value&&i.value.destroy(),i.value=new x(p.value.getContext("2d"),{type:"bar",data:{labels:g.value,datasets:[{label:"Faturamento Diário",data:m.value,backgroundColor:"rgba(75, 192, 75, 0.6)",borderColor:"rgba(75, 192, 75, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,ticks:{callback:function(t){return t>=1e3?`${t/1e3} mil`:t}}}}}})};return(t,e)=>(d(),B(z,null,{default:M(()=>[R(N(O),{title:"Painel"}),e[3]||(e[3]=a("div",{class:"flex justify-between items-center mb-4"},[a("div",null,[a("div",{class:"painel-title text-2xl sm:text-3xl md:text-3xl"}," ERP Legado "),a("div",{class:"painel-subtitle"},[a("p",{class:"text-sm sm:text-base md:text-md"}," Acompanhe o desempenho geral ")])])],-1)),a("div",H,[a("div",J,[a("div",K,[a("div",U,[e[0]||(e[0]=a("h3",{class:"text-lg font-semibold text-gray-700 mb-2"}," Pagamentos ",-1)),a("div",X,[(d(!0),_(Z,null,Q(c.value,s=>(d(),_("div",{key:s.id,onClick:E,class:"flex justify-between items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},[a("div",Y,[a("p",aa,u(s.nome),1),a("p",ta,u(s.valor_formatado)+" - Vence em "+u($(s.vencimento)),1)]),a("div",null,[a("img",{src:P(s.status),alt:"Status: "+s.status,class:"w-6 h-6 object-contain transition-transform transform hover:scale-105"},null,8,ea)])]))),128))])])]),e[2]||(e[2]=a("div",{class:"flex flex-col items-center justify-center w-full bg-white rounded-lg p-12 border border-gray-200 group"},[a("img",{src:"https://login.taiksu.com.br/applications/6967173ec2616.png",alt:"Logo",class:"w-16 h-16 mb-4 group-hover:scale-110 transition-all ease-in-out duration-300"}),a("h2",{class:"text-lg font-semibold text-gray-700 text-center"},"Estamos migrando para o visão geral"),a("p",{class:"text-sm text-gray-500 text-center"},"Veja os dados da unidade no novo app."),a("a",{href:"https://login.taiksu.com.br/?redirect_uri=https%3A%2F%2Fdashboard.taiksu.com.br%2Fcallback",class:"text-sm text-white bg-green-500 px-6 shadow-xl hover:shadow-sm transition-shadow duration-400 py-1 rounded-full hover:bg-green-600 transition-all ease-in-out duration-300 mt-4 text-center"},"Acessar")],-1)),a("div",sa,[e[1]||(e[1]=a("h3",{class:"text-lg font-semibold text-gray-700"},"Faturamento diário",-1)),a("div",oa,[a("canvas",{ref_key:"barChart",ref:p},null,512)])])])])]),_:1}))}},ga=G(ra,[["__scopeId","data-v-2b8e4f5a"]]);export{ga as default};
