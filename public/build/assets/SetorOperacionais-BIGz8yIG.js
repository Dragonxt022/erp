import{d as r,j as N,i as U,e as f,o as i,a as e,m as T,v as q,F as b,h as A,t as R,k as V,l as z,f as C,b as m,p as k,c as $,w as S,u as Q,Z as X,s as Z,n as G}from"./app-CxqmtPRA.js";import{A as H}from"./LayoutFranqueadora-CdyMD9Ko.js";import{B as I}from"./ButtonPrimaryMedio-Cs0DxQ3w.js";import{_ as J}from"./DetalhesSetorOperacao-UoL50_-R.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as K}from"./InputModel-B_Aua7kq.js";import{_ as W}from"./LabelModel-Dm9JgWDx.js";import{B as Y}from"./ButtonCancelar-D9bJmMtZ.js";import{C as ee}from"./ConfirmDialog-Bjr1et44.js";const oe={class:"search-container relative flex items-center w-full mb-4"},ae={class:"card-container"},se=["onClick"],te={class:"card-inner"},re={class:"icon-container"},le=["src"],ne={class:"text-container"},ie={class:"city"},ce={__name:"ListarSetorOperacional",emits:["selecionado"],setup(h,{emit:v}){const t=r([]),_=r(""),c=v,p=async()=>{try{const a=await V.get("/api/admin-operacionais");t.value=a.data.data}catch(a){console.error("Erro ao carregar operacionais:",a)}},d=a=>{c("selecionado",a),console.log("Selecionado:",a)},g=N(()=>t.value.filter(a=>a.name.toLowerCase().includes(_.value.toLowerCase())));return U(p),(a,o)=>(i(),f("div",null,[o[3]||(o[3]=e("div",{class:"painel-title"},"Setores Operacionais",-1)),o[4]||(o[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Segmente os setores das operações da rede")],-1)),e("div",oe,[o[1]||(o[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),T(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>_.value=l),placeholder:"Pesquisar",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[q,_.value]])]),e("div",ae,[(i(!0),f(b,null,A(g.value,l=>(i(),f("div",{key:l.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:y=>d(l)},[e("div",te,[e("div",re,[e("img",{src:l.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,le)]),e("div",ne,[e("div",ie,R(l.name),1),o[2]||(o[2]=e("div",{class:"owner text-gray-500 text-sm"},"Nenhum colaborador",-1))])])],8,se))),128))])]))}},de=x(ce,[["__scopeId","data-v-0f48e479"]]),ue={key:0,class:"sidebar-container"},me={key:0,class:"loading-overlay"},pe={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},fe={class:"flex justify-center mb-6 relative group"},ve=["src"],_e={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ge={class:"form-buttons"},he={__name:"CadastroSetorOpeperacional",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(h,{emit:v}){const t=z(),_=v,c=r(""),p=r(""),d=r(null),g=r(null),a=r(""),o=r(!1),l=r(!1),y=r(""),F=()=>{w(),_("cancelar")},w=()=>{c.value="",a.value="",_("cancelar")},O=()=>c.value?!0:(t.error("Por favor, preencha todos os campos obrigatórios."),a.value="Por favor, preencha todos os campos obrigatórios.",!1),B=async()=>{var u,s;if(O())try{o.value=!0;const n=new FormData;n.append("name",c.value),d.value&&n.append("profile_photo",d.value);const $e=await V.post("/api/admin-operacionais",n,{headers:{"Content-Type":"multipart/form-data"}});t.success("setor cadastrada com sucesso!"),w()}catch(n){t.error("Erro ao cadastrar setor."),a.value=((s=(u=n.response)==null?void 0:u.data)==null?void 0:s.message)||"Erro ao cadastrar setor."}finally{o.value=!1}},D=u=>{y.value=u,l.value=!0},L=()=>{B(),l.value=!1},M=()=>{l.value=!1},j=()=>{var u;(u=g.value)==null||u.click()},E=()=>{p.value="",d.value=null,t.info("Imagem removida.")},P=u=>{const s=u.target.files[0];if(s){d.value=s;const n=new FileReader;n.onload=()=>{p.value=n.result,t.success("Imagem carregada com sucesso!")},n.readAsDataURL(s)}};return(u,s)=>h.isVisible?(i(),f("div",ue,[o.value?(i(),f("div",me,s[3]||(s[3]=[e("div",{class:"spinner"},null,-1)]))):C("",!0),e("div",pe,[e("form",null,[e("div",fe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:j},[p.value?(i(),f(b,{key:0},[e("img",{src:p.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,ve),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:s[0]||(s[0]=k(()=>{},["stop"]))},[e("button",{onClick:k(E,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(i(),f("img",_e))]),e("input",{type:"file",ref_key:"fileInput",ref:g,accept:"image/*",class:"hidden",onChange:P},null,544)]),m(W,{text:"Nome do setor operacional"}),m(K,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=n=>c.value=n),placeholder:"Entregas"},null,8,["modelValue"]),m(ee,{isVisible:l.value,motivo:y.value,onConfirm:L,onCancel:M},null,8,["isVisible","motivo"]),e("div",ge,[m(Y,{class:"w-full mr-2",text:"Cancelar",onClick:F}),m(I,{class:"w-full",text:"Cadastrar",onClick:s[2]||(s[2]=n=>D("Criar novo setor?"))})])])])])):C("",!0)}},ye=x(he,[["__scopeId","data-v-49e46bca"]]),Ce={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},be={class:"flex flex-col gap-4"},xe={class:"absolute bottom-4 right-4"},we={key:1,class:"mt-4"},ke={__name:"SetorOperacionais",setup(h){const v=r(null),t=r(!1),_=r(!1),c=r(),p=()=>{var o;(o=c.value)==null||o.fetch()},d=()=>{t.value=!t.value},g=()=>{v.value=null,t.value=!1,p()},a=o=>{v.value=o};return(o,l)=>(i(),$(H,null,{default:S(()=>[m(Q(X),{title:"Setores Operacionais"}),m(Z,{name:"fade",mode:"out-in"},{default:S(()=>[e("div",Ce,[e("div",null,[m(de,{ref_key:"listar",ref:c,onCadastrar:p,onSelecionado:a},null,512)]),e("div",be,[t.value?(i(),f("div",we,[m(ye,{isVisible:t.value,onCadastrar:g,onCancelar:d},null,8,["isVisible"])])):(i(),f(b,{key:0},[v.value?(i(),$(J,{key:0,onCancelar:d,informacoes:v.value},null,8,["informacoes"])):C("",!0),e("div",xe,[m(I,{text:"Cadastrar novo setor",iconPath:"/storage/images/arrow_left_alt.svg",onClick:d,class:G({hidden:_.value})},null,8,["class"])])],64))])])]),_:1})]),_:1}))}},je=x(ke,[["__scopeId","data-v-f050bdbf"]]);export{je as default};
