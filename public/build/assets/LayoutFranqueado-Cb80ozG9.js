import{y as $,i as g,o as l,e as u,a as e,t as v,d as C,m as y,D as A,c as F,w as L,n as p,h as x,u as S,A as P,p as D,F as w,g as I,b as _,N as M,Z as U,r as V}from"./app-BkFjde_Z.js";import{u as E}from"./user-D1KyZnKq.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={setup(){const a=E();$(async()=>{a.user||await a.fetchUserProfile()});const s=g(()=>a.user),o=g(()=>{var t;return(t=a.user)==null?void 0:t.unidade}),d=g(()=>{var t,r;return((t=s.value)==null?void 0:t.profile_photo_url)||`https://ui-avatars.com/api/?name=${m((r=s.value)==null?void 0:r.name)}&color=7F9CF5&background=EBF4FF`});function m(t){return t?t.split(" ").map(i=>i.charAt(0).toUpperCase()).join(""):"*"}return{user:s,profilePhoto:d,unidade:o}}},R={class:"navbar"},T={class:"navbar-content"},H={class:"navbar-left"},j={class:"navbar-logo"},J=["href"],O={class:"navbar-right"},z={class:"user-info"},Q=["src"],W={class:"user-details"},Z={class:"user-name"},K={class:"user-location"};function X(a,s,o,d,m,t){var r,n;return l(),u("div",R,[s[2]||(s[2]=e("div",{class:"navbar-background"},null,-1)),e("div",T,[e("div",H,[e("div",j,[s[1]||(s[1]=e("div",{class:"mr-4"},[e("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[e("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),e("div",null,[e("a",{href:a.route("franqueado.painel")},s[0]||(s[0]=[e("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,J)])])]),e("div",O,[e("div",z,[e("img",{src:d.profilePhoto,alt:"Avatar",class:"avatar"},null,8,Q),e("div",W,[e("div",Z,v((r=d.user)==null?void 0:r.name),1),e("div",K,v(((n=d.unidade)==null?void 0:n.cidade)||"Taiksu Franchising"),1)])])])])])}const Y=k(G,[["render",X],["__scopeId","data-v-4555e6c1"]]),ee={class:"icon"},se=["src"],ae={class:"label"},te={type:"submit",class:"w-full h-full flex items-center"},oe={class:"icon"},ne=["src"],ie={class:"label"},le={key:2,class:"submenu"},re={class:"label"},ue={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]}},setup(a){const s=a,o=C(!1),d=g(()=>o.value),m=c=>{s.submenuItems&&s.submenuItems.length>0&&(c.preventDefault(),t())},t=()=>{o.value=!o.value,n()},r=()=>{const c=localStorage.getItem(`submenu-${s.link}`);c!==null&&(o.value=JSON.parse(c))},n=()=>{localStorage.setItem(`submenu-${s.link}`,JSON.stringify(o.value))},i=g(()=>f.value||s.isActive?"submenu-active":""),q=c=>{const h=window.location.pathname,b=new URL(route(c),window.location.origin).pathname;return h===b},f=g(()=>s.submenuItems.some(c=>q(c.link))),N=()=>{s.isLogout&&M.post(route("logout"))};return r(),y(f,()=>{f.value||A(()=>{o.value=!1,n()})}),y(o,()=>{A(()=>{n()})}),(c,h)=>(l(),u("div",null,[!a.isLogout&&a.link?(l(),F(S(P),{key:0,class:p(["menu-item",[i.value,{active:a.isActive||f.value}]]),href:a.link||"#",onClick:m},{default:L(()=>[e("div",ee,[e("img",{src:a.icon,alt:"icon"},null,8,se)]),e("div",ae,v(a.label),1),a.submenuItems&&a.submenuItems.length>0?(l(),u("div",{key:0,class:p(["right-icon",{"rotate-icon":d.value}])},h[0]||(h[0]=[e("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):x("",!0)]),_:1},8,["class","href"])):(l(),u("form",{key:1,onSubmit:D(N,["prevent"]),class:"menu-item"},[e("button",te,[e("div",oe,[e("img",{src:a.icon,alt:"icon"},null,8,ne)]),e("div",ie,v(a.label),1)])],32)),a.submenuItems&&a.submenuItems.length>0&&(o.value||f.value)?(l(),u("div",le,[(l(!0),u(w,null,I(a.submenuItems,(b,B)=>(l(),u("div",{key:B},[_(S(P),{class:p(["submenu-item",{active:q(b.link)}]),href:c.route(b.link)},{default:L(()=>[e("div",re,v(b.label),1)]),_:2},1032,["href","class"])]))),128))])):x("",!0)]))}},ce=k(ue,[["__scopeId","data-v-ce74ad6d"]]),de={class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},me={__name:"Slidebar",setup(a){const s=C(null),o=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1}]},{name:"Gestão da loja",items:[{label:"Controle de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,submenuItems:[{label:"Inventário",icon:"/storage/images/add_product.svg",link:"franqueado.inventario"},{label:"Saida de estoque",link:"login.pagina.estoque"},{label:"Fornecedores",link:"franqueado.fornecedores"},{label:"Novo Pedidos",link:"franqueado.pedidos"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos"},{label:"Canais de Vendas",link:"franqueado.canaisVendas"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas"}],isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}];$(()=>{const t=localStorage.getItem("sidebarScrollPosition");t&&s.value&&(s.value.scrollTop=t)});const d=()=>{s.value&&localStorage.setItem("sidebarScrollPosition",s.value.scrollTop)},m=t=>{const r=window.location.pathname,n=new URL(t,window.location.origin).pathname;return r===n||r.startsWith(n)};return(t,r)=>(l(),u("div",null,[e("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:s,onScroll:d},[(l(),u(w,null,I(o,n=>e("div",{key:n.name,class:"menu-category mb-6"},[e("div",de,v(n.name),1),(l(!0),u(w,null,I(n.items,i=>(l(),F(ce,{key:i.link||"no-link",label:i.label,icon:i.icon,link:i.link?t.route(i.link):null,submenuItems:i.submenuItems,isActive:i.link?m(t.route(i.link)):!1,isLogout:i.isLogout},null,8,["label","icon","link","submenuItems","isActive","isLogout"]))),128))])),64))],544)]))}},ge=k(me,[["__scopeId","data-v-45c3bd0a"]]),ve={class:"content"},fe={__name:"LayoutFranqueado",props:{title:String},setup(a){return(s,o)=>(l(),u("div",null,[_(S(U),{title:a.title},null,8,["title"]),_(Y),_(ge),e("main",ve,[V(s.$slots,"default",{},void 0,!0)])]))}},pe=k(fe,[["__scopeId","data-v-d4397c97"]]);export{pe as L};
