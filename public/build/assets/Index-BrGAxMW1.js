import{d as o,o as m,e as x,a as t,t as r,y as z,c as N,w as O,b as Y,u as Z,Z as W,g as G,F as J,f as g,h as K}from"./app-BzqJKBn-.js";import{d as Q}from"./index-DfCrRVvi.js";import{C as q,r as U}from"./chart-C6b6o4TJ.js";import{L as X}from"./LayoutFranqueado-DpJwz_I1.js";import{r as tt,d as L}from"./dayjs.min-sc9RjJO_.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-CeF2F2D8.js";var v={exports:{}},st=v.exports,S;function at(){return S||(S=1,function(b,p){(function(c,u){b.exports=u(tt())})(st,function(c){function u(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var _=u(c),f={name:"pt-br",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(i){return i+"º"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return _.default.locale(f,null,!0),f})}(v)),v.exports}at();const ot={class:"relative"},nt={class:"flex items-center justify-center rounded-md"},rt={class:"font-semibold text-lg"},lt={__name:"CalendarSimples",setup(b){L.locale("pt-br");const p=o(L());return(c,u)=>(m(),x("div",ot,[t("div",nt,[t("span",rt,r(p.value.format("MMMM YYYY")),1)])]))}},it={class:"flex justify-between items-center mb-4"},dt={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},ct={class:"flex items-center space-x-2"},ut={class:"text-gray-900 text-[17px] font-semibold"},mt={class:"mt-5"},pt={class:"grid grid-cols-3 grid-rows-1 gap-4"},ft={class:"row-span-3"},gt={class:"bg-white rounded-lg p-5 h-full w-full"},xt={class:"compromissos-container flex flex-col gap-2 overflow-hidden"},_t={class:"flex flex-col"},vt={class:"text-[14px] font-medium text-gray-900"},bt={class:"text-sm text-gray-600"},ht=["src","alt"],yt={class:"bg-white rounded-lg p-7"},wt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Mt={class:"bg-white rounded-lg p-7"},kt={class:"flex items-center mb-4"},Ft={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",style:{fill:"rgba(0, 0, 0, 1)",transform:"",msfilter:""}},jt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Ct={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},$t={class:"bg-white rounded-lg p-7 w-[350px] shadow-lg"},Dt={class:"text-sm text-gray-600 space-y-2"},Yt={class:"text-lg font-bold text-gray-900 mt-3"},qt={class:"bg-white rounded-lg p-7"},Lt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},St={class:"bg-white rounded-lg p-4"},It={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},Vt={class:"bg-white rounded-lg p-4 col-span-3"},Et={class:"w-full h-[220px]"},At={__name:"Index",setup(b){q.register(...U);const p=o(null),c=o(null),u=o([]),_=o([]),f=o([]),i=o("0,00"),w=o("0,00"),M=o("0,00"),k=o("0,00"),F=o("0,00"),h=o("0,00"),j=o("0,00"),C=o(0),$=o("0,00"),y=o(!1),I=()=>{Q.Inertia.replace(route("franqueado.contasApagar"))},V=()=>{y.value=!0},E=()=>{y.value=!1},A=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-cmv";const l=[];s&&l.push(`start_date=${s}`),e&&l.push(`end_date=${e}`),l.length>0&&(a+=`?${l.join("&")}`);const n=(await axios.get(a)).data;n.saldo_estoque_inicial?(i.value=n.start_date||"não informado",w.value=n.end_date||"não informado",M.value=n.saldo_estoque_inicial||"0,00",k.value=n.entradas_durante_periodo||"0,00",F.value=n.saldo_estoque_final||"0,00",h.value=n.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(a){console.error("Erro ao buscar dados analíticos:",a)}},R=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-fluxo-caixa";const l=[];s&&l.push(`start_date=${s}`),e&&l.push(`end_date=${e}`),l.length>0&&(a+=`?${l.join("&")}`);const n=(await axios.get(a)).data;j.value=n.total_caixas||"0,00",C.value=n.quantidade_pedidos||0,$.value=n.ticket_medio||"0,00"}catch(a){console.error("Erro ao buscar dados analíticos:",a)}};z(()=>{A(),R(),B(),H(),D()});const B=async()=>{try{const s=await axios.get("/api/cursto/listar-contas-a-pagar");f.value=s.data.data}catch(s){console.error("Erro ao carregar os dados:",s)}},H=async()=>{try{const e=(await axios.get("/api/painel-analitycos/faturamento-por-dia-mes")).data,a=new Date().getMonth()+1,l=Object.values(e.faturamento).filter(d=>(parseInt(d.dia)<=new Date().getDate()?a:a-1)===a).sort((d,n)=>d.dia-n.dia);Array.isArray(l)?(_.value=l.map(d=>d.dia),u.value=l.map(d=>parseFloat(d.total)),D()):console.error("Erro: Os dados recebidos não estão no formato esperado.",e)}catch(s){console.error("Erro ao buscar dados:",s)}},D=()=>{c.value&&c.value.destroy(),c.value=new q(p.value.getContext("2d"),{type:"bar",data:{labels:_.value,datasets:[{label:"Faturamento Diário",data:u.value,backgroundColor:"rgba(75, 192, 75, 0.6)",borderColor:"rgba(75, 192, 75, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return s>=1e3?`${s/1e3} mil`:s}}}}}})},P=s=>{const e=s.split("-");return`${e[2]}/${e[1]}/${e[0]}`},T=s=>s==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(s,e)=>(m(),N(X,null,{default:O(()=>[Y(Z(W),{title:"Painel"}),t("div",it,[e[1]||(e[1]=t("div",null,[t("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Visão geral da loja "),t("div",{class:"painel-subtitle"},[t("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe o desempenho geral ")])],-1)),t("div",dt,[t("div",ct,[e[0]||(e[0]=t("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),t("span",ut,[Y(lt)])])])]),t("div",mt,[t("div",pt,[t("div",ft,[t("div",gt,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-2"}," Compromissos ",-1)),t("div",xt,[(m(!0),x(J,null,G(f.value,a=>(m(),x("div",{key:a.id,onClick:I,class:"flex justify-between items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},[t("div",_t,[t("p",vt,r(a.nome),1),t("p",bt,r(a.valor_formatado)+" - Vencimento "+r(P(a.vencimento)),1)]),t("div",null,[t("img",{src:T(a.status),alt:"Status: "+a.status,class:"w-6 h-6 object-contain transition-transform transform hover:scale-105"},null,8,ht)])]))),128))])])]),t("div",yt,[e[3]||(e[3]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Faturamento",-1)),t("div",wt," R$ "+r(j.value),1),e[4]||(e[4]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",Mt,[t("div",kt,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-700"},"CMV",-1)),t("button",{onClick:V,class:"ml-2"},[(m(),x("svg",Ft,e[5]||(e[5]=[t("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1)])))])]),t("div",jt," R$ "+r(h.value),1),e[14]||(e[14]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1)),y.value?(m(),x("div",Ct,[t("div",$t,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"}," Detalhes do CMV ",-1)),t("div",Dt,[t("p",null,[e[7]||(e[7]=t("span",{class:"font-semibold text-gray-800"},"Período:",-1)),g(" "+r(i.value)+" - "+r(w.value),1)]),t("p",null,[e[8]||(e[8]=t("span",{class:"font-semibold text-gray-800"}," Saldo Inicial: ",-1)),g(" R$ "+r(M.value),1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"font-semibold text-gray-800"},"Entradas:",-1)),g(" R$ "+r(k.value),1)]),t("p",null,[e[10]||(e[10]=t("span",{class:"font-semibold text-gray-800"},"Saldo Final:",-1)),g(" R$ "+r(F.value),1)]),t("p",Yt,[e[11]||(e[11]=t("span",{class:"font-semibold"},"CMV:",-1)),g(" R$ "+r(h.value),1)]),e[12]||(e[12]=t("p",null," Parametros: Saldo Inicial + Entradas nesse periodo - Saldo Final = Total CMV ",-1))]),t("button",{onClick:E,class:"mt-4 text-red-800 rounded-md transition"}," Fechar ")])])):K("",!0)]),t("div",qt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Ticket médio",-1)),t("div",Lt," R$ "+r($.value),1),e[16]||(e[16]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",St,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Pedidos",-1)),t("div",It,r(C.value),1),e[18]||(e[18]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",Vt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-700"}," Faturamento diário ",-1)),t("div",Et,[t("canvas",{ref_key:"barChart",ref:p},null,512)])])])])]),_:1}))}},Ot=et(At,[["__scopeId","data-v-cbc90329"]]);export{Ot as default};
