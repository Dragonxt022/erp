import{l as U,d as o,e as g,o as i,f as w,c as O,a as e,t as I,b as f,m as P,v as N,n as q,F as V,j as z,i as Q,h as X,k as A,p as j,w as L,u as Z,Z as G,s as H}from"./app-CJV0vEcG.js";import{A as J}from"./LayoutFranqueadora-zFHzqElD.js";import{B}from"./ButtonPrimaryMedio-DNLSf_CT.js";import{B as K}from"./ButtonEditeMedio-Dg7GrUK9.js";import{E as W}from"./EditarSetorOperacional-DAeVWctj.js";import{C as T}from"./ConfirmDialog-DY1d8jnC.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as Y}from"./InputModel-CnkbUehz.js";import{_ as ee}from"./LabelModel-r8Ik1D7U.js";import{B as oe}from"./ButtonCancelar-DDfF7pm8.js";const se={key:0},ae={class:"w-full h-[180px] bg-white rounded-[20px] p-12 mb-4"},te={class:"flex items-center"},re={class:"w-1/1 flex justify-center"},le=["src"],ie={class:"w-2/3 pl-5"},ne={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},ce={class:"w-1/1"},de={class:"w-full h-[280px] bg-white rounded-[20px] p-12"},ue={key:1,class:"mt-4"},me={__name:"DetalhesSetorOperacao",props:{informacoes:{type:Object,required:!0}},setup(b){const n=U(),a=b,c=o(!1),p=o(""),s=o(""),h=m=>{p.value=m,c.value=!0},d=o(!1),t=()=>{u(),c.value=!1},r=()=>{c.value=!1},u=async()=>{try{d.value=!0;const m=await axios.delete(`/api/admin-operacionais/${a.informacoes.id}`);n.success("setor excluído com sucesso!"),d.value=!1}catch(m){console.error("Erro ao excluir setor:",m),n.error("Erro ao excluir setor."),d.value=!1}},C=m=>m?`/storage/${m}`:"/storage/images/default_profile.png",k=o(!1),_=o(!1),F=()=>{o.dadosinformacoes.fetchinformacoes()},E=()=>{_.value=!_.value,k.value=!1},S=()=>{_.value=!1,k.value=!0},D=async()=>{if(s.value.length===0||s.value.length>255){n.error("A mensagem deve ter entre 1 e 255 caracteres.");return}try{await axios.post("/api/notificacoes/setor",{mensagem:s.value,setor_id:a.informacoes.id}),n.success("Comunicado enviado com sucesso!"),s.value=""}catch(m){console.error("Erro ao enviar comunicado:",m),n.error("Erro ao enviar comunicado.")}};return(m,x)=>(i(),g(V,null,[_.value?w("",!0):(i(),g("div",se,[e("div",ae,[e("div",te,[e("div",re,[e("img",{src:C(b.informacoes.profile_photo),alt:"Imagem",class:"w-20 h-20 p-2 rounded-md shadow-lg"},null,8,le)]),e("div",ie,[e("div",ne,I(b.informacoes.name||"N/A"),1)]),e("div",ce,[f(T,{isVisible:c.value,motivo:p.value,onConfirm:t,onCancel:r},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-[110px] right-[70px] cursor-pointer",onClick:x[0]||(x[0]=$=>h("excluir setor operacional"))},x[2]||(x[2]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-6 h-6"},null,-1)]))])])]),e("div",de,[x[3]||(x[3]=e("div",{class:"flex items-center gap-2 mb-[10px]"},[e("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"},[e("img",{src:"/storage/images/campaign_bleck.svg",alt:"icone"})]),e("div",{class:"text-gray-700 text-[15px] font-semibold font-['Figtree']"}," Emitir comunicado ")],-1)),P(e("textarea",{class:"w-full h-[100px] bg-[#F8F8F8] rounded-lg p-4 text-gray-700 text-[15px] font-['Figtree'] focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Digite sua mensagem aqui......",rows:"4","onUpdate:modelValue":x[1]||(x[1]=$=>s.value=$)},null,512),[[N,s.value]]),e("p",{class:q(["text-right text-xs mt-1",{"text-gray-500":s.value.length<=255,"text-red-500":s.value.length>255}])},I(s.value.length)+"/255 caracteres ",3),f(B,{text:"Enviar comunicado",class:"w-full mt-2",onClick:D})])])),b.informacoes.id&&!_.value?(i(),g("div",ue,[f(K,{text:"Editar informacoes","icon-path":"/storage/images/border_color.svg",onClick:E,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):w("",!0),_.value?(i(),O(W,{key:2,ref:"dadosinformacoes",isVisible:_.value,informacoes:b.informacoes,onDadosinformacoes:F,onCancelar:S},null,8,["isVisible","informacoes"])):w("",!0)],64))}},fe={class:"search-container relative flex items-center w-full mb-4"},pe={class:"card-container"},ve=["onClick"],ge={class:"card-inner"},he={class:"icon-container"},_e=["src"],xe={class:"text-container"},ye={class:"city"},be={__name:"ListarSetorOperacional",emits:["selecionado"],setup(b,{emit:n}){const a=o([]),c=o(""),p=n,s=async()=>{try{const t=await A.get("/api/admin-operacionais");a.value=t.data.data}catch(t){console.error("Erro ao carregar operacionais:",t)}},h=t=>{p("selecionado",t),console.log("Selecionado:",t)},d=z(()=>a.value.filter(t=>t.name.toLowerCase().includes(c.value.toLowerCase())));return Q(s),(t,r)=>(i(),g("div",null,[r[3]||(r[3]=e("div",{class:"painel-title"},"Setores Operacionais",-1)),r[4]||(r[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Segmente os setores das operações da rede")],-1)),e("div",fe,[r[1]||(r[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),P(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=u=>c.value=u),placeholder:"Pesquisar",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[N,c.value]])]),e("div",pe,[(i(!0),g(V,null,X(d.value,u=>(i(),g("div",{key:u.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:C=>h(u)},[e("div",ge,[e("div",he,[e("img",{src:u.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,_e)]),e("div",xe,[e("div",ye,I(u.name),1),r[2]||(r[2]=e("div",{class:"owner text-gray-500 text-sm"},"Nenhum colaborador",-1))])])],8,ve))),128))])]))}},we=M(be,[["__scopeId","data-v-0f48e479"]]),Ce={key:0,class:"sidebar-container"},ke={key:0,class:"loading-overlay"},$e={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},Ve={class:"flex justify-center mb-6 relative group"},Fe=["src"],Ee={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Se={class:"form-buttons"},De={__name:"CadastroSetorOpeperacional",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(b,{emit:n}){const a=U(),c=n,p=o(""),s=o(""),h=o(null),d=o(null),t=o(""),r=o(!1),u=o(!1),C=o(""),k=()=>{_(),c("cancelar")},_=()=>{p.value="",t.value=""},F=()=>p.value?!0:(a.error("Por favor, preencha todos os campos obrigatórios."),t.value="Por favor, preencha todos os campos obrigatórios.",!1),E=async()=>{var y,l;if(F())try{r.value=!0;const v=new FormData;v.append("name",p.value),h.value&&v.append("profile_photo",h.value);const Ue=await A.post("/api/admin-operacionais",v,{headers:{"Content-Type":"multipart/form-data"}});a.success("setor cadastrada com sucesso!"),_()}catch(v){a.error("Erro ao cadastrar setor."),t.value=((l=(y=v.response)==null?void 0:y.data)==null?void 0:l.message)||"Erro ao cadastrar setor."}finally{r.value=!1}},S=y=>{C.value=y,u.value=!0},D=()=>{E(),u.value=!1},m=()=>{u.value=!1},x=()=>{var y;(y=d.value)==null||y.click()},$=()=>{s.value="",h.value=null,a.info("Imagem removida.")},R=y=>{const l=y.target.files[0];if(l){h.value=l;const v=new FileReader;v.onload=()=>{s.value=v.result,a.success("Imagem carregada com sucesso!")},v.readAsDataURL(l)}};return(y,l)=>b.isVisible?(i(),g("div",Ce,[r.value?(i(),g("div",ke,l[3]||(l[3]=[e("div",{class:"spinner"},null,-1)]))):w("",!0),e("div",$e,[e("form",null,[e("div",Ve,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:x},[s.value?(i(),g(V,{key:0},[e("img",{src:s.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Fe),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:l[0]||(l[0]=j(()=>{},["stop"]))},[e("button",{onClick:j($,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(i(),g("img",Ee))]),e("input",{type:"file",ref_key:"fileInput",ref:d,accept:"image/*",class:"hidden",onChange:R},null,544)]),f(ee,{text:"Nome do setor operacional"}),f(Y,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=v=>p.value=v),placeholder:"Entregas"},null,8,["modelValue"]),f(T,{isVisible:u.value,motivo:C.value,onConfirm:D,onCancel:m},null,8,["isVisible","motivo"]),e("div",Se,[f(oe,{class:"w-full mr-2",text:"Cancelar",onClick:k}),f(B,{class:"w-full",text:"Cadastrar",onClick:l[2]||(l[2]=v=>S("Criar novo setor?"))})])])])])):w("",!0)}},Oe=M(De,[["__scopeId","data-v-47f6ee8c"]]),Ie={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},Be={class:"flex flex-col gap-4"},Me={class:"absolute bottom-4 right-4"},je={key:1,class:"mt-4"},Le={__name:"SetorOperacionais",setup(b){const n=o(null),a=o(!1),c=()=>{a.value=!a.value},p=()=>{s(),a.value=!1},s=()=>{o.listar.fetch()},h=d=>{n.value=d};return(d,t)=>(i(),O(J,null,{default:L(()=>[f(Z(G),{title:"Setores Operacionais"}),f(H,{name:"fade",mode:"out-in"},{default:L(()=>[e("div",Ie,[e("div",null,[f(we,{ref:"listar",onCadastrar:s,onSelecionado:h},null,512)]),e("div",Be,[a.value?(i(),g("div",je,[f(Oe,{isVisible:a.value,onCadastrar:p,onCancelar:c},null,8,["isVisible"])])):(i(),g(V,{key:0},[n.value?(i(),O(me,{key:0,informacoes:n.value},null,8,["informacoes"])):w("",!0),e("div",Me,[f(B,{text:"Cadastrar novo setor",iconPath:"/storage/images/arrow_left_alt.svg",onClick:c,class:q({hidden:d.isEditMode})},null,8,["class"])])],64))])])]),_:1})]),_:1}))}},Ge=M(Le,[["__scopeId","data-v-32937588"]]);export{Ge as default};
