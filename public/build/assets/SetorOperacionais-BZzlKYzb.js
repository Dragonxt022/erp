import{l as P,d as o,q as Z,e as h,f as w,o as m,a as e,b as d,F as O,p as j,k as D,c as L,t as M,m as z,v as A,n as T,j as G,i as H,h as J,w as N,u as K,Z as W,s as Y}from"./app-C6S9B82p.js";import{A as ee}from"./LayoutFranqueadora-BPmr5_BE.js";import{B as U}from"./ButtonPrimaryMedio-DLBJAL6-.js";import{B as oe}from"./ButtonEditeMedio-CkiQrXg7.js";import{I as R}from"./InputModel-BMlcp2BH.js";import{_ as X}from"./LabelModel-IJoYw9zD.js";import{B as Q}from"./ButtonCancelar-DMT6YXo3.js";import{C as q}from"./ConfirmDialog-DhHMDAdA.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={key:0,class:"sidebar-container"},se={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},te={class:"flex justify-center mb-6 relative group"},re=["src"],le={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ne={class:"form-buttons"},ie={__name:"EditarSetorOperacional",props:{isVisible:{type:Boolean,required:!0},informacoes:{type:Object,required:!0}},emits:["cancelar"],setup(_,{emit:x}){const i=P(),p=_,v=x,c=o(""),u=o(""),r=o(""),l=o(null),a=o(null),f=o(""),C=o(!1),V=o("");Z(()=>p.informacoes,n=>{n&&(c.value=n.id||"",u.value=n.name||"",r.value=n.profile_photo_url||"")},{immediate:!0});const k=()=>{C.value=!0},$=()=>{C.value=!1,g()},y=()=>{C.value=!1},F=()=>{a.value.click()},E=n=>{const t=n.target.files[0];t&&(l.value=t,r.value=URL.createObjectURL(t))},I=()=>{l.value=null,r.value=""},S=()=>{v("cancelar")},g=async()=>{var n,t;if(!c.value||!u.value){f.value="Por favor, preencha todos os campos obrigatórios.";return}try{const s=new FormData;s.append("id",c.value),s.append("name",u.value),l.value&&s.append("profile_photo",l.value),s.append("_method","PUT"),await D.post(`/api/admin-operacionais/${c.value}`,s,{headers:{"Content-Type":"multipart/form-data"}}),i.success("Informações atualizadas com sucesso!"),v("cancelar")}catch(s){i.error("Erro ao atualizar as informações."),f.value=((t=(n=s.response)==null?void 0:n.data)==null?void 0:t.message)||"Erro ao atualizar as informações.",console.error("Erro na atualização:",s)}};return(n,t)=>_.isVisible?(m(),h("div",ae,[e("div",se,[e("form",null,[e("div",te,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:F},[r.value?(m(),h(O,{key:0},[e("img",{src:r.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,re),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:t[0]||(t[0]=j(()=>{},["stop"]))},[e("button",{onClick:j(I,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(m(),h("img",le))]),e("input",{type:"file",ref_key:"fileInput",ref:a,accept:"image/*",class:"hidden",onChange:E},null,544)]),d(X,{text:"Nome do setor operacional"}),d(R,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),placeholder:"Entregas"},null,8,["modelValue"]),d(q,{isVisible:C.value,motivo:V.value,onConfirm:$,onCancel:y},null,8,["isVisible","motivo"]),e("div",ne,[d(Q,{class:"w-full mr-2",text:"Cancelar",onClick:S}),d(U,{class:"w-full",text:"Atualizar",onClick:k})])])])])):w("",!0)}},ce=B(ie,[["__scopeId","data-v-6be0fdad"]]),ue={key:0},de={class:"w-full h-[180px] bg-white rounded-[20px] p-12 mb-4"},me={class:"flex items-center"},fe={class:"w-1/1 flex justify-center"},pe=["src"],ve={class:"w-2/3 pl-5"},ge={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},he={class:"w-1/1"},_e={class:"w-full h-[280px] bg-white rounded-[20px] p-12"},xe={key:1,class:"mt-4"},be={__name:"DetalhesSetorOperacao",props:{informacoes:{type:Object,required:!0}},emits:["cancelar"],setup(_,{emit:x}){const i=x,p=P(),v=_,c=o(!1),u=o(""),r=o(""),l=g=>{u.value=g,c.value=!0},a=o(!1),f=()=>{V(),c.value=!1,i("cancelar")},C=()=>{c.value=!1},V=async()=>{try{a.value=!0;const g=await D.delete(`/api/admin-operacionais/${v.informacoes.id}`);p.success("setor excluído com sucesso!"),a.value=!1,window.location.reload()}catch(g){console.error("Erro ao excluir setor:",g),p.error("Erro ao excluir setor."),a.value=!1}},k=g=>g?`/storage/${g}`:"/storage/images/default_profile.png",$=o(!1),y=o(!1),F=()=>{o.dadosinformacoes.fetchinformacoes()},E=()=>{y.value=!y.value,$.value=!1},I=()=>{y.value=!1,$.value=!0},S=async()=>{if(r.value.length===0||r.value.length>255){p.error("A mensagem deve ter entre 1 e 255 caracteres.");return}try{await D.post("/api/notificacoes/setor",{mensagem:r.value,setor_id:v.informacoes.id}),p.success("Comunicado enviado com sucesso!"),r.value=""}catch(g){console.error("Erro ao enviar comunicado:",g),p.error("Erro ao enviar comunicado.")}};return(g,n)=>(m(),h(O,null,[y.value?w("",!0):(m(),h("div",ue,[e("div",de,[e("div",me,[e("div",fe,[e("img",{src:k(_.informacoes.profile_photo),alt:"Imagem",class:"w-20 h-20 p-2 rounded-md shadow-lg"},null,8,pe)]),e("div",ve,[e("div",ge,M(_.informacoes.name||"N/A"),1)]),e("div",he,[d(q,{isVisible:c.value,motivo:u.value,onConfirm:f,onCancel:C},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-[110px] right-[70px] cursor-pointer",onClick:n[0]||(n[0]=t=>l("excluir setor operacional"))},n[2]||(n[2]=[e("img",{src:"/storage/images/delete.svg",alt:"excluir",class:"w-6 h-6"},null,-1)]))])])]),e("div",_e,[n[3]||(n[3]=e("div",{class:"flex items-center gap-2 mb-[10px]"},[e("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"},[e("img",{src:"/storage/images/campaign_bleck.svg",alt:"icone"})]),e("div",{class:"text-gray-700 text-[15px] font-semibold font-['Figtree']"}," Emitir comunicado ")],-1)),z(e("textarea",{class:"w-full h-[100px] bg-[#F8F8F8] rounded-lg p-4 text-gray-700 text-[15px] font-['Figtree'] focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Digite sua mensagem aqui......",rows:"4","onUpdate:modelValue":n[1]||(n[1]=t=>r.value=t)},null,512),[[A,r.value]]),e("p",{class:T(["text-right text-xs mt-1",{"text-gray-500":r.value.length<=255,"text-red-500":r.value.length>255}])},M(r.value.length)+"/255 caracteres ",3),d(U,{text:"Enviar comunicado",class:"w-full mt-2",onClick:S})])])),_.informacoes.id&&!y.value?(m(),h("div",xe,[d(oe,{text:"Editar informacoes","icon-path":"/storage/images/border_color.svg",onClick:E,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):w("",!0),y.value?(m(),L(ce,{key:2,ref:"dadosinformacoes",isVisible:y.value,informacoes:_.informacoes,onDadosinformacoes:F,onCancelar:I},null,8,["isVisible","informacoes"])):w("",!0)],64))}},ye={class:"search-container relative flex items-center w-full mb-4"},Ce={class:"card-container"},we=["onClick"],ke={class:"card-inner"},$e={class:"icon-container"},Ve=["src"],Fe={class:"text-container"},Ee={class:"city"},Ie={__name:"ListarSetorOperacional",emits:["selecionado"],setup(_,{emit:x}){const i=o([]),p=o(""),v=x,c=async()=>{try{const l=await D.get("/api/admin-operacionais");i.value=l.data.data}catch(l){console.error("Erro ao carregar operacionais:",l)}},u=l=>{v("selecionado",l),console.log("Selecionado:",l)},r=G(()=>i.value.filter(l=>l.name.toLowerCase().includes(p.value.toLowerCase())));return H(c),(l,a)=>(m(),h("div",null,[a[3]||(a[3]=e("div",{class:"painel-title"},"Setores Operacionais",-1)),a[4]||(a[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Segmente os setores das operações da rede")],-1)),e("div",ye,[a[1]||(a[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),z(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=f=>p.value=f),placeholder:"Pesquisar",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[A,p.value]])]),e("div",Ce,[(m(!0),h(O,null,J(r.value,f=>(m(),h("div",{key:f.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:C=>u(f)},[e("div",ke,[e("div",$e,[e("img",{src:f.profile_photo_url,alt:"Foto do setor",class:"w-10 h-10"},null,8,Ve)]),e("div",Fe,[e("div",Ee,M(f.name),1),a[2]||(a[2]=e("div",{class:"owner text-gray-500 text-sm"},"Nenhum colaborador",-1))])])],8,we))),128))])]))}},Se=B(Ie,[["__scopeId","data-v-0f48e479"]]),De={key:0,class:"sidebar-container"},Oe={key:0,class:"loading-overlay"},je={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},Ue={class:"flex justify-center mb-6 relative group"},Be=["src"],Le={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Me={class:"form-buttons"},Pe={__name:"CadastroSetorOpeperacional",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(_,{emit:x}){const i=P(),p=x,v=o(""),c=o(""),u=o(null),r=o(null),l=o(""),a=o(!1),f=o(!1),C=o(""),V=()=>{k(),p("cancelar")},k=()=>{v.value="",l.value="",p("cancelar")},$=()=>v.value?!0:(i.error("Por favor, preencha todos os campos obrigatórios."),l.value="Por favor, preencha todos os campos obrigatórios.",!1),y=async()=>{var t,s;if($())try{a.value=!0;const b=new FormData;b.append("name",v.value),u.value&&b.append("profile_photo",u.value);const Xe=await D.post("/api/admin-operacionais",b,{headers:{"Content-Type":"multipart/form-data"}});i.success("setor cadastrada com sucesso!"),k()}catch(b){i.error("Erro ao cadastrar setor."),l.value=((s=(t=b.response)==null?void 0:t.data)==null?void 0:s.message)||"Erro ao cadastrar setor."}finally{a.value=!1}},F=t=>{C.value=t,f.value=!0},E=()=>{y(),f.value=!1},I=()=>{f.value=!1},S=()=>{var t;(t=r.value)==null||t.click()},g=()=>{c.value="",u.value=null,i.info("Imagem removida.")},n=t=>{const s=t.target.files[0];if(s){u.value=s;const b=new FileReader;b.onload=()=>{c.value=b.result,i.success("Imagem carregada com sucesso!")},b.readAsDataURL(s)}};return(t,s)=>_.isVisible?(m(),h("div",De,[a.value?(m(),h("div",Oe,s[3]||(s[3]=[e("div",{class:"spinner"},null,-1)]))):w("",!0),e("div",je,[e("form",null,[e("div",Ue,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:S},[c.value?(m(),h(O,{key:0},[e("img",{src:c.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Be),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:s[0]||(s[0]=j(()=>{},["stop"]))},[e("button",{onClick:j(g,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(m(),h("img",Le))]),e("input",{type:"file",ref_key:"fileInput",ref:r,accept:"image/*",class:"hidden",onChange:n},null,544)]),d(X,{text:"Nome do setor operacional"}),d(R,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=b=>v.value=b),placeholder:"Entregas"},null,8,["modelValue"]),d(q,{isVisible:f.value,motivo:C.value,onConfirm:E,onCancel:I},null,8,["isVisible","motivo"]),e("div",Me,[d(Q,{class:"w-full mr-2",text:"Cancelar",onClick:V}),d(U,{class:"w-full",text:"Cadastrar",onClick:s[2]||(s[2]=b=>F("Criar novo setor?"))})])])])])):w("",!0)}},qe=B(Pe,[["__scopeId","data-v-49e46bca"]]),Ne={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2"},ze={class:"flex flex-col gap-4"},Ae={class:"absolute bottom-4 right-4"},Te={key:1,class:"mt-4"},Re={__name:"SetorOperacionais",setup(_){const x=o(null),i=o(!1),p=o(!1),v=o(),c=()=>{var a;(a=v.value)==null||a.fetch()},u=()=>{i.value=!i.value},r=()=>{x.value=null,i.value=!1,c()},l=a=>{x.value=a};return(a,f)=>(m(),L(ee,null,{default:N(()=>[d(K(W),{title:"Setores Operacionais"}),d(Y,{name:"fade",mode:"out-in"},{default:N(()=>[e("div",Ne,[e("div",null,[d(Se,{ref_key:"listar",ref:v,onCadastrar:c,onSelecionado:l},null,512)]),e("div",ze,[i.value?(m(),h("div",Te,[d(qe,{isVisible:i.value,onCadastrar:r,onCancelar:u},null,8,["isVisible"])])):(m(),h(O,{key:0},[x.value?(m(),L(be,{key:0,onCancelar:u,informacoes:x.value},null,8,["informacoes"])):w("",!0),e("div",Ae,[d(U,{text:"Cadastrar novo setor",iconPath:"/storage/images/arrow_left_alt.svg",onClick:u,class:T({hidden:p.value})},null,8,["class"])])],64))])])]),_:1})]),_:1}))}},oo=B(Re,[["__scopeId","data-v-f050bdbf"]]);export{oo as default};
