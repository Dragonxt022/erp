import{d as r,i as R,j as N,c as B,o as v,w as D,b as k,a as t,u as S,Z as I,t as n,e as m,f as C,g as i,p,v as c,F as T,h as H,k as O}from"./app-DtYnN9d5.js";import{L as Q}from"./LayoutFranqueado-YCBd5PsI.js";import{_ as P}from"./CalendarSimples2-B6PXbuuJ.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CP20iRgF.js";import"./pt-br-BwjgrFzS.js";const G={class:"flex justify-between items-center mb-4"},K={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},X={class:"flex items-center space-x-2"},Z={class:"text-gray-900 text-[17px] font-semibold"},J={class:"mt-5"},W={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Y={class:"bg-white rounded-lg p-8 border border-gray-200 shadow-md"},ee={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},te={class:"bg-white rounded-lg p-8 border border-gray-200 shadow-md"},se={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},oe={class:"mt-8"},ae={class:"bg-white rounded-lg shadow"},re={class:"bg-[#164110] grid grid-cols-7 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},le={key:0,class:"grid grid-cols-7 gap-4 py-2 px-6 bg-gray-50"},ne={class:"space-y-1"},ie={class:"flex items-center text-gray-900 font-semibold"},de=["src"],ue={class:"text-gray-900 font-semibold"},pe={class:"text-gray-900 font-medium"},ce={class:"text-gray-900 font-semibold"},ge={class:"text-gray-900 font-semibold"},ve={class:"text-gray-600 font-semibold"},xe={class:"text-gray-500 font-semibold"},me={key:1,class:"text-center mt-4"},fe={__name:"Index",setup(be){const h=r("0,00"),A=r("0,00"),b=r("0,00"),V=r("0,00"),_=r("0,00"),$=r("0,00"),y=r([]),j=r(!1),E=r(null),d=r(null),x=r(!0),f=r(!1),o=r({operacao:"",quantidade:"",quando:"",item:"",preco_unitario:"",valor_total:"",responsavel:""}),w={Entrada:{icon:"/storage/images/arrow_back_verde.svg",label:"Entrada"},Retirada:{icon:"/storage/images/arrow_back_red.svg",label:"Retirada"},Saida:{icon:"/storage/images/arrow_back_red.svg",label:"Saída"},Ajuste:{icon:"/storage/images/icon_ajustes.svg",label:"Ajuste"},"Ajuste - Exclusão":{icon:"/storage/images/arrow_back_red.svg",label:"Ajuste - Exclusão"},"Ajuste - Adição":{icon:"/storage/images/arrow_back_verde.svg",label:"Ajuste - Adição"},"Ajuste - Redução":{icon:"/storage/images/arrow_back_red.svg",label:"Ajuste - Redução"}},L=R(()=>y.value.filter(a=>(o.value.operacao===""||a.operacao.toLowerCase().includes(o.value.operacao.toLowerCase()))&&(o.value.quantidade===""||String(a.quantidade).includes(o.value.quantidade))&&(o.value.item===""||a.item.toLowerCase().includes(o.value.item.toLowerCase()))&&(o.value.preco_unitario===""||String(a.preco_unitario).includes(o.value.preco_unitario))&&(o.value.valor_total===""||String(a.valor_total).includes(o.value.valor_total))&&(o.value.responsavel===""||a.responsavel.toLowerCase().includes(o.value.responsavel.toLowerCase()))&&(o.value.quando===""||a.data.toLowerCase().includes(o.value.quando.toLowerCase()))).sort((a,e)=>d.value?x.value?a[d.value]>e[d.value]?1:-1:a[d.value]<e[d.value]?1:-1:0)),u=a=>{d.value===a?x.value=!x.value:(d.value=a,x.value=!0)},U=()=>{f.value=!f.value},M=a=>{console.log("Filtros atualizados:",a),F(a.startDate,a.endDate)},F=async(a=null,e=null)=>{try{let s="/api/estoque/incial";const g=[];a&&g.push(`start_date=${a}`),e&&g.push(`end_date=${e}`),g.length>0&&(s+=`?${g.join("&")}`);const l=(await O.get(s)).data;l.saldo_estoque_inicial?(y.value=Array.isArray(l.historicoMovimentacoes)?l.historicoMovimentacoes:Object.values(l.historicoMovimentacoes),h.value=l.start_date||"não informado",A.value=l.end_date||"não informado",b.value=l.saldo_estoque_inicial||"0,00",V.value=l.entradas_durante_periodo||"0,00",_.value=l.itensNoEstoque||"0,00",$.value=l.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(s){console.error("Erro ao buscar dados analíticos:",s)}},q=a=>a==null?"0,00":Number(a).toFixed(2).replace(".",",");return N(()=>{F()}),(a,e)=>(v(),B(Q,null,{default:D(()=>[k(S(I),{title:"Controle de estoque"}),t("div",G,[e[15]||(e[15]=t("div",null,[t("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque ")],-1)),t("div",K,[t("div",X,[e[14]||(e[14]=t("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),t("span",Z,[k(P,{onUpdateFilters:M})])])])]),e[27]||(e[27]=t("a",{href:"https://forms.gle/8nkNhrqCG5UHXLAQ9",target:"_blank",class:"w-full rounded-xl"},[t("img",{src:"/storage/images/banner-estoque.png",alt:"Banner Estoque",class:"w-full h-auto rounded-xl shadow-xl hover:shadow-none transition-all duration-300"})],-1)),t("div",J,[t("div",W,[t("div",Y,[e[16]||(e[16]=t("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),t("div",ee," R$ "+n(b.value),1)]),t("div",te,[e[17]||(e[17]=t("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),t("div",se," R$ "+n(_.value),1)])])]),t("div",oe,[t("div",{class:"flex items-center justify-between mb-4"},[e[19]||(e[19]=t("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),t("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:U},e[18]||(e[18]=[t("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),t("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),t("div",ae,[t("div",re,[t("span",{onClick:e[0]||(e[0]=s=>u("operacao")),class:"px-5 cursor-pointer flex items-center gap-2"},e[20]||(e[20]=[i(" OPERAÇÃO "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[1]||(e[1]=s=>u("quantidade")),class:"flex items-center gap-2 cursor-pointer"},e[21]||(e[21]=[i(" QTD. "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[2]||(e[2]=s=>u("item")),class:"cursor-pointer flex items-center gap-2"},e[22]||(e[22]=[i(" Item "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),t("span",{onClick:e[3]||(e[3]=s=>u("preco_unitario")),class:"cursor-pointer flex items-center gap-2"},e[23]||(e[23]=[i(" Valor Unit. "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[4]||(e[4]=s=>u("valor_total")),class:"cursor-pointer flex items-center gap-2"},e[24]||(e[24]=[i(" Valor Total "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[5]||(e[5]=s=>u("quanto")),class:"cursor-pointer flex items-center gap-2"},e[25]||(e[25]=[i(" Quando "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),t("span",{onClick:e[6]||(e[6]=s=>u("responsavel")),class:"cursor-pointer flex items-center gap-2"},e[26]||(e[26]=[i(" Responsável "),t("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),f.value?(v(),m("div",le,[p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.operacao=s),type:"text",placeholder:"Filtrar por operação",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.operacao]]),p(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.quantidade=s),type:"text",placeholder:"Filtrar por qtd.",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.quantidade]]),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.item=s),type:"text",placeholder:"Filtrar por item",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.item]]),p(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.value.preco_unitario=s),type:"text",placeholder:"Filtrar por valor unit.",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.preco_unitario]]),p(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.valor_total=s),type:"text",placeholder:"Filtrar por valor total",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.valor_total]]),p(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.quando=s),type:"text",placeholder:"Filtrar por quando",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.quando]]),p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.responsavel=s),type:"text",placeholder:"Filtrar por responsável",class:"p-2 border border-gray-300 rounded"},null,512),[[c,o.value.responsavel]])])):C("",!0),t("div",{ref_key:"scrollContainer",ref:E,class:"overflow-y-auto max-h-96 scroll-hidden"},[t("ul",ne,[(v(!0),m(T,null,H(L.value,(s,g)=>(v(),m("li",{key:g,class:"hover:bg-gray-200 grid grid-cols-7 gap-1 px-6 py-2 text-[16px]"},[t("span",ie,[t("img",{src:w[s.operacao].icon,alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,de),i(" "+n(w[s.operacao].label),1)]),t("span",ue,n(s.quantidade)+" "+n(s.unidade==="unidade"?"uni":"kg"),1),t("span",pe,n(s.item),1),t("span",ce," R$ "+n(q(s.preco_unitario)),1),t("span",ge," R$ "+n(q(s.valor_total)),1),t("span",ve,n(s.data),1),t("span",xe,n(s.responsavel),1)]))),128))])],512),j.value?(v(),m("div",me,"Carregando...")):C("",!0)])])]),_:1}))}},he=z(fe,[["__scopeId","data-v-b88c814c"]]);export{he as default};
