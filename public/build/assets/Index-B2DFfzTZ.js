import{L as q}from"./LayoutFranqueado-Cb80ozG9.js";import{d as u,y as D,i as F,o,e as n,a as e,j as $,v as A,F as w,g as k,t as d,k as N,h as y,c as m,w as L,b as C,u as B,Z as P}from"./app-BkFjde_Z.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-D1KyZnKq.js";const j={class:"search-container relative flex items-center w-full mb-4"},E=["onClick"],H={class:"w-[110.73px] h-[24.32px] text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},I={class:"text-[20px]"},S={class:"w-[400px] h-[17.68px] text-[#6d6d6d] text-[13px] font-medium font-['Figtree'] leading-[20px]"},T={__name:"ListadoHistoricoPedido",emits:["dado-selecionado"],setup(p,{emit:x}){const _=x,l=u([]),c=u("");D(async()=>{try{const t=await N.get("/api/historico/lista");l.value=Object.values(t.data)}catch(t){console.error("Erro ao carregar os dados:",t)}});const v=t=>{_("dado-selecionado",t)},g=F(()=>{const t=c.value.toLowerCase();return l.value.filter(a=>String(a.id).toLowerCase().includes(t)||a.fornecedor_nome.toLowerCase().includes(t))});return(t,a)=>(o(),n("div",null,[a[2]||(a[2]=e("div",{class:"painel-title"},"Histórico de pedidos",-1)),a[3]||(a[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Visualize pedidos já realizados com fornecedores")],-1)),e("div",j,[a[1]||(a[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),$(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),placeholder:"Buscar de pedidos",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[A,c.value]])]),(o(!0),n(w,null,k(g.value,s=>(o(),n("div",{key:s.id,onClick:i=>v(s),class:"w-full h-[63px] p-3 mt-4 px-[30px] bg-white rounded-[10px] shadow-[0px_0px_1px_0px_rgba(142,142,142,0.08)] cursor-pointer"},[e("div",H,[e("p",I,"# "+d(s.id),1)]),e("div",S,d(s.fornecedor_nome),1)],8,E))),128))]))}},V=b(T,[["__scopeId","data-v-bf6486dd"]]),M={class:"elemento-fixo"},R={key:0},U={class:"mt-8"},z={class:"flex justify-between w-full h-[24.32px] text-[#262a27] text-[42px] font-semibold font-['Figtree'] leading-[12px]"},K={class:"flex justify-between w-full h-[17.68px] text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},O={class:"w-[250px]"},Q={class:"w-[250px] text-right font-semibold"},G={class:"min-w-full table-auto"},Z=["onDblclick"],J={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},W={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},X={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Y={key:0},ee={key:1},te={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},se={__name:"DetalhesHistoricoPedidos",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(p,{emit:x}){const _=p,l=u(!1),c=u(null),f=t=>{c.value=t},v=t=>{const a=Array.isArray(t.valor_unitario)?t.valor_unitario.reduce((i,r)=>i+r,0):parseFloat(t.valor_unitario),s=Array.isArray(t.quantidade)?t.quantidade.reduce((i,r)=>i+r,0):parseFloat(t.quantidade);return isNaN(a)||isNaN(s)?0:a*s},g=t=>{const a=Array.isArray(t.valor_unitario)?t.valor_unitario.reduce((i,r)=>i+r,0):parseFloat(t.valor_unitario),s=Array.isArray(t.quantidade)?t.quantidade.reduce((i,r)=>i+r,0):parseFloat(t.quantidade);return isNaN(a)||isNaN(s)?0:a/s};return(t,a)=>(o(),n("div",M,[l.value?y("",!0):(o(),n("div",R,[e("div",U,[e("div",z,[e("p",null,"# "+d(p.dados.id),1),a[0]||(a[0]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1))]),e("div",K,[e("div",O,d(p.dados.fornecedor_nome),1),e("div",Q,d(p.dados.created_at),1)]),e("table",G,[a[1]||(a[1]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," TOTAL ")])],-1)),e("tbody",null,[(o(!0),n(w,null,k(_.dados.itens_id,(s,i)=>(o(),n("tr",{key:s.id,onDblclick:r=>f(i)},[e("td",J,d(s.nome),1),e("td",W,[e("span",null,d(Array.isArray(s.quantidade)?s.quantidade.reduce((r,h)=>r+h,0):s.quantidade)+" "+d(s.unidadeDeMedida==="a_granel"?"KG":"UN"),1)]),e("td",X,[s.unidadeDeMedida==="a_granel"?(o(),n("span",Y," R$ "+d(g(s).toFixed(2)),1)):(o(),n("span",ee," R$ "+d(Array.isArray(s.valor_unitario)?(s.valor_unitario.reduce((r,h)=>r+h,0)/100).toFixed(2):(s.valor_unitario/100).toFixed(2)),1))]),e("td",te,[e("span",null,d((v(s)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)])],40,Z))),128))])])])]))]))}},ae=b(se,[["__scopeId","data-v-570d07ec"]]),oe={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},re={key:0},de={class:"flex flex-col gap-4"},ne={__name:"Index",setup(p){const x=u(null),_=u(0),l=u(!1),c=f=>{x.value=f};return(f,v)=>(o(),m(q,null,{default:L(()=>[C(B(P),{title:"Histórico de Pedidos"}),e("div",oe,[l.value?y("",!0):(o(),n("div",re,[(o(),m(V,{key:_.value,ref:"listaDados",onDadoSelecionado:c}))])),e("div",de,[l.value?y("",!0):(o(),n(w,{key:0},[x.value?(o(),m(ae,{key:0,dados:x.value},null,8,["dados"])):y("",!0)],64))])])]),_:1}))}},pe=b(ne,[["__scopeId","data-v-b9a5baa2"]]);export{pe as default};
