import{l as F,d as s,q as U,e as m,f as z,o as d,a as t,b as i,F as D,p as g,k as M}from"./app-CJV0vEcG.js";import{I as N}from"./InputModel-CnkbUehz.js";import{_ as O}from"./LabelModel-r8Ik1D7U.js";import{B as P}from"./ButtonPrimaryMedio-DNLSf_CT.js";import{B as q}from"./ButtonCancelar-DDfF7pm8.js";import{C as S}from"./ConfirmDialog-DY1d8jnC.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={key:0,class:"sidebar-container"},R={class:"w-full h-[525px] bg-white rounded-[20px] p-12"},$={class:"flex justify-center mb-6 relative group"},A=["src"],X={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},G={class:"form-buttons"},H={__name:"EditarSetorOperacional",props:{isVisible:{type:Boolean,required:!0},informacoes:{type:Object,required:!0}},emits:["cancelar"],setup(p,{emit:b}){const f=F(),y=p,v=b,n=s(""),r=s(""),l=s(""),c=s(null),h=s(null),_=s(""),u=s(!1),x=s("");U(()=>y.informacoes,o=>{o&&(n.value=o.id||"",r.value=o.name||"",l.value=o.profile_photo_url||"")},{immediate:!0});const C=()=>{u.value=!0},k=()=>{u.value=!1,j()},w=()=>{u.value=!1},I=()=>{h.value.click()},B=o=>{const e=o.target.files[0];e&&(c.value=e,l.value=URL.createObjectURL(e))},E=()=>{c.value=null,l.value=""},V=()=>{v("cancelar")},j=async()=>{var o,e;if(!n.value||!r.value){_.value="Por favor, preencha todos os campos obrigatórios.";return}try{const a=new FormData;a.append("id",n.value),a.append("name",r.value),c.value&&a.append("profile_photo",c.value),a.append("_method","PUT"),await M.post(`/api/admin-operacionais/${n.value}`,a,{headers:{"Content-Type":"multipart/form-data"}}),f.success("Informações atualizadas com sucesso!"),v("cancelar")}catch(a){f.error("Erro ao atualizar as informações."),_.value=((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"Erro ao atualizar as informações.",console.error("Erro na atualização:",a)}};return(o,e)=>p.isVisible?(d(),m("div",L,[t("div",R,[t("form",null,[t("div",$,[t("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:I},[l.value?(d(),m(D,{key:0},[t("img",{src:l.value,alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,A),t("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:e[0]||(e[0]=g(()=>{},["stop"]))},[t("button",{onClick:g(E,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(d(),m("img",X))]),t("input",{type:"file",ref_key:"fileInput",ref:h,accept:"image/*",class:"hidden",onChange:B},null,544)]),i(O,{text:"Nome do setor operacional"}),i(N,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),placeholder:"Entregas"},null,8,["modelValue"]),i(S,{isVisible:u.value,motivo:x.value,onConfirm:k,onCancel:w},null,8,["isVisible","motivo"]),t("div",G,[i(q,{class:"w-full mr-2",text:"Cancelar",onClick:V}),i(P,{class:"w-full",text:"Atualizar",onClick:C})])])])])):z("",!0)}},oe=T(H,[["__scopeId","data-v-6be0fdad"]]);export{oe as E};
